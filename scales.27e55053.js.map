{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;AASA,GAEA,SAAS,kCAAY,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,KAAK;IACvD,IAAI,OAAO,SAAS,cAAc,CAAC;IAEnC,IAAI,QAAQ,SAAS,aAAa,CAAC;IACnC,MAAM,SAAS,GAAG,QAAQ,+DAA+D;IACzF,IAAI,QAAQ,SAAS,aAAa,CAAC;IACnC,MAAM,SAAS,GAAG;IAClB,IAAI,MAAM,SAAS,aAAa,CAAC;IACjC,IAAI,QAAQ,SAAS,aAAa,CAAC;IACnC,MAAM,SAAS,GAAG;IAElB,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;QACvC,IAAI,OAAO,SAAS,aAAa,CAAC;QAClC,KAAK,SAAS,GAAG;QACjB,KAAK,SAAS,GAAG,OAAO,CAAC,EAAE;QAE3B,IAAI,WAAW,CAAC;IAClB;IAEA,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,IAAK;QACpC,IAAI,MAAM,SAAS,aAAa,CAAC;QACjC,IAAI,SAAS,GAAG;QAEhB,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,CAAC,EAAE,CAAC,MAAM,EAAE,IAAK;YACvC,IAAI,OAAO,SAAS,aAAa,CAAC;YAClC,KAAK,SAAS,GAAG;YACjB,KAAK,SAAS,GAAG,IAAI,CAAC,EAAE,CAAC,EAAE;YAE3B,IAAI,WAAW,CAAC;QAClB;QAEA,MAAM,WAAW,CAAC;IACpB;IAEA,MAAM,WAAW,CAAC;IAClB,MAAM,WAAW,CAAC;IAClB,MAAM,WAAW,CAAC;IAElB,KAAK,WAAW,CAAC;AACnB;AAEA,iBAAiB;iBACf;AACF;;;;;AEpCA,CAAA,SAAA,CAAA,EAAA,CAAA;IAAA,IAAA,cAAA,OAAA,UAAA,OAAA,GAAA,EAAA,OAAA,EAAA,EAAA;SAAA;AAAA,CAAA,EAAA,gBAAA;IAAA;IAAA,SAAS,EAAK,CAAd,EAAoB,CAApB;QAA0B,OACJ,eAAhB,OAAO,IAAsB,IAAO;YAAE,SAAO,CAAA;QAAT,IACf,YAAhB,OAAO,KACd,CAAA,QAAQ,IAAR,CAAa,uDACb,IAAO;YAAE,SAAS,CAAC;QAAZ,CAAA,GAKL,EAAK,OAAL,IAAgB,6EAA6E,IAA7E,CAAkF,EAAK,IAAvF,IACX,IAAI,KAAK;YAAA;YAA8B;SAAvC,EAA8C;YAAE,MAAM,EAAK,IAAb;QAAA,KAEhD;IACR;IAED,SAAS,EAAU,CAAnB,EAAwB,CAAxB,EAA8B,CAA9B;QACE,IAAI,IAAM,IAAI;QACd,EAAI,IAAJ,CAAS,OAAO,IAChB,EAAI,YAAJ,GAAmB,QACnB,EAAI,MAAJ,GAAa;YACX,EAAO,EAAI,QAAL,EAAe,GAAM;QAC5B,GACD,EAAI,OAAJ,GAAc;YACZ,QAAQ,KAAR,CAAc;QACf,GACD,EAAI,IAAJ;IACD;IAED,SAAS,EAAa,CAAtB;QACE,IAAI,IAAM,IAAI;QAEd,EAAI,IAAJ,CAAS,QAAQ,GAAjB,CAAA;QACA,IAAI;YACF,EAAI,IAAJ;QACD,EAAC,OAAO,GAAG,CAAE;QACd,OAAqB,OAAd,EAAI,MAAJ,IAAmC,OAAd,EAAI,MACjC;IAAA;IAGD,SAAS,EAAO,CAAhB;QACE,IAAI;YACF,EAAK,aAAL,CAAmB,IAAI,WAAW;QACnC,EAAC,OAAO,GAAG;YACV,IAAI,IAAM,SAAS,WAAT,CAAqB;YAC/B,EAAI,cAAJ,CAAmB,SAAnB,CAAA,GAAA,CAAA,GAAwC,QAAQ,GAAG,GAAG,GAAG,IACnC,IADtB,CAAA,GAAA,CAAA,GAAA,CAAA,GAAA,CAAA,GACsD,GAAG,OACzD,EAAK,aAAL,CAAmB;QACpB;IACF;I,IAtDG,IAA4B,YAAlB,OAAO,UAAuB,OAAO,MAAP,KAAkB,SAC1D,SAAyB,YAAhB,OAAO,QAAqB,KAAK,IAAL,KAAc,OACnD,OAAyB,YAAlB,OAAO,kBAAuB,eAAO,MAAP,KAAkB,iBACvD,iBADO,KAAA,GAyDP,IAAiB,EAAQ,SAAR,IAAqB,YAAY,IAAZ,CAAiB,UAAU,SAA3B,KAAyC,cAAc,IAAd,CAAmB,UAAU,SAA7B,KAA2C,CAAC,SAAS,IAAT,CAAc,UAAU,SAAxB,GAE3H,IAAS,EAAQ,MAAR,IAEQ,CAAA,YAAlB,OAAO,UAAuB,WAAW,IACtC,YAAiC,IAGlC,cAAc,kBAAkB,SAAhC,IAA6C,CAAC,IAC/C,SAAiB,CAAjB,EAAuB,CAAvB,EAA6B,CAA7B;QAAmC,IAC/B,IAAM,EAAQ,GAAR,IAAe,EAAQ,SADE,EAE/B,IAAI,SAAS,aAAT,CAAuB;QAC/B,IAAO,KAAQ,EAAK,IAAb,IAAqB,YAE5B,EAAE,QAAF,GAAa,GACb,EAAE,GAAF,GAAQ,YAKY,YAAhB,OAAO,IAET,CAAA,EAAE,IAAF,GAAS,GACL,EAAE,MAAF,KAAa,SAAS,MAdO,GAmB/B,EAAM,KAJN,EAAY,EAAE,IAAH,IACP,EAAS,GAAM,GAAM,KACrB,EAAM,GAAG,EAAE,MAAF,GAAW,SAAf,IAMX,CAAA,EAAE,IAAF,GAAS,EAAI,eAAJ,CAAoB,IAC7B,WAAW;YAAc,EAAI,eAAJ,CAAoB,EAAE,IAAtB;QAA6B,GAAE,MACxD,WAAW;YAAc,EAAM;QAAI,GAAE,EAA3B;IAEb,IAGC,sBAAsB,YACtB,SAAiB,CAAjB,EAAuB,CAAvB,EAA6B,CAA7B;QAGA,IAFA,IAAO,KAAQ,EAAK,IAAb,IAAqB,YAER,YAAhB,OAAO,GAUT,UAAU,gBAAV,CAA2B,EAAI,GAAM,IAAO;aAT5C,IAAI,EAAY,IACd,EAAS,GAAM,GAAM;aAChB;YACL,IAAI,IAAI,SAAS,aAAT,CAAuB;YAC/B,EAAE,IAAF,GAAS,GACT,EAAE,MAAF,GAAW,UACX,WAAW;gBAAc,EAAM;YAAI;QACpC;IAIJ,IAGC,SAAiB,CAAjB,EAAuB,CAAvB,EAA6B,CAA7B,EAAmC,CAAnC;QASA,IANA,IAAQ,KAAS,KAAK,IAAI,WACtB,KACF,CAAA,EAAM,QAAN,CAAe,KAAf,GACA,EAAM,QAAN,CAAe,IAAf,CAAoB,SAApB,GAAgC,gBAAA,GAGd,YAAhB,OAAO,GAAmB,OAAO,EAAS,GAAM,GAAM;QAThB,IAWtC,IAAsB,+BAAd,EAAK,IAXyB,EAYtC,IAAW,eAAe,IAAf,CAAoB,EAAQ,WAA5B,KAA4C,EAAQ,MAZzB,EAatC,IAAc,eAAe,IAAf,CAAoB,UAAU,SAA9B;QAElB,IAAI,AAAC,CAAA,KAAgB,KAAS,KAAa,CAAA,KAAyC,eAAtB,OAAO,YAA4B;YAE/F,IAAI,IAAS,IAAI;YACjB,EAAO,SAAP,GAAmB;gBACjB,IAAI,IAAM,EAAO,MAAjB;gBACA,IAAM,IAAc,IAAM,EAAI,OAAJ,CAAY,gBAAgB,0BAClD,IAAO,EAAM,QAAN,CAAe,IAAf,GAAsB,IAC5B,WAAW,GAChB,IAAQ;YACT,GACD,EAAO,aAAP,CAAqB;QACtB,OAAM;YAAA,IACD,IAAM,EAAQ,GAAR,IAAe,EAAQ,SAD5B,EAED,IAAM,EAAI,eAAJ,CAAoB;YAC1B,IAAO,EAAM,QAAN,GAAiB,IACvB,SAAS,IAAT,GAAgB,GACrB,IAAQ,MACR,WAAW;gBAAc,EAAI,eAAJ,CAAoB;YAAM,GAAE;QACtD;IACF,CAAA;IAGH,EAAQ,MAAR,GAAiB,EAAO,MAAP,GAAgB,GAG/B,iBAAiB;AAvJnB;;;;AClBA;;;;;;;;;;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACVA;;;;;;;;;;AASA;;;;;6CAIM;AACN,uCAAa;AAEb,MAAM;IACJ,YAAY,gBAAC,YAAY,gBAAE,YAAY,UAAE,MAAM,cAAE,UAAU,EAAC,CAAE;QAC5D,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,aAAa,GAAG;QACrB,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,WAAW,GAAG;IACrB;IAEA,IAAI,aAAa,MAAM,EAAE;QACvB,IAAI,CAAC,aAAa,GAAG;IACvB;IACA,IAAI,eAAe;QACjB,OAAO,IAAI,CAAC,aAAa;IAC3B;IAEA,IAAI,aAAa,MAAM,EAAE;QACvB,IAAI,CAAC,aAAa,GAAG;IACvB;IACA,IAAI,eAAe;QACjB,OAAO,IAAI,CAAC,aAAa;IAC3B;IAEA,IAAI,OAAO,MAAM,EAAE;QACjB,IAAI,CAAC,OAAO,GAAG;QACf,uDAAuD;QACvD,IAAI,kBAAkB,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC;YAC5C,OAAO,CAAA,GAAA,wBAAgB,EAAE,GAAG;QAC9B;QACA,IAAI,CAAC,aAAa,GAAG;IACvB;IACA,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,OAAO;IACrB;IAEA,IAAI,WAAW,IAAI,EAAE;QACnB,IAAI,CAAC,WAAW,GAAG;IACrB;AACF;AAEA,IAAI,0CAAoB,IAAI,uCAAiB;IAC3C,cAAc;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,cAAc,EAAE;IAChB,QAAQ;IACR,YAAY;QAAC;QAAc;QAAgB;QAAc;KAAgB;AAC3E;AAEA,4BAAiB;uBACf;AACF;;;;;;ACjIA;;;;;;;;;;ACAA;;;;;;;;;;AASA;;;;;;ACTA;;;;;;;;;;AASA;;;;;;;;;;;;;AASA,CAAA,GAAA,6CAAG,EAAE,gBAAgB,CAAC,cAAc,CAAA,GAAA,6CAAS;AAC7C,CAAA,GAAA,6CAAG,EAAE,gBAAgB,CAAC,OAAO,CAAA,GAAA,6CAAE;AAE/B,SAAS,oCAAc,OAAO,EAAE,SAAS;IACvC,MAAM,aAAa,cAAc,eAAe,CAAA,GAAA,uBAAe,IAAI,CAAA,GAAA,sBAAc;IACjF,MAAM,mBAAmB,WAAW,QAAQ;IAC5C,MAAM,iBAAiB,WAAW,MAAM;IACxC,MAAM,qBAAqB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IACxE,MAAM,SAAS,mBAAmB,KAAK;IACvC,MAAM,cAAc,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,iBAAiB,CAAC;IAC3E,MAAM,SAAS,YAAY,OAAO;IAClC,4BAA4B;IAC5B,WAAW,QAAQ,GAAG;IACtB,MAAM,qBAAqB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,gBAAgB,CAAC;IACjF,mBAAmB,SAAS,GAAG;IAE/B,IAAI,iBAAiB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,cAAc,CAAC;IACzE,eAAe,SAAS,GAAG;IAE3B,IAAI,eAAe,WAAW,MAAM;IACpC,IAAK,IAAI,IAAI,GAAG,IAAI,SAAS,IAC3B,CAAA,GAAA,wBAAgB,EAAE;QAChB,SAAS;QACT,WAAW;QACX,QAAQ;YACN,iBAAiB,YAAY,CAAC,EAAE;QAClC;QACA,UAAU,CAAC,EAAE,UAAU,cAAc,CAAC;IACxC;IAGF,WAAW,MAAM,GAAG;IACpB,eAAe,WAAW,MAAM;IAEhC,WAAW,OAAO,GAChB,WAAW,MAAM,KAAK,SAAS,WAAW,MAAM,KAAK,QACjD,eACA,aAAa,GAAG,CAAC,CAAC;QAChB,OAAO,CAAA,GAAA,oBAAY,EAAE;IACvB;IAEN,IAAI,mBAAmB,SACnB,aACG,GAAG,CAAC,CAAC;QACJ,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACjB,GACC,QAAQ,GACR,UAAU,CAAC,KAAK,QACnB,aAAa,QAAQ,GAAG,UAAU,CAAC,KAAK;IAC5C,mBAAmB,SAAS,GAAG;IAE/B,yCAAyC;IACzC,WAAW,QAAQ,GAAG;IACtB,WAAW,MAAM,GAAG;AACtB;AAEA,4BAAiB;mBACf;AACF;;;;AC5EA;;;;;;;;;;ACAA;;;;;;;;;;AASA;;;;;AAMA,SAAS,8BAAQ,SAAS;IACxB,MAAM,aAAa,cAAc,eAAe,CAAA,GAAA,uBAAe,IAAI,CAAA,GAAA,sBAAc;IACjF,8CAA8C;IAC9C,IAAI,SAAS;QAAC,KAAK;QAAI,OAAO;QAAI,QAAQ;QAAI,MAAM;IAAE,GACpD,QAAQ,MAAM,OAAO,IAAI,GAAG,OAAO,KAAK,EACxC,SAAS,MAAM,OAAO,GAAG,GAAG,OAAO,MAAM;IAE3C,gDAAgD;IAChD,IAAI,MAAM,CAAA,GAAA,6CAAC,EACR,MAAM,CAAC,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC,EAC7B,MAAM,CAAC,OACP,IAAI,CAAC,SAAS,QAAQ,OAAO,IAAI,GAAG,OAAO,KAAK,EAChD,IAAI,CAAC,UAAU,SAAS,OAAO,GAAG,GAAG,OAAO,MAAM,EAClD,MAAM,CAAC,KACP,IAAI,CAAC,aAAa,eAAe,OAAO,IAAI,GAAG,MAAM,OAAO,GAAG,GAAG;IAErE,4BAA4B;IAC5B,IAAI,WAAW;QAAC;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;QAAK;KAAI;IACjE,IAAI,SAAS;QAAC;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;QAAM;KAAM;IAE1E,2BAA2B;IAC3B,IAAI,IAAI,CAAA,GAAA,6CAAC,EAAE,SAAS,GAAG,KAAK,CAAC;QAAC;QAAG;KAAM,EAAE,MAAM,CAAC,UAAU,OAAO,CAAC;IAClE,IACG,MAAM,CAAC,KACP,IAAI,CAAC,aAAa,iBAAiB,SAAS,KAC5C,IAAI,CAAC,CAAA,GAAA,6CAAC,EAAE,UAAU,CAAC;IAEtB,2BAA2B;IAC3B,IAAI,IAAI,CAAA,GAAA,6CAAC,EAAE,SAAS,GAAG,KAAK,CAAC;QAAC;QAAQ;KAAE,EAAE,MAAM,CAAC,QAAQ,OAAO,CAAC;IACjE,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,CAAA,GAAA,6CAAC,EAAE,QAAQ,CAAC;IAEjC,WAAW,QAAQ,GAAG;IACtB,IAAI,UAAU,WAAW,aAAa;IAEtC,CAAA,GAAA,6CAAC,EAAE,GAAG,CAAC,0FAA0F,IAAI,CAAC,SAAU,IAAI;QAClH,IACG,SAAS,GACT,IAAI,CAAC,MAAM,SAAU,CAAC;YACrB,OAAO,EAAE,KAAK,GAAG,MAAM,EAAE,QAAQ;QACnC,GACC,IAAI,CAAC,QACL,IAAI,CAAC,KAAK,SAAU,CAAC;YACpB,OAAO,EAAE,EAAE,KAAK;QAClB,GACC,IAAI,CAAC,KAAK,SAAU,CAAC;YACpB,OAAO,EAAE,EAAE,QAAQ;QACrB,GACC,IAAI,CAAC,SAAS,EAAE,SAAS,IACzB,IAAI,CAAC,UAAU,EAAE,SAAS,IAC1B,KAAK,CAAC,QAAQ,SAAU,CAAC;YACxB,OAAO,QAAQ,EAAE,KAAK,EAAE,GAAG;QAC7B;IACJ;AACF;AAEA,4BAAiB;aACf;AACF;;AD/DA;;AETA;;;;;;;;;;AASA;;;;;AAMA,SAAS,iCAAW,SAAS;IAC3B,MAAM,aAAa,cAAc,eAAe,CAAA,GAAA,uBAAe,IAAI,CAAA,GAAA,sBAAc;IACjF,MAAM,mBAAmB,WAAW,QAAQ;IAC5C,WAAW,QAAQ,GAAG;IACtB,UAAU;IACV,IAAI,SAAS;QAAC,KAAK;QAAI,OAAO;QAAI,QAAQ;QAAI,MAAM;IAAE,GACpD,QAAQ,MAAM,OAAO,IAAI,GAAG,OAAO,KAAK,EACxC,SAAS,MAAM,OAAO,GAAG,GAAG,OAAO,MAAM;IAE3C,IAAI,MAAM,CAAA,GAAA,6CAAC,EACR,MAAM,CAAC,CAAC,CAAC,EAAE,UAAU,UAAU,CAAC,EAChC,MAAM,CAAC,OACP,IAAI,CAAC,SAAS,QAAQ,OAAO,IAAI,GAAG,OAAO,KAAK,EAChD,IAAI,CAAC,UAAU,SAAS,OAAO,GAAG,GAAG,OAAO,MAAM,EAClD,MAAM,CAAC;IACV,qBAAqB;IACrB,8DAA8D;IAE9D,qBAAqB;IACrB,MAAM,OAAO,CAAA,GAAA,6CAAC,EAAE,OAAO;IACvB,MAAM,aAAa,CAAA,GAAA,6CAAC,EACjB,gBAAgB,GAChB,KAAK,CAAC,KACN,MAAM,CAAC;QAAC;QAAG;KAAI,EACf,SAAS,CAAC;QAAC,QAAQ;QAAK,SAAS;KAAK;IAEzC,uBAAuB;IACvB,IAAI,OAAO,IAAI;IACf,MAAM,aAAa,CAAA,GAAA,6CAAC,EAAE,cAAc,GAAG,MAAM,CAAC;QAAC;QAAQ;QAAS;QAAU;QAAU;QAAW;KAAU,EAAE,KAAK,CAAC,WAAW,MAAM;IAClI,+CAA+C;IAE/C,8BAA8B;IAC9B,QAAQ,GAAG,CAAC;QACV,CAAA,GAAA,6CAAC,EAAE,IAAI,CAAC;QACR,CAAA,GAAA,6CAAC,EAAE,GAAG,CAAC,8FAA8F,SAAU,CAAC;YAC9G,KAAK,GAAG,CAAC,EAAE,IAAI,EAAE,CAAC,EAAE,GAAG;QACzB;KACD,EAAE,IAAI,CAAC,SAAU,QAAQ;QACxB,IAAI,OAAO,QAAQ,CAAC,EAAE;QAEtB,eAAe;QACf,IACG,MAAM,CAAC,KACP,SAAS,CAAC,QACV,IAAI,CAAC,KAAK,QAAQ,EAClB,IAAI,CAAC,OACN,oBAAoB;SACnB,IAAI,CAAC,KAAK,CAAA,GAAA,6CAAC,EAAE,OAAO,GAAG,UAAU,CAAC,YACnC,gCAAgC;SAC/B,IAAI,CAAC,QAAQ,SAAU,CAAC;YACvB,EAAE,KAAK,GAAG,KAAK,GAAG,CAAC,EAAE,EAAE,KAAK;YAC5B,OAAO,WAAW,EAAE,KAAK;QAC3B;IACJ;IAEA,WAAW,QAAQ,GAAG;AACxB;AAEA,4BAAiB;gBACf;AACF;;;;AC3EA;;;;;;;;;;AASA;;;;;AAMA,SAAS,4BAAM,SAAS,EAAE,MAAM;IAC9B,MAAM,aAAa,cAAc,eAAe,CAAA,GAAA,uBAAe,IAAI,CAAA,GAAA,sBAAc;IACjF,MAAM,mBAAmB,WAAW,QAAQ;IAC5C,WAAW,QAAQ,GAAG;IAEtB,MAAM,QAAQ;IACd,MAAM,SAAS;IACf,MAAM,SAAS;IACf,MAAM,cAAc,SAAS;IAE7B,sBAAsB;IACtB,IAAI,MAAM,CAAA,GAAA,6CAAC,EACR,MAAM,CAAC,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC,EAC3B,MAAM,CAAC,OACP,IAAI,CAAC,SAAS,OACd,IAAI,CAAC,UAAU,QACf,MAAM,CAAC,KACP,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,QAAQ,EAAE,EAAE,EAAE,SAAS,EAAE,CAAC,CAAC;IAE7D,kBAAkB;IAClB,IAAI,SAAS;QACX;YAAC;YAAG;YAAM;YAAM;SAAK;QACrB;YAAC;YAAM;YAAG;YAAM;SAAK;QACrB;YAAC;YAAM;YAAO;YAAG;SAAK;QACtB;YAAC;YAAM;YAAK;YAAK;SAAE;KACpB;IAED,2CAA2C;IAC3C,IAAI,CAAC,QAAQ,SAAS,WAAW,MAAM;IAEvC,iGAAiG;IACjG,IAAI,MAAM,CAAA,GAAA,6CAAC,EAAE,KAAK,GAAG,QAAQ,CAAC,MAAM,aAAa,CAAC,CAAA,GAAA,6CAAC,EAAE,UAAU,EAAE;IAEjE,iDAAiD;IACjD,IACG,KAAK,CAAC,KACN,MAAM,CAAC,KACP,SAAS,CAAC,KACV,IAAI,CAAC,SAAU,CAAC;QACf,OAAO,EAAE,MAAM;IACjB,GACC,KAAK,GACL,MAAM,CAAC,KACP,MAAM,CAAC,QACP,KAAK,CAAC,QAAQ,SAAU,CAAC,EAAE,CAAC;QAC3B,OAAO,MAAM,CAAC,EAAE;IAClB,GACC,KAAK,CAAC,UAAU,SAChB,IAAI,CAAC,KAAK,CAAA,GAAA,6CAAC,EAAE,GAAG,GAAG,WAAW,CAAC,QAAQ,WAAW,CAAC;IAEtD,+BAA+B;IAC/B,IACG,KAAK,CAAC,KACN,MAAM,CAAC,KACP,SAAS,CAAC,QACV,IAAI,CAAC,SAAU,CAAC;QACf,OAAO;IACT,GACC,KAAK,GACL,MAAM,CAAC,QACP,IAAI,CAAC,KAAK,CAAA,GAAA,6CAAC,EAAE,MAAM,GAAG,MAAM,CAAC,SAC7B,KAAK,CAAC,QAAQ,SAAU,CAAC;QACxB,OAAO,MAAM,CAAC,EAAE,MAAM,CAAC,KAAK,CAAC;IAC/B,GAAG,iEAAiE;KACnE,KAAK,CAAC,UAAU;IAEnB,WAAW,QAAQ,GAAG;AACxB;AAEA,4BAAiB;WACf;AACF;;;;ACtFA;;;;;;;;;;AASA;AAIA,SAAS,4BAAM,SAAS,EAAE,MAAM;IAC9B,8CAA8C;IAC9C,IAAI,QAAQ;IACZ,IAAI,SAAS;IACb,IAAI,SAAS;IAEb,6GAA6G;IAC7G,IAAI,SAAS,KAAK,GAAG,CAAC,OAAO,UAAU,IAAI;IAE3C,uDAAuD;IACvD,IAAI,MAAM,CAAA,GAAA,6CAAC,EACR,MAAM,CAAC,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC,EAC3B,MAAM,CAAC,OACP,IAAI,CAAC,SAAS,OACd,IAAI,CAAC,UAAU,QACf,MAAM,CAAC,KACP,IAAI,CAAC,aAAa,eAAe,QAAQ,IAAI,MAAM,SAAS,IAAI;IAEnE,oBAAoB;IACpB,IAAI,OAAO;QACT,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;QACH,GAAG;IACL;IAEA,sBAAsB;IACtB,IAAI,QAAQ,CAAA,GAAA,6CAAC,EAAE,YAAY,GAAG,MAAM,CAAC,MAAM,KAAK,CAAC;IAEjD,iDAAiD;IACjD,IAAI,MAAM,CAAA,GAAA,6CAAC,EAAE,GAAG,GAAG,KAAK,CAAC,SAAU,CAAC;QAClC,OAAO,EAAE,KAAK;IAChB;IACA,IAAI,aAAa,IAAI,CAAA,GAAA,6CAAC,EAAE,OAAO,CAAC;IAEhC,uGAAuG;IACvG,IACG,SAAS,CAAC,YACV,IAAI,CAAC,YACL,KAAK,GACL,MAAM,CAAC,QACP,IAAI,CACH,KACA,CAAA,GAAA,6CAAC,EACE,GAAG,GACH,WAAW,CAAC,KAAK,qCAAqC;KACtD,WAAW,CAAC,SAEhB,IAAI,CAAC,QAAQ,SAAU,CAAC;QACvB,OAAO,MAAM,EAAE,IAAI,CAAC,GAAG;IACzB,GACC,IAAI,CAAC,UAAU,SACf,KAAK,CAAC,gBAAgB;AAC3B;AAEA,4BAAiB;WACf;AACF;;;;AC3EA;;;;;;;;;;AASA;AAIA,SAAS,kCAAY,SAAS,EAAE,MAAM;IACpC,8CAA8C;IAC9C,IAAI,SAAS;QAAC,KAAK;QAAI,OAAO;QAAI,QAAQ;QAAI,MAAM;IAAE,GACpD,QAAQ,MAAM,OAAO,IAAI,GAAG,OAAO,KAAK,EACxC,SAAS,MAAM,OAAO,GAAG,GAAG,OAAO,MAAM;IAE3C,gDAAgD;IAChD,IAAI,MAAM,CAAA,GAAA,6CAAC,EACR,MAAM,CAAC,CAAC,CAAC,EAAE,UAAU,WAAW,CAAC,EACjC,MAAM,CAAC,OACP,IAAI,CAAC,SAAS,QAAQ,OAAO,IAAI,GAAG,OAAO,KAAK,EAChD,IAAI,CAAC,UAAU,SAAS,OAAO,GAAG,GAAG,OAAO,MAAM,EAClD,MAAM,CAAC,KACP,IAAI,CAAC,aAAa,eAAe,OAAO,IAAI,GAAG,MAAM,OAAO,GAAG,GAAG;IAErE,iBAAiB;IACjB,CAAA,GAAA,6CAAC,EAAE,GAAG,CAAC,8GAA8G,IAAI,CAAC,SAAU,IAAI;QACtI,2CAA2C;QAC3C,IAAI,OAAO,KAAK,OAAO,CAAC,KAAK,CAAC;QAE9B,aAAa;QACb,IAAI,IAAI,CAAA,GAAA,6CAAC,EACN,WAAW,GACX,MAAM,CACL,CAAA,GAAA,6CAAC,EAAE,MAAM,CAAC,MAAM,SAAU,CAAC;YACzB,OAAO,EAAE,IAAI;QACf,IAED,KAAK,CAAC;YAAC;YAAG;SAAM;QACnB,IACG,MAAM,CAAC,KACP,IAAI,CAAC,aAAa,iBAAiB,SAAS,KAC5C,IAAI,CAAC,CAAA,GAAA,6CAAC,EAAE,UAAU,CAAC,GAAG,KAAK,CAAC;QAE/B,aAAa;QACb,IAAI,IAAI,CAAA,GAAA,6CAAC,EAAE,WAAW,GAAG,MAAM,CAAC;YAAC;YAAG;SAAO,EAAE,KAAK,CAAC;YAAC;YAAQ;SAAE;QAC9D,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,CAAA,GAAA,6CAAC,EAAE,QAAQ,CAAC;QAEjC,gBAAgB;QAChB,IAAI,QAAQ,CAAA,GAAA,6CAAC,EAAE,YAAY,GAAG,MAAM,CAAC,MAAM,KAAK,CAAC;QAEjD,iBAAiB;QACjB,IAAI,cAAc,CAAA,GAAA,6CAAC,EAAE,KAAK,GAAG,IAAI,CAAC,MAAM;QACxC,wDAAwD;QAExD,iBAAiB;QACjB,IACG,SAAS,CAAC,YACV,IAAI,CAAC,aACL,KAAK,GACL,MAAM,CAAC,QACP,KAAK,CAAC,QAAQ,SAAU,CAAC;YACxB,OAAO,MAAM,EAAE,GAAG;QACpB,GACC,IAAI,CACH,KACA,CAAA,GAAA,6CAAC,EACE,IAAI,GACJ,CAAC,CAAC,SAAU,CAAC,EAAE,CAAC;YACf,OAAO,EAAE,EAAE,IAAI,CAAC,IAAI;QACtB,GACC,EAAE,CAAC,SAAU,CAAC;YACb,OAAO,EAAE,CAAC,CAAC,EAAE;QACf,GACC,EAAE,CAAC,SAAU,CAAC;YACb,OAAO,EAAE,CAAC,CAAC,EAAE;QACf;IAER;AACF;AAEA,4BAAiB;iBACf;AACF;;;;ACtFA;;;;;;;;;;AASA;;;;;AAMA,SAAS,8BAAQ,SAAS;IACxB,MAAM,aAAa,cAAc,eAAe,CAAA,GAAA,uBAAe,IAAI,CAAA,GAAA,sBAAc;IAEjF,8CAA8C;IAC9C,IAAI,SAAS;QAAC,KAAK;QAAI,OAAO;QAAI,QAAQ;QAAI,MAAM;IAAE,GACpD,QAAQ,MAAM,OAAO,IAAI,GAAG,OAAO,KAAK,EACxC,SAAS,MAAM,OAAO,GAAG,GAAG,OAAO,MAAM;IAE3C,IAAI,UAAU,WAAW,aAAa;IAEtC,gDAAgD;IAChD,IAAI,MAAM,CAAA,GAAA,6CAAC,EACR,MAAM,CAAC,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC,EAC7B,MAAM,CAAC,OACP,IAAI,CAAC,SAAS,QAAQ,OAAO,IAAI,GAAG,OAAO,KAAK,EAChD,IAAI,CAAC,UAAU,SAAS,OAAO,GAAG,GAAG,OAAO,MAAM,EAClD,MAAM,CAAC,KACP,IAAI,CAAC,aAAa,eAAe,OAAO,IAAI,GAAG,MAAM,OAAO,GAAG,GAAG;IAErE,eAAe;IACf,CAAA,GAAA,6CAAC,EAAE,GAAG,CAAC,4FAA4F,IAAI,CAAC,SAAU,IAAI;QACpH,aAAa;QACb,IAAI,IAAI,CAAA,GAAA,6CAAC,EAAE,WAAW,GAAG,MAAM,CAAC;YAAC;YAAG;SAAK,EAAE,KAAK,CAAC;YAAC;YAAG;SAAM;QAC3D,IACG,MAAM,CAAC,KACP,IAAI,CAAC,aAAa,iBAAiB,SAAS,KAC5C,IAAI,CAAC,CAAA,GAAA,6CAAC,EAAE,UAAU,CAAC;QAEtB,aAAa;QACb,IAAI,IAAI,CAAA,GAAA,6CAAC,EAAE,WAAW,GAAG,MAAM,CAAC;YAAC;YAAG;SAAO,EAAE,KAAK,CAAC;YAAC;YAAQ;SAAE;QAC9D,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,CAAA,GAAA,6CAAC,EAAE,QAAQ,CAAC;QAEjC,WAAW;QACX,IACG,MAAM,CAAC,KACP,SAAS,CAAC,OACV,IAAI,CAAC,MACL,KAAK,GACL,MAAM,CAAC,UACP,IAAI,CAAC,MAAM,SAAU,CAAC;YACrB,OAAO,EAAE,EAAE,SAAS;QACtB,GACC,IAAI,CAAC,MAAM,SAAU,CAAC;YACrB,OAAO,EAAE,EAAE,SAAS;QACtB,GACC,IAAI,CAAC,KAAK,KACV,KAAK,CAAC,QAAQ,SAAU,CAAC;YACxB,OAAO,QAAQ,EAAE,SAAS,GAAG;QAC/B;IACJ;AACF;AAEA,4BAAiB;aACf;AACF;;;;ACrEA;;;;;;;;;;AASA;;;;;AAMA,+BAA+B;AAE/B,SAAS,8BAAQ,SAAS;IACxB,MAAM,aAAa,cAAc,eAAe,CAAA,GAAA,uBAAe,IAAI,CAAA,GAAA,sBAAc;IAEjF,8CAA8C;IAC9C,MAAM,SAAS;QAAC,KAAK;QAAI,OAAO;QAAI,QAAQ;QAAI,MAAM;IAAE,GACtD,QAAQ,MAAM,OAAO,IAAI,GAAG,OAAO,KAAK,EACxC,SAAS,MAAM,OAAO,GAAG,GAAG,OAAO,MAAM;IAE3C,gDAAgD;IAChD,MAAM,MAAM,CAAA,GAAA,6CAAC,EACV,MAAM,CAAC,CAAC,EAAE,UAAU,MAAM,CAAC,EAC3B,MAAM,CAAC,OACP,IAAI,CAAC,SAAS,QAAQ,OAAO,IAAI,GAAG,OAAO,KAAK,EAChD,IAAI,CAAC,UAAU,SAAS,OAAO,GAAG,GAAG,OAAO,MAAM,EAClD,MAAM,CAAC,KACP,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE,OAAO,IAAI,CAAC,CAAC,EAAE,OAAO,GAAG,CAAC,CAAC,CAAC;IAE9D,YAAY;IACZ,CAAA,GAAA,6CAAC,EAAE,GAAG,CAAC,gGAAgG,IAAI,CAAC,SAAU,IAAI;QACxH,aAAa;QACb,MAAM,IAAI,CAAA,GAAA,6CAAC,EACR,WAAW,GACX,MAAM,CAAC;YAAC;YAAG;SAAG,EACd,KAAK,CAAC;YAAC,OAAO,IAAI;YAAE,QAAQ,OAAO,KAAK;SAAC;QAC5C,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,aAAa,CAAC,aAAa,EAAE,OAAO,CAAC,CAAC,EAAE,IAAI,CAAC,CAAA,GAAA,6CAAC,EAAE,UAAU,CAAC;QAEhF,aAAa;QACb,MAAM,IAAI,CAAA,GAAA,6CAAC,EACR,WAAW,GACX,MAAM,CAAC;YAAC;YAAG;SAAG,EACd,KAAK,CAAC;YAAC,SAAS,OAAO,MAAM;YAAE,OAAO,GAAG;SAAC;QAC7C,IAAI,MAAM,CAAC,KAAK,IAAI,CAAC,CAAA,GAAA,6CAAC,EAAE,QAAQ,CAAC;QAEjC,0BAA0B;QAC1B,MAAM,QAAQ,CAAA,GAAA,6CAAC,EACZ,WAAW,GACX,MAAM,CAAC;YAAC;YAAG;SAAE,EAAE,2BAA2B;SAC1C,KAAK,CAAC;YAAC;YAAS;SAAU;QAE7B,2BAA2B;QAC3B,MAAM,cAAc,CAAA,GAAA,6CAAC,EAClB,cAAc,GACd,CAAC,CAAC,SAAU,CAAC;YACZ,OAAO,EAAE,EAAE,CAAC;QACd,GACC,CAAC,CAAC,SAAU,CAAC;YACZ,OAAO,EAAE,EAAE,CAAC;QACd,GACC,IAAI,CAAC;YAAC;YAAO;SAAO,EACpB,SAAS,CAAC,IAAI;QAEjB,kBAAkB;QAClB,IACG,MAAM,CAAC,KAAK,KACZ,SAAS,CAAC,QACV,IAAI,CAAC,aACL,KAAK,GACL,MAAM,CAAC,QACP,IAAI,CAAC,KAAK,CAAA,GAAA,6CAAC,EAAE,OAAO,IACpB,IAAI,CAAC,QAAQ,SAAU,CAAC;YACvB,OAAO,MAAM,EAAE,KAAK;QACtB;IACJ;AACF;AAEA,4BAAiB;aACf;AACF;;;APjEA,SAAS,kCAAY,SAAS,EAAE,MAAM;IACpC,MAAM,cAAc,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IACjE,MAAM,iBAAiB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,UAAU,CAAC;IACvE,MAAM,YAAY,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC;IAC7D,MAAM,kBAAkB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,WAAW,CAAC;IACzE,MAAM,YAAY,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC;IAC7D,MAAM,cAAc,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IAEjE,IAAI;IAEJ,IAAI,cAAc,eAAe;QAC/B,QAAQ;YAAC;YAAW;YAAiB;SAAU;QAE/C,CAAA,GAAA,+BAAI,EAAE,WAAW;QACjB,CAAA,GAAA,qCAAU,EAAE,WAAW;QACvB,CAAA,GAAA,+BAAI,EAAE,WAAW;IACnB,OAAO;QACL,QAAQ;YAAC;YAAa;YAAgB;SAAY;QAClD,CAAA,GAAA,iCAAM,EAAE;QACR,CAAA,GAAA,iCAAM,EAAE;QACR,CAAA,GAAA,iCAAM,EAAE;QACR,CAAA,GAAA,oCAAS,EAAE;IACb;IAEA,WAAW;QACT,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAChC,MAAO,KAAK,CAAC,EAAE,CAAC,UAAU,CAAC,MAAM,GAAG,EAClC,KAAK,CAAC,EAAE,CAAC,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC,UAAU;IAG9C,GAAG;AACL;AAEA,4BAAiB;iBACf;AACF;;;;;;AQtDA;;;;;;;;;;AASA;;;;;;;AAOA,SAAS,6CAAuB,MAAM,EAAE,UAAU,EAAE,SAAS,EAAE,KAAK;IAClE,IAAI,CAAC,QAAQ;QACX,MAAM,aAAa,cAAc,eAAe,mBAAmB;QACnE,IAAI,cAAc,WAAW,MAAM;QACnC,IAAI,cAAc,cAChB,SAAS;YAAC,WAAW,CAAC,EAAE;YAAE,WAAW,CAAC,YAAY,MAAM,GAAG,EAAE;SAAC;aAE9D,SAAS;YAAC,WAAW,CAAC,EAAE;YAAE,WAAW,SAAS;YAAE,WAAW,CAAC,YAAY,MAAM,GAAG,EAAE;SAAC;IAExF;IACA,IAAI,CAAC,YACH,aAAa,SAAS,cAAc,CAAC,CAAC,cAAc,CAAC,EAAE,KAAK;IAE9D,IAAI,aAAa,CAAC,OAAO;QACvB,IAAI,mBAAmB,SAAS,cAAc,CAAC,CAAC,sBAAsB,CAAC;QACvE,QAAQ,iBAAiB,KAAK;IAChC;IAEA,IAAI,UAAU,OAAO,YAAY,GAAG;IACpC,MAAM,mBAAmB;IACzB,MAAM,UAAU,UAAU,OAAO,IAAI;IAErC,IAAI,gBAAgB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,UAAU,CAAC;IACpE,cAAc,SAAS,GAAG;IAE1B,IAAI,UAAU;QAAC;QAAmB;QAAW;QAAU;QAAY;KAAmB;IACtF,IAAI,OAAO,EAAE;IAEb,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IAAK;QACtC,IAAI,UAAU,OAAO,MAAM,CAAC,EAAE,EAAE,GAAG;QACnC,IAAI,WAAW,gBAAa,SAAS;QACrC,IAAI,WAAW,GAAG,WAAW,WAAW;QAExC,IAAI,SAAS,CAAA,GAAA,oBAAY,EAAE,MAAM,CAAC,EAAE,EAAE;QACtC,IAAI,eAAe,CAAA,GAAA,YAAI,EAAE,QAAQ;QAEjC,IAAI,UAAU,WAAW,WAAW,SAAS,mBAAmB,aAAa;QAC7E,IAAI,WAAW,WAAW,WAAW,SAAS,mBAAmB,SAAS;QAE1E,IAAI,aAAa,SAAS,mBAAmB,gBAAgB;QAC7D,IAAI;QACJ,IAAI,cAAc,cAChB,SAAS,MAAM,IAAI,gBAAgB;aAEnC,SAAS,MAAM,IAAI,gBAAgB,MAAM,IAAI,iBAAiB;QAEhE,IAAI,SAAS;QAEb,IAAI,UAAU;YACZ,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,CAAC;YACxB,CAAC;qDAC8C,EAAE,MAAM,CAAC,EAAE,CAAC;qDACZ,EAAE,WAAW;YACtD,CAAC;YACP,CAAC,kEAAkE,EAAE,QAAQ,EAAE,EAAE,SAAS,OAAO,CAAC;YAClG,CAAC,iDAAiD,EAAE,CAAA,GAAA,YAAI,EAAE,UAAU,GAAG,SAAS,CAAC;YACjF,CAAC;kFAC2E,EAAE,WAAW,SAAS,EAAE,aAAa;;sGAEjB,EAAE,aAAa;;iEAEpD,EAAE,aAAa;;;YAGpE,CAAC;SACR;QACD,KAAK,IAAI,CAAC;IACZ;IAEA,oEAAoE;IACpE,IAAI,cAAc,cAAc;QAC9B,IAAI,UAAU,OAAO,MAAM,CAAC,EAAE,EAAE,GAAG;QACnC,IAAI,WAAW,OAAO,MAAM,CAAC,EAAE,EAAE,GAAG;QACpC,IAAI,WAAW,gBAAa,SAAS;QACrC,IAAI,WAAW,GAAG,WAAW,WAAW;QAExC,IAAI,SAAS,CAAA,GAAA,oBAAY,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE;QAC/C,IAAI,eAAe,CAAA,GAAA,YAAI,EAAE,QAAQ;QACjC,IAAI,aAAa,SAAS,mBAAmB,gBAAgB;QAE7D,IAAI,UAAU,WAAW,WAAW,SAAS,mBAAmB,aAAa;QAC7E,IAAI,WAAW,WAAW,WAAW,SAAS,mBAAmB,SAAS;QAC1E,IAAI,SAAS;QACb,IAAI,SAAS;QAEb,IAAI,UAAU;YACZ,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,CAAC;YACxB,CAAC;qDAC8C,EAAE,MAAM,CAAC,EAAE,CAAC;qDACZ,EAAE,MAAM,CAAC,EAAE,CAAC;YACrD,CAAC;YACP,CAAC,kEAAkE,EAAE,QAAQ,EAAE,EAAE,SAAS,OAAO,CAAC;YAClG,CAAC,iDAAiD,EAAE,CAAA,GAAA,YAAI,EAAE,UAAU,GAAG,SAAS,CAAC;YACjF,CAAC;kFAC2E,EAAE,WAAW,SAAS,EAAE,aAAa;;sGAEjB,EAAE,aAAa;;iEAEpD,EAAE,aAAa;;;YAGpE,CAAC;SACR;QACD,KAAK,IAAI,CAAC;IACZ;IACA,IAAI,cAAc,aAAa;QAC7B,IAAI,cAAc,OAAO,MAAM,CAAC,EAAE,EAAE,GAAG;QACvC,IAAI,cAAc,OAAO,MAAM,CAAC,EAAE,EAAE,GAAG;QACvC,IAAI,cAAc,OAAO,MAAM,CAAC,EAAE,EAAE,GAAG;QACvC,IAAI,YAAY,gBAAa,aAAa;QAC1C,IAAI,YAAY,gBAAa,aAAa;QAC1C,IAAI,YAAY,GAAG,YAAY,YAAY;QAC3C,IAAI,YAAY,GAAG,YAAY,YAAY;QAE3C,IAAI,UAAU,CAAA,GAAA,oBAAY,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE;QAChD,IAAI,UAAU,CAAA,GAAA,oBAAY,EAAE,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE;QAChD,IAAI,gBAAgB,CAAA,GAAA,YAAI,EAAE,SAAS;QACnC,IAAI,gBAAgB,CAAA,GAAA,YAAI,EAAE,SAAS;QACnC,IAAI,cAAc,UAAU,mBAAmB,gBAAgB;QAC/D,IAAI,cAAc,UAAU,mBAAmB,gBAAgB;QAE/D,IAAI,WAAW,YAAY,WAAW,UAAU,mBAAmB,aAAa;QAChF,IAAI,WAAW,YAAY,WAAW,UAAU,mBAAmB,aAAa;QAChF,IAAI,YAAY,YAAY,WAAW,UAAU,mBAAmB,SAAS;QAC7E,IAAI,YAAY,YAAY,WAAW,UAAU,mBAAmB,SAAS;QAC7E,IAAI,SAAS;QACb,IAAI,SAAS;QACb,IAAI,SAAS;QAEb,IAAI,WAAW;YACb,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,CAAC;YACxB,CAAC;qDAC8C,EAAE,MAAM,CAAC,EAAE,CAAC;qDACZ,EAAE,MAAM,CAAC,EAAE,CAAC;YACrD,CAAC;YACP,CAAC,kEAAkE,EAAE,SAAS,EAAE,EAAE,UAAU,OAAO,CAAC;YACpG,CAAC,iDAAiD,EAAE,CAAA,GAAA,YAAI,EAAE,WAAW,GAAG,SAAS,CAAC;YAClF,CAAC;kFAC2E,EAAE,YAAY,SAAS,EAAE,cAAc;;sGAEnB,EAAE,cAAc;;iEAErD,EAAE,cAAc;;;YAGrE,CAAC;SACR;QACD,IAAI,WAAW;YACb,CAAC,EAAE,OAAO,IAAI,EAAE,OAAO,CAAC;YACxB,CAAC;qDAC8C,EAAE,MAAM,CAAC,EAAE,CAAC;qDACZ,EAAE,MAAM,CAAC,EAAE,CAAC;YACrD,CAAC;YACP,CAAC,kEAAkE,EAAE,SAAS,EAAE,EAAE,UAAU,OAAO,CAAC;YACpG,CAAC,iDAAiD,EAAE,CAAA,GAAA,YAAI,EAAE,WAAW,GAAG,SAAS,CAAC;YAClF,CAAC;kFAC2E,EAAE,YAAY,SAAS,EAAE,cAAc;;sGAEnB,EAAE,cAAc;;iEAErD,EAAE,cAAc;;;YAGrE,CAAC;SACR;QACD,KAAK,IAAI,CAAC;QACV,KAAK,IAAI,CAAC;IACZ;IAEA,CAAA,GAAA,kBAAU,EAAE,SAAS,MAAM,CAAC,EAAE,UAAU,UAAU,CAAC;AACrD;AAEA,4BAAiB;4BACf;AACF;;;;;;;6CV3KM;AAEN,SAAS,4CAAsB,CAAC,EAAE,SAAS,IAAI,CAAC,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,aAAa;IACjF,IAAI,eAAe,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IAChE,IAAI,mBAAmB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,WAAW,CAAC;IACxE,IAAI;IACJ,IAAI,cAAc,cAAc,eAAe;IAC/C,IAAI,cAAc,aAAa,eAAe;IAC9C,IAAI,cAAc,cAAc,eAAe,aAAa,SAAS,GAAG,kBAAkB,UAAU,aAAa,SAAS,GAAG,kBAAkB,QAAQ,aAAa,OAAO,GAAG,aAAa,SAAS;IACpM,IAAI,SAAS,OAAO,OAAO,CAAC,gBAAgB,IAAI,OAAO,CAAC,qBAAqB,IAAI,OAAO,CAAC,mBAAmB;IAE5G,IAAI,eAAe,cAAc,WAAW,cAAc,eAAe,eAAe,CAAC,CAAC,EAAE,cAAc,SAAS,CAAC;IAEpH,IAAI,SAAS,OAAO,MAAM,CAAC;IAE3B,IAAI,OAAO,SAAS,cAAc,CAAC;IACnC,IAAI,MAAM,SAAS,aAAa,CAAC;IAEjC,IAAI,SAAS,CAAA,GAAA,eAAO;IACpB,IAAI,kBAAkB,UACpB,IAAI,SAAS,GAAG,CAAC,kBAAkB,EAAE,UAAU,UAAU,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC;SAEvF,IAAI,SAAS,GAAG,CAAC,kBAAkB,EAAE,UAAU,CAAC;IAElD,IAAI,EAAE,GAAG,SAAS;IAClB,IAAI,KAAK,SAAS,aAAa,CAAC;IAChC,GAAG,IAAI,GAAG;IACV,GAAG,KAAK,GAAG;IAEX,GAAG,gBAAgB,CACjB,SACA,CAAA,GAAA,eAAO,EAAE,CAAC;QACR,sFAAsF;QACtF,IAAI,EAAE,MAAM,CAAC,KAAK;QAElB,IAAI,cAAc,cAAc;YAC9B,4CAA4C;YAC5C,YAAY,MAAM,CAAC,OAAO,GAAG;YAC7B,aAAa,SAAS,GAAG;QAC3B;QACA,IAAI,cAAc,aAAa;YAC7B,IAAI,kBAAkB,SAAS;gBAC7B,4CAA4C;gBAC5C,YAAY,MAAM,CAAC,OAAO,GAAG;gBAC7B,aAAa,SAAS,GAAG;YAC3B;YACA,IAAI,kBAAkB,OAAO;gBAC3B,0CAA0C;gBAC1C,YAAY,MAAM,CAAC,OAAO,GAAG;gBAC7B,aAAa,OAAO,GAAG;YACzB;YACA,IAAI,kBAAkB,UACpB,aAAa,SAAS,GAAG;QAE7B;QAEA,CAAA,GAAA,kBAAU,EAAE,cAAc,QAAQ;QAClC,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;QACxC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;QAClC,IAAI,cAAc,gBAAgB,cAAc,aAC9C,CAAA,GAAA,gDAAqB,EAAE,MAAM,MAAM;IAEvC,GAAG;IAGL,GAAG,gBAAgB,CACjB,SACA,CAAA,GAAA,eAAO,EAAE;QACP,CAAA,GAAA,qCAAU,EAAE;QACZ,CAAA,GAAA,oBAAY,EAAE,CAAC,EAAE,UAAU,YAAY,CAAC,EAAE;YAAC;SAAa,EAAE,iBAAiB,KAAK,EAAE;IACpF,GAAG;IAGL,GAAG,SAAS,GAAG;IACf,GAAG,EAAE,GAAG,SAAS;IACjB,GAAG,KAAK,CAAC,eAAe,GAAG;IAC3B,IAAI,WAAW,CAAC;IAEhB,IAAI;IACJ,IAAI,cAAc,cAAc,kBAAkB,YAAY,MAAM,GAAG,IAAI,KAAK;SAC3E,kBAAkB,YAAY,MAAM,GAAG,IAAI,KAAK;IAErD,IAAI,kBAAkB,UAAU;QAC9B,IAAI,SAAS,SAAS,aAAa,CAAC;QACpC,OAAO,SAAS,GACd,cAAc,cAAc,CAAC,kEAAkE,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC,EAAE,gBAAgB,CAAC,GAAG,CAAC,kEAAkE,EAAE,UAAU,CAAC,EAAE,gBAAgB,CAAC;QACxP,OAAO,SAAS,GAAG,CAAC;;;UAGd,CAAC;QAEP,OAAO,gBAAgB,CAAC,SAAS,SAAU,CAAC;YAC1C,IAAI,eAAe,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;YAChE,IAAI,UAAU,aAAa,KAAK;YAChC,qDAA+B,QAAQ,WAAW,OAAO;YACzD,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;YACxC,CAAA,GAAA,uCAAY,EAAE,SAAS;QACzB;QACA,IAAI,WAAW,CAAC;IAClB;IAEA,KAAK,WAAW,CAAC;AACnB;AAEA,SAAS,qDAA+B,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,aAAa;IACzE,IAAI,gBAAgB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,cAAc,CAAC;IACxE,IAAI,SAAS,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IAE1D,IAAI,WAAW,GAAG,OAAO,CAAC,gBAAgB;IAE1C,IAAI,cAAc;IAClB,IAAI,cAAc,cAAc;QAC9B,eAAe;QACf,YAAY,aAAa,SAAS;IACpC;IACA,IAAI,cAAc,aAAa;QAC7B,eAAe;QACf,YAAY,kBAAkB,UAAU,aAAa,SAAS,GAAG,aAAa,OAAO;IACvF;IAEA,UAAU,MAAM,CAAC,OAAO;IACxB,oCAAoC;IACpC,IAAI,cAAc,cAChB,aAAa,SAAS,GAAG;IAE3B,IAAI,cAAc,aAAa;QAC7B,IAAI,kBAAkB,SAAS,aAAa,SAAS,GAAG;QACxD,IAAI,kBAAkB,OAAO,aAAa,OAAO,GAAG;IACtD;IAEA,IAAI,cAAc,cAChB,CAAA,GAAA,4BAAoB,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC;SAE7C,IAAI,kBAAkB,SAAS;QAC7B,gCAAgC;QAChC,IAAI,aAAa,SAAS,cAAc,CAAC;QACzC,CAAA,GAAA,4BAAoB,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC,EAAE;IACjD,OAAO;QACL,gCAAgC;QAChC,IAAI,aAAa,SAAS,cAAc,CAAC;QACzC,CAAA,GAAA,4BAAoB,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC,EAAE;IACjD;IAGF,qDAAqD;IACrD,sDAAsD;IACtD,wDAAwD;IACxD,2CAA2C;IAC3C,IAAI,UAAU,MAAM,GAAG,GAAG;QACxB,OAAO,OAAO,GAAG;QACjB,aAAa,MAAM,GAAG;IACxB;IAEA,IAAI,cAAc,cAChB,aAAa,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK;QACnC,4CAAsB,KAAK,IAAI,WAAW,GAAG;IAC/C;SAEA,IAAI,kBAAkB,SACpB,aAAa,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK;QACnC,4CAAsB,KAAK,IAAI,WAAW,GAAG;IAC/C;SAEA,aAAa,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK;QACjC,4CAAsB,KAAK,IAAI,WAAW,GAAG;IAC/C;IAGJ,kBAAkB;IAClB,CAAA,GAAA,kBAAU,EAAE,cAAc,UAAU;IAEpC,IAAI,aAAa;IACjB,IAAI,cAAc,aAAa;QAC7B,cAAc,CAAC,eAAe,EAAE,UAAU,CAAC,EAAE,cAAc,CAAC;QAC5D,UAAU,SAAS,sBAAsB,CAAC;IAC5C,OAAO;QACL,cAAc,CAAC,eAAe,EAAE,UAAU,CAAC;QAC3C,UAAU,SAAS,sBAAsB,CAAC;IAC5C;IACA,IAAI,UAAU,MAAM,IAAI,GACtB,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;QACvC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC;QAC5B,OAAO,CAAC,EAAE,CAAC,QAAQ,GAAG;IACxB;SAEA,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;QACvC,OAAO,CAAC,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC;QACzB,OAAO,CAAC,EAAE,CAAC,QAAQ,GAAG;IACxB;IAGF,IAAI,UAAU,MAAM,IAAI,GAAG;QACzB,OAAO,QAAQ,GAAG;QAClB,cAAc,SAAS,CAAC,MAAM,CAAC;IACjC,OAAO;QACL,OAAO,QAAQ,GAAG;QAClB,cAAc,SAAS,CAAC,GAAG,CAAC;IAC9B;AACF;AAEA,SAAS,uCAAiB,SAAS,EAAE,CAAC,EAAE,QAAQ;IAC9C,IAAI,gBAAgB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,cAAc,CAAC;IACxE,IAAI,SAAS,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IAC1D,IAAI,SAAS,EAAE,MAAM,CAAC,EAAE;IACxB,IAAI,WAAW,OAAO,OAAO,CAAC,gBAAgB;IAE9C,IAAI,eAAe,cAAc,eAAe,mBAAmB,iBAAiB,+CAA+C;IACnI,IAAI,cAAc,cAAc,eAAe,aAAa,SAAS,GAAG,aAAa,UAAU,aAAa,SAAS,GAAG,aAAa,OAAO;IAE5I,IAAI,YAAY,YAAY,MAAM;IAClC,IAAI,CAAC,WAAW,YAAY;IAC5B,IAAI,YAAY,YAAY,IAAI,OAAO,WAAW,CAAC,YAAY,EAAE,EAAE,KAAK,KAAK,OAAO,WAAW,CAAC,EAAE,EAAE,KAAK;IACzG,IAAI,qBAAqB,SAAS,CAAC,EAAE;IACrC,IAAI,aAAa,AAAC,CAAA,MAAM,kBAAiB,IAAK,IAAI;IAClD,IAAI,cAAc,qBAAqB;IAEvC,IAAI,IAAI,sBAAsB,KAAK,OAAO,KAAK,CAAC,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE,EAAE,eAAe,OAAO,KAAK,CAAC,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,EAAE,EAAE;IACpI,IAAI,EAAE,GAAG;IACT,YAAY,IAAI,CAAC;IAEjB,mDAAmD;IACnD,IAAI,cAAc,cAAc;QAC9B,aAAa,SAAS,GAAG;QAEzB,CAAA,GAAA,4BAAoB,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC;IAC/C,OACE,IAAI,aAAa,SAAS;QACxB,aAAa,SAAS,GAAG;QACzB,gCAAgC;QAChC,IAAI,aAAa,SAAS,cAAc,CAAC;QACzC,CAAA,GAAA,4BAAoB,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC,EAAE;IACjD,OAAO;QACL,aAAa,OAAO,GAAG;QACvB,gCAAgC;QAChC,IAAI,aAAa,SAAS,cAAc,CAAC;QACzC,CAAA,GAAA,4BAAoB,EAAE,CAAC,SAAS,EAAE,UAAU,CAAC,EAAE;IACjD;IAGF,IAAI,cAAc,cAChB,aAAa,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK;QACnC,4CAAsB,KAAK,QAAQ,WAAW,GAAG;IACnD;SAEA,IAAI,aAAa,SACf,aAAa,SAAS,CAAC,OAAO,CAAC,CAAC,KAAK;QACnC,4CAAsB,KAAK,QAAQ,WAAW,GAAG;IACnD;SAEA,aAAa,OAAO,CAAC,OAAO,CAAC,CAAC,KAAK;QACjC,4CAAsB,KAAK,QAAQ,WAAW,GAAG;IACnD;IAIJ,kBAAkB;IAClB,CAAA,GAAA,kBAAU,EAAE,cAAc,UAAU;IAEpC,IAAI,YAAY,MAAM,IAAI,GAAG;QAC3B,OAAO,QAAQ,GAAG;QAClB,cAAc,SAAS,CAAC,MAAM,CAAC;IACjC,OAAO;QACL,OAAO,QAAQ,GAAG;QAClB,cAAc,SAAS,CAAC,GAAG,CAAC;IAC9B;AACF;AAEA,SAAS,qCAAe,CAAC;IACvB,IAAI,WAAW,EAAE,MAAM,CAAC,EAAE;IAC1B,IAAI,WAAW,SAAS,OAAO,CAAC,mBAAmB;IACnD,IAAI,cAAc,SAAS,OAAO,CAAC,mBAAmB;IACtD,SAAS,cAAc,CAAC,aAAa,SAAS,GAAG;IAEjD,IAAI,QAAQ,kBAAkB;IAC9B,OAAO,WAAW,GAAG;QAAC,OAAO,MAAM,IAAI;QAAE,WAAW;YAAC;SAAU;IAAA;IAE/D,CAAA,GAAA,kBAAU;AACZ;AAEA,OAAO,cAAc,GAAG;AAExB,4BAAiB;sBACf;2BACA;oBACA;AACF;;ADvSA;;;;;;;;;;;;;;;;;;;;;AAiBA,SAAS,0CAAoB,YAAY,WAAW;IAClD;;;GAGC,GACD,IAAI,qBAAqB;IACzB,CAAA,GAAA,sBAAc,EAAE,SAAS,GAAG;IAC5B,CAAA,GAAA,sBAAc,EAAE,mBAAmB,GAAG;IAEtC,IAAI;IACJ,MAAM,KAAK,OAAO,UAAU,CAAC;IAC7B,IAAI,GAAG,OAAO,EAAE;QACd,WAAW;QACX,yBAAyB;QACzB,SAAS,cAAc,CAAC,mBAAmB,SAAS,CAAC,GAAG,CAAC;IAC3D,OAAO;QACL,YAAY;QACZ,yBAAyB;QACzB,SAAS,cAAc,CAAC,mBAAmB,SAAS,CAAC,GAAG,CAAC;IAC3D;IAEA,IAAI,mBAAmB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,iBAAiB,CAAC;IAC9E,IAAI,mBAAmB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,WAAW,CAAC;IACxE,IAAI,oBAAoB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC;IACnE,IAAI,gBAAgB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,cAAc,CAAC;IACxE,IAAI,SAAS,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IAC1D,IAAI,eAAe,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IAChE,IAAI,eAAe,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IAChE,IAAI,cAAc,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,iBAAiB,CAAC;IACzE,IAAI,aAAa,CAAC,EAAE,UAAU,YAAY,CAAC;IAE3C,IAAI,UAAU,aAAa,KAAK;IAEhC,MAAM,aAAa,CAAA,GAAA,sBAAc;IACjC,MAAM,YAAY,WAAW,SAAS;IAEtC,kEAAkE;IAClE,IAAI,WAAW,MAAM,KAAK,MAAM,OAAO,OAAO,GAAG;IAEjD,kBAAkB,KAAK,GAAG,WAAW,UAAU;IAE/C,IAAI,aAAa,CAAC,EAAE,UAAU,SAAS,CAAC;IACxC,IAAI,WAAW,CAAC,EAAE,UAAU,YAAY,CAAC;IACzC,IAAI,gBAAgB,CAAC,EAAE,UAAU,iBAAiB,CAAC;IACnD,IAAI,cAAc,CAAC,EAAE,UAAU,eAAe,CAAC;IAE/C,MAAM,eAAe,QAAQ,OAAO,CAAC,WAAW,SAAS;IACzD,MAAM,eAAe,QAAQ,OAAO,CAAC,WAAW,SAAS;IACzD,MAAM,aAAa,QAAQ,OAAO,CAAC,WAAW,OAAO;IACrD,QAAQ,GAAG,CAAC;QAAC;QAAc;QAAc;KAAW,EAAE,IAAI,CAAC,CAAC;QAC1D,MAAM,SAAS,aAAa,CAAC,EAAE;QAC/B,MAAM,SAAS,aAAa,CAAC,EAAE;QAC/B,MAAM,OAAO,aAAa,CAAC,EAAE;QAE7B,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IACjC,CAAA,GAAA,+CAAoB,EAAE,MAAM,CAAC,EAAE,EAAE,UAAU,WAAW,GAAG;QAE3D,CAAA,GAAA,+CAAoB,EAAE,QAAQ,UAAU,WAAW,GAAG;QACtD,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,MAAM,EAAE,IAC/B,CAAA,GAAA,+CAAoB,EAAE,IAAI,CAAC,EAAE,EAAE,UAAU,WAAW,GAAG;IAE3D;IAEA,IAAI,SAAS,WAAW,MAAM;IAE9B,CAAA,GAAA,gBAAQ,EAAE,QAAQ,YAAY;IAC9B,CAAA,GAAA,yBAAiB,EAAE,WAAW,YAAY;IAE1C,CAAA,GAAA,4BAAoB,EAAE,QAAQ,CAAC,EAAE,UAAU,QAAQ,CAAC;IACpD,CAAA,GAAA,uCAA+B,EAAE;QAAC,WAAW,UAAU,CAAC,cAAc;QAAE,WAAW,QAAQ,CAAC,MAAM;KAAC,EAAE,iBAAiB,KAAK,EAAE;IAC7H,CAAA,GAAA,oBAAY,EAAE,YAAY;QAAC;KAAW,EAAE,iBAAiB,KAAK,EAAE;IAEhE,CAAA,GAAA,uCAAY,EAAE,SAAS;IACvB,CAAA,GAAA,qCAAU,EAAE;IAEZ,CAAA,GAAA,uBAAe,EAAE,iBAAiB,KAAK,EAAE,IAAI;IAC7C,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;IAExC,IAAI,UAAU,SAAS,cAAc,CAAC,CAAC,cAAc,CAAC;IACtD,QAAQ,KAAK,GAAG;IAEhB,MAAM,SAAS,MAAM,CAAC,EAAE;IACxB,MAAM,SAAS,MAAM,CAAC,OAAO,MAAM,GAAG,EAAE;IACxC,MAAM,SAAS,WAAW,SAAS;IACnC,CAAA,GAAA,gDAAqB,EAAE;QAAC;QAAQ;QAAQ;KAAO,EAAE,wBAAwB,WAAW;IAEpF,QAAQ,gBAAgB,CAAC,SAAS,CAAC;QACjC,2BAA2B;QAC3B,IAAI,QAAQ,EAAE,MAAM,CAAC,KAAK;QAC1B,IAAI,UAAU,SAAS,cAAc,CAAC,CAAC,KAAK,EAAE,UAAU,CAAC;QACzD,QAAQ,KAAK,CAAC,eAAe,GAAG;QAChC,kCAAkC;QAClC,IAAI,YAAY,OAAO,OAAO,GAAG,EAAE,CAAC,EAAE;QACtC,IAAI,YAAY,IAAI;YAClB,QAAQ,SAAS,CAAC,MAAM,CAAC;YACzB,QAAQ,SAAS,CAAC,GAAG,CAAC;QACxB,OAAO;YACL,QAAQ,SAAS,CAAC,MAAM,CAAC;YACzB,QAAQ,SAAS,CAAC,GAAG,CAAC;QACxB;QACA,IAAI,QAAQ,SAAS,cAAc,CAAC,CAAC,sBAAsB,CAAC,EAAE,KAAK;QAEnE,CAAA,GAAA,gDAAqB,EAAE;YAAC;YAAQ;YAAQ;SAAO,EAAE,OAAO,WAAW;IACrE;IAEA,MAAM,mBAAmB,SAAS,cAAc,CAAC,CAAC,sBAAsB,CAAC;IACzE,iBAAiB,gBAAgB,CAAC,UAAU,CAAC;QAC3C,IAAI,QAAQ,EAAE,MAAM,CAAC,KAAK;QAC1B,CAAA,GAAA,gDAAqB,EAAE,MAAM,MAAM,WAAW;IAChD;IAEA,kBAAkB,gBAAgB,CAAC,UAAU,CAAC;QAC5C,IAAI,aAAa,EAAE,MAAM,CAAC,KAAK;QAC/B,WAAW,UAAU,GAAG;QAExB,CAAA,GAAA,kBAAU,EAAE,YAAY,WAAW;QACnC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;QAClC,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;QACxC,CAAA,GAAA,uCAA+B,EAAE;YAAC,WAAW,UAAU,CAAC,cAAc;YAAE,WAAW,QAAQ,CAAC,MAAM;SAAC,EAAE,iBAAiB,KAAK,EAAE;QAC7H,CAAA,GAAA,qCAAU,EAAE;QACZ,CAAA,GAAA,oBAAY,EAAE,YAAY;YAAC;SAAW,EAAE,iBAAiB,KAAK,EAAE;IAClE;IAEA,OAAO,gBAAgB,CAAC,UAAU,CAAC;QACjC,WAAW,MAAM,GAAG,EAAE,MAAM,CAAC,OAAO;QACpC,SAAS,WAAW,MAAM;QAE1B,CAAA,GAAA,kBAAU,EAAE,YAAY,WAAW;QACnC,CAAA,GAAA,uCAA+B,EAAE;YAAC,WAAW,UAAU,CAAC,cAAc;YAAE,WAAW,QAAQ,CAAC,MAAM;SAAC,EAAE,iBAAiB,KAAK,EAAE;QAC7H,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;QACxC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;QAClC,CAAA,GAAA,qCAAU,EAAE;QACZ,CAAA,GAAA,oBAAY,EAAE,YAAY;YAAC;SAAW,EAAE,iBAAiB,KAAK,EAAE;IAClE;IAEA,iBAAiB,gBAAgB,CAAC,SAAS,CAAC;QAC1C,MAAM,mBAAmB,WAAW,QAAQ;QAC5C,MAAM,QAAQ;QACd,WAAW,QAAQ,GAAG,OAAO;QAE7B,IAAI,YAAY,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC,EAAE,KAAK;QAClE,IAAI,WAAW,CAAC,EAAE,UAAU,CAAC,EAAE,UAAU,CAAC;QAE1C,MAAM,iBAAiB,WAAW,MAAM;QACxC,WAAW;YACT,CAAA,GAAA,0BAAkB,EAAE,gBAAgB,WAAW,UAAU,EAAE;YAC3D,WAAW,QAAQ,GAAG;QACxB,GAAG;IACL;IAEA,iBAAiB,gBAAgB,CAAC,UAAU,CAAC;QAC3C,CAAA,GAAA,uCAA+B,EAAE;YAAC,WAAW,UAAU,CAAC,cAAc;YAAE,WAAW,QAAQ,CAAC,MAAM;SAAC,EAAE,iBAAiB,KAAK,EAAE;QAC7H,IAAI,YAAY,EAAE,MAAM,CAAC,KAAK,KAAK,QAAQ,MAAM,EAAE,MAAM,CAAC,KAAK,KAAK,UAAU,KAAK;QAEnF,CAAA,GAAA,uBAAe,EAAE,EAAE,MAAM,CAAC,KAAK,EAAE,WAAW,MAAM,MAAM;QACxD,CAAA,GAAA,oBAAY,EAAE,YAAY;YAAC;SAAW,EAAE,EAAE,MAAM,CAAC,KAAK,EAAE;IAC1D;IAEA,MAAM,iBAAiB,QAAQ,OAAO,CAAC,SAAS,cAAc,CAAC;IAC/D,MAAM,eAAe,QAAQ,OAAO,CAAC,SAAS,cAAc,CAAC;IAC7D,QAAQ,GAAG,CAAC;QAAC;QAAgB;KAAa,EAAE,IAAI,CAAC;QAC/C,SAAS,cAAc,CAAC,eAAe,gBAAgB,CAAC,SAAS,CAAC;YAChE,CAAA,GAAA,0CAAe,EAAE,WAAW,GAAG;YAC/B,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;YACxC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;YAClC,CAAA,GAAA,qCAAU,EAAE;YACZ,CAAA,GAAA,oBAAY,EAAE,YAAY;gBAAC;aAAW,EAAE,iBAAiB,KAAK,EAAE;QAClE;QACA,SAAS,cAAc,CAAC,aAAa,gBAAgB,CAAC,SAAS,CAAC;YAC9D,CAAA,GAAA,0CAAe,EAAE,WAAW,GAAG;YAC/B,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;YACxC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;YAClC,CAAA,GAAA,qCAAU,EAAE;YACZ,CAAA,GAAA,oBAAY,EAAE,YAAY;gBAAC;aAAW,EAAE,iBAAiB,KAAK,EAAE;QAClE;IACF;IAEA,aAAa,gBAAgB,CAAC,SAAS,CAAC;QACtC,CAAA,GAAA,uCAAY,EAAE,EAAE,MAAM,CAAC,KAAK,EAAE;IAChC;IACA,aAAa,gBAAgB,CAAC,SAAS;QACrC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;IACpC;IACA,YAAY,gBAAgB,CAAC,UAAU;QACrC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;IACpC;AACF;AAEA,4BAAiB;yBACf;AACF;;;;AYxNA;;;;;;;;;AASA;;;;;;;;;;;;;;;;;;;;;;AAgBA,SAAS,2CAAqB,YAAY,YAAY;IACpD,IAAI;IACJ,MAAM,KAAK,OAAO,UAAU,CAAC;IAC7B,IAAI,GAAG,OAAO,EAAE;QACd,WAAW;QACX,yBAAyB;QACzB,SAAS,cAAc,CAAC,mBAAmB,SAAS,CAAC,GAAG,CAAC;IAC3D,OAAO;QACL,YAAY;QACZ,yBAAyB;QACzB,SAAS,cAAc,CAAC,mBAAmB,SAAS,CAAC,GAAG,CAAC;IAC3D;IAEA,IAAI,mBAAmB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,iBAAiB,CAAC;IAC9E,IAAI,mBAAmB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,WAAW,CAAC;IACxE,IAAI,oBAAoB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC;IACnE,IAAI,gBAAgB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,cAAc,CAAC;IACxE,IAAI,SAAS,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IAC1D,IAAI,eAAe,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IAChE,IAAI,eAAe,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,OAAO,CAAC;IAChE,IAAI,cAAc,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,iBAAiB,CAAC;IACzE,IAAI,aAAa,CAAC,EAAE,UAAU,YAAY,CAAC;IAE3C,IAAI,UAAU,aAAa,KAAK;IAEhC,MAAM,aAAa,cAAc,eAAe,CAAA,GAAA,uBAAe,IAAI,CAAA,GAAA,sBAAc;IACjF,MAAM,YAAY,WAAW,SAAS;IAEtC,kEAAkE;IAClE,IAAI,WAAW,MAAM,KAAK,MAAM,OAAO,OAAO,GAAG;IAEjD,IAAI,UAAU,MAAM,IAAI,GAAG;QACzB,OAAO,QAAQ,GAAG;QAClB,cAAc,SAAS,CAAC,MAAM,CAAC;IACjC,OAAO;QACL,OAAO,QAAQ,GAAG;QAClB,cAAc,SAAS,CAAC,GAAG,CAAC;IAC9B;IACA,kBAAkB,KAAK,GAAG,WAAW,UAAU;IAE/C,IAAI,aAAa,CAAC,EAAE,UAAU,SAAS,CAAC;IACxC,IAAI,WAAW,CAAC,EAAE,UAAU,YAAY,CAAC;IAEzC,MAAM,eAAe,QAAQ,OAAO,CAAC;IACrC,aAAa,IAAI,CAAC,CAAC;QACjB,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IACjC,CAAA,GAAA,+CAAoB,EAAE,MAAM,CAAC,EAAE,EAAE,UAAU,WAAW;IAE1D;IAEA,IAAI,SAAS,WAAW,MAAM;IAE9B,CAAA,GAAA,gBAAQ,EAAE,QAAQ,YAAY;IAC9B,CAAA,GAAA,yBAAiB,EAAE,WAAW,YAAY;IAE1C,CAAA,GAAA,4BAAoB,EAAE,QAAQ,CAAC,EAAE,UAAU,QAAQ,CAAC;IACpD,CAAA,GAAA,gCAAwB,EAAE,QAAQ,SAAS;IAC3C,CAAA,GAAA,oBAAY,EAAE,YAAY;QAAC;KAAW,EAAE,iBAAiB,KAAK,EAAE;IAEhE,CAAA,GAAA,uCAAY,EAAE,SAAS;IACvB,CAAA,GAAA,qCAAU,EAAE;IAEZ,CAAA,GAAA,uBAAe,EAAE,iBAAiB,KAAK,EAAE,IAAI;IAC7C,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;IAExC,IAAI,UAAU,SAAS,cAAc,CAAC,CAAC,cAAc,CAAC;IACtD,QAAQ,KAAK,GAAG;IAEhB,MAAM,SAAS,MAAM,CAAC,EAAE;IACxB,MAAM,SAAS,MAAM,CAAC,OAAO,MAAM,GAAG,EAAE;IACxC,CAAA,GAAA,gDAAqB,EAAE;QAAC;QAAQ;KAAO,EAAE,wBAAwB,WAAW;IAE5E,QAAQ,gBAAgB,CAAC,SAAS,CAAC;QACjC,2BAA2B;QAC3B,IAAI,QAAQ,EAAE,MAAM,CAAC,KAAK;QAC1B,IAAI,UAAU,SAAS,cAAc,CAAC,CAAC,KAAK,EAAE,UAAU,CAAC;QACzD,QAAQ,KAAK,CAAC,eAAe,GAAG;QAChC,kCAAkC;QAClC,IAAI,YAAY,OAAO,OAAO,GAAG,EAAE,CAAC,EAAE;QACtC,IAAI,YAAY,IAAI;YAClB,QAAQ,SAAS,CAAC,MAAM,CAAC;YACzB,QAAQ,SAAS,CAAC,GAAG,CAAC;QACxB,OAAO;YACL,QAAQ,SAAS,CAAC,MAAM,CAAC;YACzB,QAAQ,SAAS,CAAC,GAAG,CAAC;QACxB;QACA,IAAI,QAAQ,SAAS,cAAc,CAAC,CAAC,sBAAsB,CAAC,EAAE,KAAK;QAEnE,CAAA,GAAA,gDAAqB,EAAE;YAAC;YAAQ;SAAO,EAAE,OAAO,WAAW;IAC7D;IAEA,MAAM,mBAAmB,SAAS,cAAc,CAAC,CAAC,sBAAsB,CAAC;IACzE,iBAAiB,gBAAgB,CAAC,UAAU,CAAC;QAC3C,IAAI,QAAQ,EAAE,MAAM,CAAC,KAAK;QAC1B,CAAA,GAAA,gDAAqB,EAAE,MAAM,MAAM,WAAW;IAChD;IAEA,kBAAkB,gBAAgB,CAAC,UAAU,CAAC;QAC5C,IAAI,aAAa,EAAE,MAAM,CAAC,KAAK;QAC/B,WAAW,UAAU,GAAG;QAExB,CAAA,GAAA,kBAAU,EAAE,YAAY,WAAW;QACnC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;QAClC,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;QACxC,CAAA,GAAA,qCAAU,EAAE;QACZ,CAAA,GAAA,oBAAY,EAAE,YAAY;YAAC;SAAW,EAAE,iBAAiB,KAAK,EAAE;IAClE;IAEA,OAAO,gBAAgB,CAAC,UAAU,CAAC;QACjC,WAAW,MAAM,GAAG,EAAE,MAAM,CAAC,OAAO;QACpC,SAAS,WAAW,MAAM;QAE1B,CAAA,GAAA,kBAAU,EAAE,YAAY,WAAW;QACnC,CAAA,GAAA,gCAAwB,EAAE,QAAQ,iBAAiB,KAAK,EAAE;QAC1D,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;QACxC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;QAClC,CAAA,GAAA,qCAAU,EAAE;QACZ,CAAA,GAAA,oBAAY,EAAE,YAAY;YAAC;SAAW,EAAE,iBAAiB,KAAK,EAAE;IAClE;IAEA,iBAAiB,gBAAgB,CAAC,SAAS,CAAC;QAC1C,MAAM,QAAQ;QACd,WAAW,QAAQ,GAAG,OAAO;QAE7B,MAAM,iBAAiB,WAAW,MAAM;QACxC,IAAI,YAAY,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC,EAAE,KAAK;QAClE,IAAI,WAAW,CAAC,EAAE,UAAU,CAAC,EAAE,UAAU,CAAC;QAE1C,WAAW;YACT,CAAA,GAAA,0BAAkB,EAAE,gBAAgB,WAAW,UAAU,EAAE;YAC3D,WAAW,QAAQ,GAAG;QACxB,GAAG;IACL;IAEA,iBAAiB,gBAAgB,CAAC,UAAU,CAAC;QAC3C,CAAA,GAAA,gCAAwB,EAAE,QAAQ,EAAE,MAAM,CAAC,KAAK,EAAE;QAClD,IAAI,YAAY,EAAE,MAAM,CAAC,KAAK,KAAK,QAAQ,MAAM,EAAE,MAAM,CAAC,KAAK,KAAK,UAAU,KAAK;QAEnF,CAAA,GAAA,uBAAe,EAAE,EAAE,MAAM,CAAC,KAAK,EAAE,WAAW,MAAM,MAAM;QACxD,CAAA,GAAA,oBAAY,EAAE,YAAY;YAAC;SAAW,EAAE,EAAE,MAAM,CAAC,KAAK,EAAE;IAC1D;IAEA,MAAM,YAAY,QAAQ,OAAO,CAAC,SAAS,cAAc,CAAC;IAC1D,UAAU,IAAI,CAAC,CAAC;QACd,MAAM,gBAAgB,CAAC,SAAS,CAAC;YAC/B,CAAA,GAAA,0CAAe,EAAE,WAAW;YAC5B,CAAA,GAAA,sBAAc,EAAE,iBAAiB,KAAK,EAAE;YACxC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;YAClC,CAAA,GAAA,qCAAU,EAAE;YACZ,CAAA,GAAA,oBAAY,EAAE,YAAY;gBAAC;aAAW,EAAE,iBAAiB,KAAK,EAAE;QAClE;IACF;IAEA,aAAa,gBAAgB,CAAC,SAAS,CAAC;QACtC,CAAA,GAAA,uCAAY,EAAE,EAAE,MAAM,CAAC,KAAK,EAAE;IAChC;IACA,aAAa,gBAAgB,CAAC,SAAS;QACrC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;IACpC;IACA,YAAY,gBAAgB,CAAC,UAAU;QACrC,CAAA,GAAA,uCAAY,EAAE,aAAa,KAAK,EAAE;IACpC;AACF;AAEA,4BAAiB;0BACf;AACF;;;;AC/LA;;;;;;;;;;AASA;;;;;;;;;;;6CASM;;AAGN,uCAAa;AAEb,MAAM,mCAAa,SAAS,cAAc,CAAC;AAC3C,MAAM,mCAAa,SAAS,cAAc,CAAC;AAC3C,MAAM,+BAAS,SAAS,cAAc,CAAC;AACvC,MAAM,wCAAkB,SAAS,cAAc,CAAC;AAChD,MAAM,yCAAmB,SAAS,cAAc,CAAC;AACjD,MAAM,yCAAmB,SAAS,cAAc,CAAC;AACjD,MAAM,oCAAc,SAAS,cAAc,CAAC,CAAC,4BAA4B,CAAC;AAC1E,MAAM,wCAAkB,SAAS,cAAc,CAAC;AAEhD,MAAM,oCAAc,SAAS,cAAc,CAAC;AAC5C,MAAM,+BAAS,SAAS,cAAc,CAAC;AACvC,MAAM,+BAAS,SAAS,cAAc,CAAC;AACvC,MAAM,+BAAS,SAAS,cAAc,CAAC;AACvC,MAAM,gCAAU,SAAS,cAAc,CAAC;AAExC,IAAI,qCAAe,mEAAmE;AACtF,OAAO,iBAAiB,GAAG,CAAA,GAAA,2CAAgB;AAE3C,SAAS,4CAAsB,YAAY,aAAa;IACtD,MAAM,aAAa,CAAA,GAAA,2CAAgB,EAAE,YAAY;IACjD,sCAAgB,KAAK,GAAG,CAAA,GAAA,2CAAgB,EAAE,YAAY;IAEtD,iCAAW,YAAY,kBAAkB;IACzC,CAAA,GAAA,uBAAe,EAAE,uCAAiB,KAAK,EAAE,IAAI;IAC7C,6BAAO,KAAK;IACZ,CAAA,GAAA,qCAAU,EAAE,WAAW,CAAA,GAAA,2CAAgB,EAAE,YAAY;IACrD;AACF;AAEA,uCAAiB,gBAAgB,CAAC,UAAU,CAAC;IAC3C,IAAI,YAAY,EAAE,MAAM,CAAC,KAAK,KAAK,QAAQ,MAAM,EAAE,MAAM,CAAC,KAAK,KAAK,UAAU,KAAK;IAEnF,CAAA,GAAA,uBAAe,EAAE,EAAE,MAAM,CAAC,KAAK,EAAE,WAAW,MAAM,MAAM,eAAe,CAAA,GAAA,2CAAgB,EAAE,YAAY;AACvG;AAEA,SAAS;IACP,MAAM,YAAY;IAElB;IACA,MAAM,aAAa,CAAA,GAAA,2CAAgB,EAAE,YAAY;IAEjD,SAAS,cAAc,CAAC,iBAAiB,SAAS,GAAG;IAErD,MAAM,gBAAgB,QAAQ,OAAO,CAAC,uCAAiB;IAEvD,cAAc,IAAI,CAAC,CAAC;QAClB,iCAAW,eAAe;QAC1B,0CAAoB,eAAe;QACnC,CAAA,GAAA,qCAAU,EAAE,WAAW,CAAA,GAAA,2CAAgB,EAAE,YAAY;QAErD;IACF;AACF;AAEA,sCAAgB,gBAAgB,CAAC,SAAS,CAAA,GAAA,eAAO,EAAE,mCAAa;AAEhE,SAAS,kCAAY,CAAC;IACpB,MAAM,gBAAgB,EAAE,MAAM,CAAC,KAAK,CAAC,UAAU,CAAC,KAAK,IAAI,KAAK,CAAC;IAC/D,CAAA,GAAA,2CAAgB,EAAE,YAAY,GAAG;IAEjC,iCAAW,eAAe,kBAAkB;IAE5C,WAAW;QACT;IACF,GAAG;AACL;AAEA,iCAAW,gBAAgB,CAAC,SAAS,SAAU,CAAC;IAC9C;IACA,MAAM,MAAM,EAAE,MAAM,CAAC,KAAK;IAE1B,iCAAW,SAAS,GAAG;AACzB;AAEA,kCAAY,gBAAgB,CAAC,SAAS;IACpC;AACF;AAEA,6BAAO,gBAAgB,CAAC,SAAS;IAC/B;AACF;AACA,6BAAO,gBAAgB,CAAC,SAAS;IAC/B;AACF;AACA,6BAAO,gBAAgB,CAAC,SAAS;IAC/B;AACF;AACA,8BAAQ,gBAAgB,CAAC,SAAS;IAChC;AACF;AACA,sCAAgB,gBAAgB,CAAC,SAAS,SAAU,CAAC;IACnD,2BAA2B;IAC3B,MAAM,YAAY;IAClB,IAAI,QAAQ,EAAE,MAAM,CAAC,KAAK;IAC1B,IAAI,UAAU,SAAS,cAAc,CAAC,CAAC,KAAK,EAAE,UAAU,CAAC;IACzD,QAAQ,KAAK,CAAC,eAAe,GAAG;IAChC,kCAAkC;IAClC,IAAI,YAAY,OAAO,OAAO,GAAG,EAAE,CAAC,EAAE;IACtC,IAAI,YAAY,IAAI;QAClB,QAAQ,SAAS,CAAC,MAAM,CAAC;QACzB,QAAQ,SAAS,CAAC,GAAG,CAAC;IACxB,OAAO;QACL,QAAQ,SAAS,CAAC,MAAM,CAAC;QACzB,QAAQ,SAAS,CAAC,GAAG,CAAC;IACxB;AACF;AAEA,SAAS;IACP,IAAI,kCAAY,OAAO,EACrB;AAEJ;AACA,sCAAgB,gBAAgB,CAAC,SAAS,CAAA,GAAA,eAAO,EAAE,8CAAwB;AAE3E,6BAAO,gBAAgB,CAAC,SAAS;IAC/B,MAAM,YAAY;IAClB,SAAS,cAAc,CAAC,iBAAiB,SAAS,GAAG;IAErD,MAAM,aAAa,QAAQ,OAAO,CAAC,CAAA,GAAA,2CAAgB,EAAE,YAAY;IACjE,MAAM,aAAa,QAAQ,OAAO,CAAC,CAAA,GAAA,2CAAgB,EAAE,YAAY;IAEjE,IAAI,QAAQ;IACZ,WAAW,IAAI,CAAC,CAAC;QACf,QAAQ,GAAG,CAAC,CAAC;YACX,IAAI,KAAK,MAAM,GAAG,GAAG,QAAQ;QAC/B;IACF;IAEA,QAAQ,GAAG,CAAC;QAAC;QAAY;KAAW,EAAE,IAAI,CAAC,CAAC;QAC1C,IAAI,aAAa,OAAO,CAAC,EAAE;QAC3B,IAAI,UAAU,OAAO,CAAC,EAAE;QAExB,MAAM,kBAAkB,QAAQ,OAAO,CAAC,6CAAuB,YAAY,CAAA,GAAA,2CAAgB,EAAE,YAAY;QACzG,gBAAgB,IAAI,CAAC,CAAC;YACpB,IAAI,OAAO;gBACT,IAAI,kBAAkB,WAAW,gBAAgB,6CAAuB,YAAY;gBACpF,IAAI,CAAC,iBAAiB,QAAQ,MAAM,GAAG,GAAG;oBACxC,uEAAuE;oBACvE,4EAA4E;oBAC5E,sEAAsE;oBAEtE,iCAAW,SAAS;oBACpB,0CAAoB,SAAS;gBAC/B,OAAO;oBACL,wEAAwE;oBACxE,2DAA2D;oBAC3D,6BAA6B;oBAE7B,iCAAW,eAAe;oBAE1B,0CAAoB,eAAe;gBACrC;YACF,OAAO;gBACL,iCAAW,eAAe;gBAC1B,0CAAoB,eAAe;YACrC;YAEA,CAAA,GAAA,sBAAc,EAAE,uCAAiB,KAAK,EAAE,WAAW;YACnD,CAAA,GAAA,qCAAU,EAAE,WAAW;YACvB;QACF;IACF;AACF;AAEA,SAAS;IACP,CAAA,GAAA,2CAAgB,EAAE,YAAY,GAAG,EAAE;IACnC,IAAI,UAAU,SAAS,cAAc,CAAC;IACtC,QAAQ,SAAS,CAAC,GAAG,CAAC;IACtB,QAAQ,SAAS,GAAG;AACtB;AAEA,SAAS;IACP,IAAI,QAAQ,EAAE;IAEd,IAAI,6BAAO,OAAO,EAAE,MAAM,IAAI,CAAC;IAC/B,IAAI,6BAAO,OAAO,EAAE,MAAM,IAAI,CAAC;IAC/B,IAAI,6BAAO,OAAO,EAAE,MAAM,IAAI,CAAC;IAC/B,IAAI,8BAAQ,OAAO,EAAE,MAAM,IAAI,CAAC;IAEhC,CAAA,GAAA,2CAAgB,EAAE,UAAU,GAAG;IAC/B,OAAO;AACT;AAEA,SAAS;IACP,MAAM,YAAY;IAElB,MAAM,SAAS,CAAA,GAAA,2CAAgB,EAAE,MAAM;IACvC,MAAM,cAAc,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,iBAAiB,CAAC;IAC3E,MAAM,SAAS,YAAY,OAAO;IAClC,4BAA4B;IAC5B,MAAM,qBAAqB,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,gBAAgB,CAAC;IACjF,mBAAmB,SAAS,GAAG;IAE/B,MAAM,eAAe,CAAA,GAAA,2CAAgB,EAAE,YAAY;IAEnD,CAAA,GAAA,2CAAgB,EAAE,YAAY,GAC5B,CAAA,GAAA,2CAAgB,EAAE,MAAM,KAAK,SAAS,CAAA,GAAA,2CAAgB,EAAE,MAAM,KAAK,QAC/D,eACA,aAAa,GAAG,CAAC,CAAC;QAChB,OAAO,CAAA,GAAA,oBAAY,EAAE;IACvB;IAEN,IAAI,mBAAmB,SACnB,aACG,GAAG,CAAC,CAAC;QACJ,OAAO,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IACjB,GACC,QAAQ,GACR,UAAU,CAAC,KAAK,QACnB,aAAa,QAAQ,GAAG,UAAU,CAAC,KAAK;IAC5C,mBAAmB,SAAS,GAAG;AACjC;AAEA,uCAAiB,gBAAgB,CAAC,UAAU,CAAC;IAC3C,IAAI,SAAS,EAAE,MAAM,CAAC,KAAK;IAC3B,CAAA,GAAA,2CAAgB,EAAE,MAAM,GAAG;IAE3B;AACF;AACA,kCAAY,gBAAgB,CAAC,UAAU;AAEvC;;;;;;;;;;;;;CAaC,GAED,SAAS,8BAAQ,MAAM,EAAE,MAAM,EAAE,GAAG;IAClC,8BAA8B;IAC9B,IAAI,mBAAmB,OAAO,iCAAW,KAAK;IAE9C,MAAM,QAAQ;IACd,IAAI,SAAS;IAEb,IAAK,IAAI,IAAI,GAAG,IAAI,MAAM,MAAM,EAAE,IAAK;QACrC,IAAI,OAAO,CAAA,GAAA,kBAAU,EAAE,QAAQ,KAAK,CAAC,EAAE;QACvC,IAAI,OAAO,CAAA,GAAA,kBAAU,EAAE,QAAQ,KAAK,CAAC,EAAE;QACvC,IAAI,SAAS,CAAA,GAAA,oBAAY,EAAE,MAAM;QACjC,IAAI,SAAS,kBAAkB;YAC7B,IAAI,KAAK,QAAQ,KAAK,CAAC,CAAC,EAAE,OAAO,gBAAgB,EAAE,OAAO,IAAI,EAAE,KAAK,CAAC,EAAE,CAAC,UAAU,EAAE,OAAO,CAAC;YAC7F,SAAS;YACT;QACF,OAAO;IACT;IAEA,OAAO;AACT;AAEA;;;;;CAKC,GACD,SAAS,uCAAiB,MAAM,EAAE,MAAM,EAAE,SAAS,KAAK;IACtD,IAAI;IACJ,IAAI,QACF,MAAM,CAAA,GAAA,mBAAW,EAAE;SAEnB,MAAM,kCAAY,QAAQ,OAAO;IAEnC,IAAI,SAAS,kCAAY,OAAO;IAChC,IAAI,aAAa,sCAAgB,KAAK;IACtC,IAAI,wBAAwB,SAAS,cAAc,CAAC;IACpD,IAAI,kBAAkB,sBAAsB,KAAK;IACjD,IAAI,kBAAkB,oBAAoB,QAAQ,MAAM;IACxD,mDAAmD;IACnD,IAAI,QAAQ,MAAM,kDAA4B,KAAK,YAAY;IAE/D,IAAI,aAAa,EAAE;IACnB,IAAI,QAAQ;QACV,IAAI,OAAO,MAAM,GAAG,GAAG;YACrB,kDAAkD;YAClD,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IAAK;gBACtC,2CAA2C;gBAC3C,IAAI,SAAS;gBACb,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IAAK;oBACtC,IAAI,MAAM,GACR;yBACK;wBACL,IAAI,OAAO,8BAAQ,MAAM,CAAC,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,OAAO,8BAA8B;wBAC9E,IAAI,SAAS,OAAO;4BAClB,SAAS;4BACT;wBACF;oBACF;gBACF;gBACA,IAAI,WAAW,MACb,WAAW,IAAI,CAAC,MAAM,CAAC,EAAE;qBAEzB,QAAQ,IAAI,CAAC,CAAC,4BAA4B,EAAE,MAAM,CAAC,EAAE,CAAC,SAAS,CAAC;YAEpE;YACA,oBAAoB;YACpB,aAAa;mBAAI,IAAI,IAAI;aAAY;QACvC;QACA,IAAI,OAAO,MAAM,KAAK,GACpB,WAAW,IAAI,CAAC,MAAM,CAAC,EAAE;IAE7B,OAAO;QACL,MAAM,cAAc,mCAAa,IAAI,MAAM;QAC3C,oCAAoC;QACpC,MAAM,cAAc,GAAG,CAAC,YAAY;QACpC,WAAW,IAAI,CAAC;IAClB;IAEA,IAAI,MAAM,WAAW,MAAM;IAE3B,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EAAE,IAAK;QACnC,IAAI,SAAS;QACb,+BAA+B;QAC/B,2CAA2C;QAC3C,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,IAAK;YAC5B,IAAI,OAAO,8BAAQ,GAAG,CAAC,EAAE,EAAE,UAAU,CAAC,EAAE;YACxC,IAAI,SAAS,OAAO;gBAClB,SAAS;gBACT;YACF,OAAO;QACT;QACA,IAAI,WAAW,MAAM;YACnB,yCAAyC;YACzC,WAAW,IAAI,CAAC,GAAG,CAAC,EAAE;YACtB,MAAM,MAAM;QACd;IACF;IAEA,OAAO;AACT;AAEA,IAAI;AACJ,SAAS,6CAAuB,GAAG,EAAE,MAAM;IACzC,IAAI,OAAO,EAAE;IACb,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,IACtB,KAAK,IAAI,CAAC,uCAAiB,KAAK;IAGlC,IAAI,iBAAiB,KAAK,GAAG,IAAI,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,MAAM;IACzD,IAAI,WAAW,KAAK,GAAG,CAAC,CAAC,IAAM,EAAE,MAAM;IACvC,IAAI,QAAQ,SAAS,OAAO,CAAC;IAE7B,IAAI,mBAAmB,EAAE;IACzB,MAAO,SAAS,GAAI;QAClB,iBAAiB,IAAI,CAAC;QACtB,QAAQ,SAAS,OAAO,CAAC,gBAAgB,QAAQ;IACnD;IACA,IAAK,IAAI,IAAI,GAAG,IAAI,iBAAiB,MAAM,EAAE,IAAK;QAChD,IAAI,eAAe,gBAAgB,CAAC,EAAE;QACtC,IAAI,kCAAY,IAAI,CAAC,aAAa,EAAE,8BAClC;QAEF,IAAI,CAAC,IAAI,CAAC,aAAa,EACrB;aACK;YACL,8BAAQ,IAAI,CAAC,aAAa;YAC1B,OAAO,IAAI,CAAC,aAAa;QAC3B;IACF;AACF;AAEA;;;CAGC,GACD,SAAS,kCAAY,MAAM,EAAE,SAAS,EAAE,SAAS;IAC/C,IAAI,eAAe;QAAC;QAAO;QAAc;KAAY;IACrD,IAAK,IAAI,IAAI,GAAG,IAAI,aAAa,MAAM,EAAE,IAAK;QAC5C,IAAI,CAAC,aAAa,QAAQ,CAAC,YAAY,QAAQ,IAAI,CAAC,CAAC,EAAE,UAAU,0BAA0B,EAAE,aAAa,CAAC;QAC3G,IAAI,CAAC,aAAa,QAAQ,CAAC,YAAY,QAAQ,IAAI,CAAC,CAAC,EAAE,UAAU,0BAA0B,EAAE,aAAa,CAAC;IAC7G;IACA,wCAAwC;IACxC,IAAI,YAAY,OAAO,GAAG,CAAC,CAAC,OAAO;QACjC,IAAI,MAAM,OAAO,OAAO,GAAG;QAC3B,OAAO;YACL,KAAK,GAAG,CAAC,EAAE;YACX,YAAY,GAAG,CAAC,EAAE;YAClB,WAAW,GAAG,CAAC,EAAE;mBACjB;YACA,OAAO;QACT;IACF;IACA,yCAAyC;IACzC,IAAI,SAAS,UAAU,IAAI,CAAC,CAAC,GAAG,IAAO,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,GAAG,IAAI,CAAC,CAAC,UAAU,KAAK,CAAC,CAAC,UAAU,GAAI,CAAC,CAAC,UAAU,GAAG,CAAC,CAAC,UAAU,GAAG,IAAI,KAAM;IAClJ,0CAA0C;IAC1C,IAAI,cAAc,OAAO;QACvB,IAAI,cAAc,mCAAa,OAAO,MAAM;QAC5C,IAAI,YAAY,OAAO,MAAM,CAAC,GAAG;QACjC,IAAI,aAAa,OAAO,MAAM,CAAC;QAC/B,SAAS,WAAW,MAAM,CAAC;IAC7B;IACA,MAAM,gBAAgB,OAAO,GAAG,CAAC,CAAC;QAChC,OAAO,OAAO,KAAK;IACrB;IACA,OAAO;AACT;AAEA,SAAS,iCAAW,GAAG,EAAE,IAAI,EAAE,QAAQ,KAAK;IAC1C,IAAI,OAAO,SAAS,cAAc,CAAC;IACnC,KAAK,SAAS,GAAG;IAEjB,IAAI,CAAC,KAAK;QACR,IAAI,SAAS,SAAS,aAAa,CAAC;QACpC,OAAO,SAAS,GAAG;QACnB,OAAO,SAAS,GAAG;QACnB,KAAK,WAAW,CAAC;IACnB,OACE,IAAI,GAAG,CAAC,CAAC;QACP,IAAI,SAAS,SAAS,aAAa,CAAC;QACpC,IAAI,WAAW,OAAO,OAAO,GAAG;QAChC,IAAI,WAAW,gBAAa;YAAC;YAAG;YAAG;SAAE,EAAE;QACvC,IAAI,WAAW,GAAG,WAAW,WAAW;QAExC,OAAO,SAAS,GAAG,CAAC,QAAQ,qBAAqB;QACjD,OAAO,KAAK,CAAC,eAAe,GAAG;QAC/B,OAAO,KAAK,CAAC,KAAK,GAAG,WAAW,MAAM,YAAY;QAElD,IAAI,SAAS,iBAAiB;YAC5B,OAAO,SAAS,GAAG,CAAC,EAAE,MAAM,CAAC;YAC7B,IAAI,SAAS,SAAS,aAAa,CAAC;YACnC,OAAO,SAAS,GAAG,CAAA,GAAA,2CAAgB,EAAE,YAAY,CAAC,OAAO,CAAC,UAAU,IAAI,+BAA+B,sBAAwB,OAAO,KAAK,CAAC,KAAK,GAAG,WAAW,MAAM,YAAY;YAClL,OAAO,SAAS,GACd,CAAA,GAAA,2CAAgB,EAAE,YAAY,CAAC,OAAO,CAAC,UAAU,IAC7C,CAAC;;cAED,CAAC,GACD,CAAC;;gBAEC,CAAC;YACT,OAAO,gBAAgB,CAAC,SAAS,CAAC;gBAChC,IAAI,CAAA,GAAA,2CAAgB,EAAE,YAAY,CAAC,OAAO,CAAC,SAAS,GAAG;oBACrD,CAAA,GAAA,2CAAgB,EAAE,YAAY,CAAC,IAAI,CAAC;oBACpC,iCAAW,CAAA,GAAA,2CAAgB,EAAE,YAAY,EAAE;oBAC3C,CAAA,GAAA,sBAAc,EAAE,uCAAiB,KAAK,EAAE,eAAe,CAAA,GAAA,2CAAgB,EAAE,YAAY;oBACrF,CAAA,GAAA,qCAAU,EAAE,eAAe,CAAA,GAAA,2CAAgB,EAAE,YAAY;oBACzD,SAAS,cAAc,CAAC,8BAA8B,SAAS,CAAC,MAAM,CAAC;oBACvE;gBACF;YACF;YACA,OAAO,WAAW,CAAC;QACrB;QACA,IAAI,SAAS,8BAA8B;YACzC,IAAI,SAAS,SAAS,aAAa,CAAC;YACnC,OAAO,SAAS,GAAG,sBAAwB,OAAO,KAAK,CAAC,KAAK,GAAG,WAAW,MAAM,YAAY;YAC9F,OAAO,SAAS,GAAG,CAAC;;cAEd,CAAC;YACP,OAAO,gBAAgB,CAAC,SAAS;gBAC/B,MAAM,QAAQ,CAAA,GAAA,2CAAgB,EAAE,YAAY,CAAC,OAAO,CAAC;gBACrD,IAAI,QAAQ,IACV,CAAA,GAAA,2CAAgB,EAAE,YAAY,CAAC,MAAM,CAAC,OAAO;gBAE/C,iCAAW,CAAA,GAAA,2CAAgB,EAAE,YAAY,EAAE;gBAC3C,CAAA,GAAA,sBAAc,EAAE,uCAAiB,KAAK,EAAE,eAAe,CAAA,GAAA,2CAAgB,EAAE,YAAY;gBACrF,CAAA,GAAA,qCAAU,EAAE,eAAe,CAAA,GAAA,2CAAgB,EAAE,YAAY;gBACzD;gBACA,IAAI,CAAA,GAAA,2CAAgB,EAAE,YAAY,CAAC,MAAM,GAAG,GAAG;oBAC7C,MAAM,iBAAiB,SAAS,cAAc,CAAC;oBAC/C,eAAe,SAAS,CAAC,GAAG,CAAC;oBAC7B,eAAe,SAAS,GAAG;gBAC7B;YACF;YACA,OAAO,WAAW,CAAC;QACrB;QAEA,KAAK,WAAW,CAAC;IACnB;AAEJ;AAEA,SAAS,0CAAoB,KAAK,EAAE,iBAAiB;IACnD,IAAI,OAAO,SAAS,cAAc,CAAC;IACnC,KAAK,SAAS,GAAG;IACjB,IAAI,aAAa,SAAS,cAAc,CAAC;IACzC,8BAA8B;IAE9B,MAAM,cAAc,QAAQ,OAAO,CAAC;IACpC,MAAM,MAAM,QAAQ,OAAO,CAAC;IAE5B,QAAQ,GAAG,CAAC;QAAC;QAAa;KAAI,EAAE,IAAI,CAAC,CAAC;QACpC,IAAI,QAAQ,OAAO,CAAC,EAAE;QACtB,IAAI,MAAM,OAAO,CAAC,EAAE;QACpB,MAAM,OAAO,CAAC,CAAC,MAAM;YACnB,0DAA0D;YAC1D,gFAAgF;YAChF,IAAI,MAAM,OAAO,CAAC,MAAM;gBACtB,MAAM,WAAW,QAAQ,OAAO,CAC9B,IAAI,GAAG,CAAC,CAAC;oBACP,OAAO,CAAA,GAAA,kBAAU,EAAE,OAAO;gBAC5B;gBAGF,SAAS,IAAI,CAAC,CAAC;oBACb,IAAI,QAAQ,SAAS,aAAa,CAAC;oBACnC,MAAM,SAAS,GAAG;oBAClB,MAAM,SAAS,GAAG,CAAC,EAAE,CAAA,GAAA,4BAAoB,EAAE,MAAM,CAAC;oBAClD,KAAK,WAAW,CAAC;oBAEjB,IAAI,mBAAmB,MAAM,IAAI,CAAC,MAAM,IAAI,MAAM,GAAG,GAAG,IAAI;oBAC5D,6CAA6C;oBAC7C,IAAI,mBAAmB;wBACrB,wCAAwC;wBACxC,IAAI,YAAY,SAAS,GAAG,CAAC,CAAC,OAAO;4BACnC,IAAI,MAAM,OAAO,OAAO,GAAG;4BAC3B,OAAO;gCACL,KAAK,GAAG,CAAC,EAAE;gCACX,YAAY,GAAG,CAAC,EAAE;gCAClB,WAAW,GAAG,CAAC,EAAE;uCACjB;gCACA,OAAO;4BACT;wBACF;wBACA,IAAI,SAAS,iBAAiB,UAAU,IAAI,CAAC,CAAC,GAAG,IAAO,EAAE,SAAS,GAAG,EAAE,SAAS,GAAG,IAAI;6BAEnF,UAAU,IAAI,CAAC,CAAC,GAAG,IAAO,EAAE,GAAG,GAAG,EAAE,GAAG,GAAG,IAAI,EAAE,GAAG,KAAK,EAAE,GAAG,GAAI,EAAE,UAAU,GAAG,EAAE,UAAU,GAAG,IAAI,KAAM;wBAC9G,uCAAuC;wBACvC,WAAW,UAAU,GAAG,CAAC,CAAC;4BACxB,OAAO,OAAO,KAAK;wBACrB;wBACA,6DAA6D;wBAC7D,oDAAoD;wBACpD,mBAAmB,UAAU,GAAG,CAAC,CAAC;4BAChC,OAAO,OAAO,KAAK;wBACrB;oBACF;oBACA,SAAS,GAAG,CAAC,CAAC,OAAO;wBACnB,IAAI,SAAS,SAAS,aAAa,CAAC;wBACpC,OAAO,SAAS,GAAG;wBACnB,OAAO,KAAK,CAAC,eAAe,GAAG;wBAC/B,IAAI,aAAa,SAAS,aAAa,CAAC;wBACxC,WAAW,SAAS,GAAG;wBACvB,WAAW,KAAK,CAAC,eAAe,GAAG,GAAG,CAAC,gBAAgB,CAAC,MAAM,CAAC;wBAC/D,OAAO,WAAW,CAAC;wBACnB,kDAAkD;wBAClD,KAAK,WAAW,CAAC;oBACnB;gBACF;gBAEA,2DAA2D;gBAC3D,IAAI,CAAC,SAAS,cAAc,CAAC,yBAAyB;oBACpD,IAAI,WAAW,SAAS,aAAa,CAAC;oBACtC,SAAS,EAAE,GAAG;oBACd,SAAS,SAAS,GAAG;oBACrB,SAAS,SAAS,GAAG;oBACrB,WAAW,WAAW,CAAC;gBACzB;YACF,OAGK;gBACH,IAAI,WAAW,SAAS,aAAa,CAAC;gBACtC,SAAS,SAAS,GAAG;gBACrB,SAAS,SAAS,GAAG;gBACrB,WAAW,WAAW,CAAC;YACzB;QACF;IACF;AACF;AAEA,SAAS,kCAAY,GAAG,EAAE,MAAM;IAC9B,MAAM,WAAW,IAAI,IAAI;IACzB,OAAO,IAAI,MAAM,CAAC,CAAC;QACjB,oDAAoD;QACpD,OAAO,CAAC,SAAS,GAAG,CAAC;IACvB;AACF;AAEA,SAAS,mCAAa,GAAG;IACvB,OAAO,KAAK,KAAK,CAAC,KAAK,MAAM,KAAK;AACpC;AAEA,SAAS,kCAAY,CAAC,EAAE,CAAC;IACvB,IAAI,MAAM,GAAG,OAAO;IACpB,IAAI,KAAK,QAAQ,KAAK,MAAM,OAAO;IACnC,IAAI,EAAE,MAAM,KAAK,EAAE,MAAM,EAAE,OAAO;IAElC,2DAA2D;IAC3D,+CAA+C;IAC/C,oEAAoE;IACpE,4CAA4C;IAE5C,IAAK,IAAI,IAAI,GAAG,IAAI,EAAE,MAAM,EAAE,EAAE,EAAG;QACjC,IAAI,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,EAAE,EAAE,OAAO;IAC5B;IACA,OAAO;AACT;AAEA,SAAS,kDAA4B,GAAG,EAAE,UAAU,EAAE,KAAK;IACzD,IAAI,oBAAoB,EAAE;IAC1B,MAAM,kBAAkB,OAAO,YAAY,GAAG;IAC9C,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EAAE,IAAK;QACnC,IAAI,aAAa,OAAO,GAAG,CAAC,EAAE,EAAE,GAAG;QACnC,IAAI,WAAW,gBAAa,YAAY;QACxC,IAAI,WAAW,OAAO,kBAAkB,IAAI,CAAC,GAAG,CAAC,EAAE;IACrD;IACA,IAAI,SAAS,kCAAY,KAAK;IAC9B,OAAO;AACT;AAEA,4BAAiB;2BACf;AACF;;;;;;ACvnBA;;;;;;;;;;AASA;;;;;;AAOA,SAAS,wCAAkB,SAAS;IAClC,IAAI,aAAa,cAAc,eAAe,CAAA,GAAA,uBAAe,IAAI,cAAc,cAAc,CAAA,GAAA,sBAAc,IAAI,CAAA,GAAA,2CAAgB;IAC/H,IAAI,SAAS,cAAc,gBAAgB,WAAW,YAAY,GAAG,WAAW,OAAO,CAAC,OAAO;IAC/F,IAAI,QAAQ;IAEZ,MAAM,WAAW;IACjB,MAAM,UAAU;IAEhB,MAAM,mBAAmB,OAAO,MAAM;IACtC,MAAM,gBAAgB,AAAC,CAAA,WAAW,OAAM,IAAK;IAC7C,MAAM,cAAc;IACpB,MAAM,eAAe;IAErB,IAAI,aAAa,SAAS,eAAe,CAAC,OAAO;IACjD,WAAW,YAAY,CAAC,SAAS;IACjC,WAAW,YAAY,CAAC,WAAW;IACnC,WAAW,cAAc,CAAC,MAAM,SAAS,cAAc;IACvD,WAAW,cAAc,CAAC,MAAM,UAAU,eAAe;IACzD,WAAW,YAAY,CAAC,eAAe;IACvC,WAAW,EAAE,GAAG;IAEhB,IAAI,eAAe,SAAS,aAAa,CAAC;IAC1C,aAAa,EAAE,GAAG,CAAC,EAAE,UAAU,eAAe,CAAC;IAC/C,IAAI,IAAI;IAER,aAAa,WAAW,CAAC;IACzB,SAAS,IAAI,CAAC,WAAW,CAAC;IAE1B,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,MAAM,EAAE,IAAK;QACtC,IAAI,IAAI,AAAC,CAAA,WAAW,OAAM,IAAK;QAE/B,IAAI,OAAO,SAAS,eAAe,CAAC,OAAO;QAC3C,KAAK,cAAc,CAAC,MAAM,KAAK;QAC/B,KAAK,cAAc,CAAC,MAAM,KAAK;QAC/B,KAAK,cAAc,CAAC,MAAM,SAAS;QACnC,KAAK,cAAc,CAAC,MAAM,UAAU;QACpC,KAAK,cAAc,CAAC,MAAM,MAAM;QAChC,KAAK,cAAc,CAAC,MAAM,QAAQ,MAAM,CAAC,EAAE;QAC3C,WAAW,WAAW,CAAC;IACzB;AACF;AAEA,SAAS,uCAAiB,SAAS;IACjC,MAAM,YAAY,QAAQ,OAAO,CAAC,wCAAkB;IAEpD,UAAU,IAAI,CAAC;QACb,IAAI,MAAM,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,eAAe,CAAC,EAAE,SAAS;QAC1E,IAAI,YAAY,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC,EAAE,KAAK;QAElE,IAAI,WAAW,CAAC,EAAE,UAAU,CAAC,EAAE,UAAU,WAAW,CAAC;QACrD,IAAI,OAAO,IAAI,KAAK;YAAC,CAAC,EAAE,IAAI,CAAC;SAAC,EAAE;YAAC,MAAM;QAA6B;QAEpE,CAAA,GAAA,aAAK,EAAE,MAAM;QACb,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,eAAe,CAAC,EAAE,MAAM;IAC/D;AACF;AAEA,OAAO,gBAAgB,GAAG;AAE1B,SAAS,cAAc,CAAC,8BAA8B,gBAAgB,CAAC,SAAS;IAC9E,WAAW;QACT,uCAAiB;IACnB;AAEF;AAEA,SAAS,cAAc,CAAC,6BAA6B,gBAAgB,CAAC,SAAS;IAC7E,WAAW;QACT,uCAAiB;IACnB;AAEF;AAEA,SAAS,cAAc,CAAC,+BAA+B,gBAAgB,CAAC,SAAS;IAC/E,WAAW;QACT,uCAAiB;IACnB;AAEF;AAEA,4BAAiB;uBACf;sBACA;AACF;;;;ACnGA;;;;;;;;;;AASA;;;;;;AAOA,SAAS,gCAAU,SAAS;IAC1B,IAAI,aAAa,cAAc,eAAe,CAAA,GAAA,uBAAe,IAAI,cAAc,cAAc,CAAA,GAAA,sBAAc,IAAI,CAAA,GAAA,2CAAgB;IAC/H,IAAI,SAAS,cAAc,gBAAgB,WAAW,YAAY,GAAG,WAAW,OAAO,CAAC,OAAO;IAC/F,6BAA6B;IAC7B,IAAI,OAAO,cAAc,eAAe,uBAAuB,cAAc,cAAc,sBAAsB;IACjH,IAAI,YAAY,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC,EAAE,KAAK;IAElE,IAAI,YAAY,OAAO,GAAG,CAAC,CAAC;QAC1B,OAAO,CAAC,OAAO,EAAE,EAAE,QAAQ,CAAC;IAC9B;IACA,IAAI,iBAAiB,UAAU,QAAQ,GAAG,UAAU,CAAC,MAAM;IAE3D,IAAI,MAAM,CAAC;;;;2BAIc,EAAE,UAAU,QAAQ,EAAE,KAAK;QAC9C,EAAE,eAAe;;;aAGZ,CAAC;IAEZ,OAAO;AACT;AAEA,SAAS,kCAAY,SAAS;IAC5B,MAAM,gBAAgB,QAAQ,OAAO,CAAC,gCAAU;IAEhD,cAAc,IAAI,CAAC,CAAC;QAClB,IAAI,YAAY,SAAS,cAAc,CAAC,CAAC,EAAE,UAAU,KAAK,CAAC,EAAE,KAAK;QAElE,IAAI,WAAW,CAAC,EAAE,UAAU,CAAC,EAAE,UAAU,WAAW,CAAC;QACrD,IAAI,OAAO,IAAI,KAAK;YAAC,CAAC,EAAE,KAAK,CAAC;SAAC,EAAE;YAAC,MAAM;QAAY;QAEpD,CAAA,GAAA,aAAK,EAAE,MAAM;IACf;AACF;AAEA,OAAO,WAAW,GAAG;AAErB,SAAS,cAAc,CAAC,0BAA0B,gBAAgB,CAAC,SAAS;IAC1E,WAAW;QACT,kCAAY;IACd;AAEF;AAEA,SAAS,cAAc,CAAC,yBAAyB,gBAAgB,CAAC,SAAS;IACzE,WAAW;QACT,kCAAY;IACd;AAEF;AAEA,SAAS,cAAc,CAAC,2BAA2B,gBAAgB,CAAC,SAAS;IAC3E,WAAW;QACT,kCAAY;IACd;AAEF;AAEA,4BAAiB;eACf;iBACA;AACF;;;AjBRA,CAAA,GAAA,6CAAQ,EAAE;AACV,CAAA,GAAA,6CAAQ,EAAE;;;;;6CAoBJ;AAEN,uCAAa;AAEb,OAAO,UAAU,CAAC,gCAAgC,gBAAgB,CAAC,UAAU,CAAC;IAC5E,IAAI,MAAM,OAAO,EAAE;QACjB,WAAW;QACX,SAAS,aAAa,CAAC,QAAQ,SAAS,CAAC,MAAM,CAAC;QAChD,SAAS,aAAa,CAAC,QAAQ,SAAS,CAAC,GAAG,CAAC;IAC/C,OAAO;QACL,YAAY;QACZ,SAAS,aAAa,CAAC,QAAQ,SAAS,CAAC,GAAG,CAAC;QAC7C,SAAS,aAAa,CAAC,QAAQ,SAAS,CAAC,MAAM,CAAC;IAClD;AACF;AACA,MAAM,2BAAK,OAAO,UAAU,CAAC;AAC7B,IAAI,yBAAG,OAAO,EACZ,WAAW;AACX,SAAS,aAAa,CAAC,QAAQ,SAAS,CAAC,GAAG,CAAC;KAE7C,YAAY;AACZ,SAAS,aAAa,CAAC,QAAQ,SAAS,CAAC,GAAG,CAAC;AAG/C,SAAS,cAAc,CAAC,iBAAiB,KAAK;AAC9C,wDAAwD;AACxD,SAAS,cAAc,CAAC,qBAAqB,KAAK;AAClD,SAAS,cAAc,CAAC,oBAAoB,KAAK;AACjD,SAAS,cAAc,CAAC,sBAAsB,KAAK;AAEnD,SAAS,cAAc,CAAC,WAAW,KAAK;AAExC,CAAA,GAAA,8CAAmB;AACnB,CAAA,GAAA,6CAAkB;AAClB,CAAA,GAAA,+CAAoB;AAEpB,OAAO,MAAM,GAAG;IACd,wCAAwC;IACxC,qDAAqD;IAErD,6DAA6D;IAE7D,mDAAmD;IACnD,CAAA,GAAA,iBAAS;AACX","sources":["docs/ui/src/js/createTable.js","node_modules/.pnpm/file-saver@2.0.5/node_modules/file-saver/dist/FileSaver.min.js","node_modules/.pnpm/file-saver@2.0.5/node_modules/file-saver/src/FileSaver.js","docs/ui/src/scales.js","docs/ui/src/js/initialQualitativeScale.js","docs/ui/src/js/colorScaleDiverging.js","docs/ui/src/js/scaleKeyColors.js","docs/ui/src/js/createSamples.js","docs/ui/src/js/createDemos.js","docs/ui/src/js/demos/demo_heatmap.js","docs/ui/src/js/demos/demo_choropleth.js","docs/ui/src/js/demos/demo_chord.js","docs/ui/src/js/demos/demo_donut.js","docs/ui/src/js/demos/demo_stackedArea.js","docs/ui/src/js/demos/demo_scatter.js","docs/ui/src/js/demos/demo_density.js","docs/ui/src/js/createPanelReportTable.js","docs/ui/src/js/colorScaleSequential.js","docs/ui/src/js/colorScaleQualitative.js","docs/ui/src/js/createSVGswatches.js","docs/ui/src/js/createXML.js"],"sourcesContent":["/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nfunction createTable(headers, rows, destId, quiet = false) {\n  let dest = document.getElementById(destId);\n\n  let table = document.createElement('table');\n  table.className = quiet ? 'spectrum-Table spectrum-Table--sizeM spectrum-Table--quiet' : 'spectrum-Table spectrum-Table--sizeM';\n  let tHead = document.createElement('thead');\n  tHead.className = 'spectrum-Table-head';\n  let hTr = document.createElement('tr');\n  let tBody = document.createElement('tbody');\n  tBody.className = 'spectrum-Table-body';\n\n  for (let i = 0; i < headers.length; i++) {\n    let head = document.createElement('th');\n    head.className = 'spectrum-Table-headCell';\n    head.innerHTML = headers[i];\n\n    hTr.appendChild(head);\n  }\n\n  for (let i = 0; i < rows.length; i++) {\n    let row = document.createElement('tr');\n    row.className = 'spectrum-Table-row';\n\n    for (let j = 0; j < rows[i].length; j++) {\n      let item = document.createElement('td');\n      item.className = 'spectrum-Table-cell';\n      item.innerHTML = rows[i][j];\n\n      row.appendChild(item);\n    }\n\n    tBody.appendChild(row);\n  }\n\n  tHead.appendChild(hTr);\n  table.appendChild(tHead);\n  table.appendChild(tBody);\n\n  dest.appendChild(table);\n}\n\nmodule.exports = {\n  createTable\n};\n","(function(a,b){if(\"function\"==typeof define&&define.amd)define([],b);else if(\"undefined\"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){\"use strict\";function b(a,b){return\"undefined\"==typeof b?b={autoBom:!1}:\"object\"!=typeof b&&(console.warn(\"Deprecated: Expected third argument to be a object\"),b={autoBom:!b}),b.autoBom&&/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(a.type)?new Blob([\"\\uFEFF\",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open(\"GET\",a),d.responseType=\"blob\",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error(\"could not download file\")},d.send()}function d(a){var b=new XMLHttpRequest;b.open(\"HEAD\",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent(\"click\"))}catch(c){var b=document.createEvent(\"MouseEvents\");b.initMouseEvent(\"click\",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f=\"object\"==typeof window&&window.window===window?window:\"object\"==typeof self&&self.self===self?self:\"object\"==typeof global&&global.global===global?global:void 0,a=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||(\"object\"!=typeof window||window!==f?function(){}:\"download\"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement(\"a\");g=g||b.name||\"download\",j.download=g,j.rel=\"noopener\",\"string\"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target=\"_blank\")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:\"msSaveOrOpenBlob\"in navigator?function(f,g,h){if(g=g||f.name||\"download\",\"string\"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement(\"a\");i.href=f,i.target=\"_blank\",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open(\"\",\"_blank\"),g&&(g.document.title=g.document.body.innerText=\"downloading...\"),\"string\"==typeof b)return c(b,d,e);var h=\"application/octet-stream\"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\\/[\\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&\"undefined\"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,\"data:attachment/file;\"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,\"undefined\"!=typeof module&&(module.exports=g)});\n\n//# sourceMappingURL=FileSaver.min.js.map","/*\n* FileSaver.js\n* A saveAs() FileSaver implementation.\n*\n* By Eli Grey, http://eligrey.com\n*\n* License : https://github.com/eligrey/FileSaver.js/blob/master/LICENSE.md (MIT)\n* source  : http://purl.eligrey.com/github/FileSaver.js\n*/\n\n// The one and only way of getting global scope in all environments\n// https://stackoverflow.com/q/3277182/1008999\nvar _global = typeof window === 'object' && window.window === window\n  ? window : typeof self === 'object' && self.self === self\n  ? self : typeof global === 'object' && global.global === global\n  ? global\n  : this\n\nfunction bom (blob, opts) {\n  if (typeof opts === 'undefined') opts = { autoBom: false }\n  else if (typeof opts !== 'object') {\n    console.warn('Deprecated: Expected third argument to be a object')\n    opts = { autoBom: !opts }\n  }\n\n  // prepend BOM for UTF-8 XML and text/* types (including HTML)\n  // note: your browser will automatically convert UTF-16 U+FEFF to EF BB BF\n  if (opts.autoBom && /^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(blob.type)) {\n    return new Blob([String.fromCharCode(0xFEFF), blob], { type: blob.type })\n  }\n  return blob\n}\n\nfunction download (url, name, opts) {\n  var xhr = new XMLHttpRequest()\n  xhr.open('GET', url)\n  xhr.responseType = 'blob'\n  xhr.onload = function () {\n    saveAs(xhr.response, name, opts)\n  }\n  xhr.onerror = function () {\n    console.error('could not download file')\n  }\n  xhr.send()\n}\n\nfunction corsEnabled (url) {\n  var xhr = new XMLHttpRequest()\n  // use sync to avoid popup blocker\n  xhr.open('HEAD', url, false)\n  try {\n    xhr.send()\n  } catch (e) {}\n  return xhr.status >= 200 && xhr.status <= 299\n}\n\n// `a.click()` doesn't work for all browsers (#465)\nfunction click (node) {\n  try {\n    node.dispatchEvent(new MouseEvent('click'))\n  } catch (e) {\n    var evt = document.createEvent('MouseEvents')\n    evt.initMouseEvent('click', true, true, window, 0, 0, 0, 80,\n                          20, false, false, false, false, 0, null)\n    node.dispatchEvent(evt)\n  }\n}\n\n// Detect WebView inside a native macOS app by ruling out all browsers\n// We just need to check for 'Safari' because all other browsers (besides Firefox) include that too\n// https://www.whatismybrowser.com/guides/the-latest-user-agent/macos\nvar isMacOSWebView = _global.navigator && /Macintosh/.test(navigator.userAgent) && /AppleWebKit/.test(navigator.userAgent) && !/Safari/.test(navigator.userAgent)\n\nvar saveAs = _global.saveAs || (\n  // probably in some web worker\n  (typeof window !== 'object' || window !== _global)\n    ? function saveAs () { /* noop */ }\n\n  // Use download attribute first if possible (#193 Lumia mobile) unless this is a macOS WebView\n  : ('download' in HTMLAnchorElement.prototype && !isMacOSWebView)\n  ? function saveAs (blob, name, opts) {\n    var URL = _global.URL || _global.webkitURL\n    var a = document.createElement('a')\n    name = name || blob.name || 'download'\n\n    a.download = name\n    a.rel = 'noopener' // tabnabbing\n\n    // TODO: detect chrome extensions & packaged apps\n    // a.target = '_blank'\n\n    if (typeof blob === 'string') {\n      // Support regular links\n      a.href = blob\n      if (a.origin !== location.origin) {\n        corsEnabled(a.href)\n          ? download(blob, name, opts)\n          : click(a, a.target = '_blank')\n      } else {\n        click(a)\n      }\n    } else {\n      // Support blobs\n      a.href = URL.createObjectURL(blob)\n      setTimeout(function () { URL.revokeObjectURL(a.href) }, 4E4) // 40s\n      setTimeout(function () { click(a) }, 0)\n    }\n  }\n\n  // Use msSaveOrOpenBlob as a second approach\n  : 'msSaveOrOpenBlob' in navigator\n  ? function saveAs (blob, name, opts) {\n    name = name || blob.name || 'download'\n\n    if (typeof blob === 'string') {\n      if (corsEnabled(blob)) {\n        download(blob, name, opts)\n      } else {\n        var a = document.createElement('a')\n        a.href = blob\n        a.target = '_blank'\n        setTimeout(function () { click(a) })\n      }\n    } else {\n      navigator.msSaveOrOpenBlob(bom(blob, opts), name)\n    }\n  }\n\n  // Fallback to using FileReader and a popup\n  : function saveAs (blob, name, opts, popup) {\n    // Open a popup immediately do go around popup blocker\n    // Mostly only available on user interaction and the fileReader is async so...\n    popup = popup || open('', '_blank')\n    if (popup) {\n      popup.document.title =\n      popup.document.body.innerText = 'downloading...'\n    }\n\n    if (typeof blob === 'string') return download(blob, name, opts)\n\n    var force = blob.type === 'application/octet-stream'\n    var isSafari = /constructor/i.test(_global.HTMLElement) || _global.safari\n    var isChromeIOS = /CriOS\\/[\\d]+/.test(navigator.userAgent)\n\n    if ((isChromeIOS || (force && isSafari) || isMacOSWebView) && typeof FileReader !== 'undefined') {\n      // Safari doesn't allow downloading of blob URLs\n      var reader = new FileReader()\n      reader.onloadend = function () {\n        var url = reader.result\n        url = isChromeIOS ? url : url.replace(/^data:[^;]*;/, 'data:attachment/file;')\n        if (popup) popup.location.href = url\n        else location = url\n        popup = null // reverse-tabnabbing #460\n      }\n      reader.readAsDataURL(blob)\n    } else {\n      var URL = _global.URL || _global.webkitURL\n      var url = URL.createObjectURL(blob)\n      if (popup) popup.location = url\n      else location.href = url\n      popup = null // reverse-tabnabbing #460\n      setTimeout(function () { URL.revokeObjectURL(url) }, 4E4) // 40s\n    }\n  }\n)\n\n_global.saveAs = saveAs.saveAs = saveAs\n\nif (typeof module !== 'undefined') {\n  module.exports = saveAs;\n}\n","/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport '@spectrum-css/vars/dist/spectrum-global.css';\nimport '@spectrum-css/vars/dist/spectrum-medium.css';\nimport '@spectrum-css/vars/dist/spectrum-light.css';\nimport '@spectrum-css/vars/dist/spectrum-darkest.css';\n\nimport '@spectrum-css/page/dist/index-vars.css';\nimport '@spectrum-css/icon/dist/index-vars.css';\nimport '@spectrum-css/link/dist/index-vars.css';\nimport '@spectrum-css/alert/dist/index-vars.css';\nimport '@spectrum-css/radio/dist/index-vars.css';\nimport '@spectrum-css/sidenav/dist/index-vars.css';\nimport '@spectrum-css/dialog/dist/index-vars.css';\nimport '@spectrum-css/button/dist/index-vars.css';\nimport '@spectrum-css/badge/dist/index-vars.css';\nimport '@spectrum-css/actionbutton/dist/index-vars.css';\nimport '@spectrum-css/actiongroup/dist/index-vars.css';\nimport '@spectrum-css/divider/dist/index-vars.css';\nimport '@spectrum-css/fieldgroup/dist/index-vars.css';\nimport '@spectrum-css/textfield/dist/index-vars.css';\nimport '@spectrum-css/picker/dist/index-vars.css';\nimport '@spectrum-css/fieldlabel/dist/index-vars.css';\nimport '@spectrum-css/checkbox/dist/index-vars.css';\nimport '@spectrum-css/switch/dist/index-vars.css';\nimport '@spectrum-css/buttongroup/dist/index-vars.css';\nimport '@spectrum-css/tooltip/dist/index-vars.css';\nimport '@spectrum-css/slider/dist/index-vars.css';\nimport '@spectrum-css/tabs/dist/index-vars.css';\nimport '@spectrum-css/toast/dist/index-vars.css';\nimport '@spectrum-css/illustratedmessage/dist/index-vars.css';\nimport '@spectrum-css/typography/dist/index-vars.css';\nimport '@spectrum-css/progresscircle/dist/index-vars.css';\nimport '@spectrum-css/table/dist/index-vars.css';\nimport '@spectrum-css/progressbar/dist/index-vars.css';\n\nimport './scss/style.scss';\nimport './scss/charts.scss';\nimport './scss/colorinputs.scss';\nimport './scss/style.scss';\nimport './scss/components/articleCard.scss';\nimport './scss/components/colorPicker.scss';\nimport './scss/components/colorSlider.scss';\nimport './scss/components/dialog.scss';\nimport './scss/components/header.scss';\nimport './scss/components/highlightCode.scss';\nimport './scss/components/imageUploader.scss';\nimport './scss/components/outputSwatches.scss';\nimport './scss/components/panelAccordion.scss';\nimport './scss/components/popover.scss';\nimport './scss/components/sections.scss';\nimport './scss/components/selectBox.scss';\nimport './scss/components/statusLabel.scss';\nimport './scss/components/textfield.scss';\nimport './scss/components/toast.scss';\nimport './scss/components/tooltip.scss';\n\nimport '@adobe/focus-ring-polyfill';\nimport {pageLoader} from './js/pageLoader';\n\nimport * as Leo from '@adobe/leonardo-contrast-colors';\nimport loadIcons from 'loadicons';\nloadIcons('./spectrum-css-icons.svg');\nloadIcons('./spectrum-icons.svg');\n\n// Import local Javascript functions\nimport {_sequentialScale} from './js/initialSequentialScale';\nimport {_divergingScale} from './js/initialDivergingScale';\nimport {_qualitativeScale} from './js/initialQualitativeScale';\n\nimport {throttle} from './js/utils';\nimport {openPanelTab, openTab, openAppTab, openScaleTab, openSideNavItem} from './js/tabs';\n\nimport {colorScaleDiverging} from './js/colorScaleDiverging';\nimport {colorScaleSequential} from './js/colorScaleSequential';\nimport {colorScaleQualitative} from './js/colorScaleQualitative';\n\nimport toggleTooltip from './js/tooltip';\nimport {create3dModel} from './js/create3dModel';\nimport {createSVGswatches, downloadSwatches} from './js/createSVGswatches';\nimport {createXML, downloadXML} from './js/createXML';\n\nconst chroma = require('chroma-js');\nconst {extendChroma} = require('./js/chroma-plus');\n\nextendChroma(chroma);\n\nwindow.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (event) => {\n  if (event.matches) {\n    //dark mode\n    document.querySelector('body').classList.remove('spectrum--light');\n    document.querySelector('body').classList.add('spectrum--darkest');\n  } else {\n    //light mode\n    document.querySelector('body').classList.add('spectrum--light');\n    document.querySelector('body').classList.remove('spectrum--darkest');\n  }\n});\nconst mq = window.matchMedia('(prefers-color-scheme: dark)');\nif (mq.matches) {\n  //dark mode\n  document.querySelector('body').classList.add('spectrum--darkest');\n} else {\n  //light mode\n  document.querySelector('body').classList.add('spectrum--light');\n}\n\ndocument.getElementById('tabSequential').click();\n// Open default tab of \"charts\" for each color scale tab\ndocument.getElementById('tabsequentialDemo').click();\ndocument.getElementById('tabdivergingDemo').click();\ndocument.getElementById('tabqualitativeDemo').click();\n\ndocument.getElementById('welcome').click();\n\ncolorScaleSequential();\ncolorScaleDiverging();\ncolorScaleQualitative();\n\nwindow.onload = function () {\n  // let uri = window.location.toString();\n  // let cleanURL = uri.substring(0, uri.indexOf(\"?\"));\n\n  // window.history.replaceState({}, document.title, cleanURL);\n\n  // On window load, transition to remove page loader\n  pageLoader();\n};\n","/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {convertColorValue} from './utils';\nconst chroma = require('chroma-js');\nconst {extendChroma} = require('./chroma-plus');\nextendChroma(chroma);\n\nclass QualitativeScale {\n  constructor({sampleColors, keeperColors, output, cvdSupport}) {\n    this._sampleColors = sampleColors;\n    this._keeperColors = keeperColors;\n    this._output = output;\n    this._cvdSupport = cvdSupport;\n  }\n\n  set sampleColors(colors) {\n    this._sampleColors = colors;\n  }\n  get sampleColors() {\n    return this._sampleColors;\n  }\n\n  set keeperColors(colors) {\n    this._keeperColors = colors;\n  }\n  get keeperColors() {\n    return this._keeperColors;\n  }\n\n  set output(output) {\n    this._output = output;\n    // then run all keeper colors through conversion filter\n    let formattedColors = this._keeperColors.map((c) => {\n      return convertColorValue(c, output);\n    });\n    this._keeperColors = formattedColors;\n  }\n  get output() {\n    return this._output;\n  }\n\n  set cvdSupport(cvds) {\n    this._cvdSupport = cvds;\n  }\n}\n\nlet _qualitativeScale = new QualitativeScale({\n  sampleColors: [\n    '#ff7d67',\n    '#e83326',\n    '#ac0000',\n    '#680000',\n    '#f98517',\n    '#c85b00',\n    '#903900',\n    '#561e01',\n    '#c6a000',\n    '#997600',\n    '#6c4f00',\n    '#412c00',\n    '#72b622',\n    '#4f890e',\n    '#355e07',\n    '#1e3604',\n    '#33b983',\n    '#008c5c',\n    '#00603d',\n    '#0e3724',\n    '#5ba8f7',\n    '#1077f3',\n    '#0050ae',\n    '#002f64',\n    '#bf8cfc',\n    '#9b54f3',\n    '#7018d3',\n    '#3d137d',\n    '#ee74ee',\n    '#cc34cd',\n    '#970098',\n    '#551153',\n    '#ff7d67',\n    '#e83326',\n    '#ac0000',\n    '#680000',\n    '#f98517',\n    '#c85b00',\n    '#903900',\n    '#561e01',\n    '#c6a000',\n    '#997600',\n    '#6c4f00',\n    '#412c00',\n    '#72b622',\n    '#4f890e',\n    '#355e07',\n    '#1e3604',\n    '#33b983',\n    '#008c5c',\n    '#00603d',\n    '#0e3724',\n    '#5ba8f7',\n    '#1077f3',\n    '#0050ae',\n    '#002f64',\n    '#bf8cfc',\n    '#9b54f3',\n    '#7018d3',\n    '#3d137d',\n    '#ee74ee',\n    '#cc34cd',\n    '#970098',\n    '#551153'\n  ],\n  keeperColors: [],\n  output: 'HEX',\n  cvdSupport: ['protanopia', 'deuteranopia', 'tritanopia', 'achromatopsia']\n});\n\nmodule.exports = {\n  _qualitativeScale\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {addScaleKeyColor, addScaleKeyColorInput} from './scaleKeyColors';\nimport {themeRamp, themeRampKeyColors, updateRamps} from './ramps';\nimport {_sequentialScale} from './initialSequentialScale';\nimport {_divergingScale} from './initialDivergingScale';\nimport {createPaletteInterpolationCharts} from './createPaletteCharts';\nimport {createRGBchannelChart} from './createRGBchannelChart';\nimport {downloadSVGgradient} from './createSVGgradient';\nimport {createColorWheel, updateColorWheel, updateColorDots} from './colorWheel';\nimport {create3dModel} from './create3dModel';\nimport {createSamples} from './createSamples';\nimport {createDemos} from './createDemos';\nimport {createPanelReportTable} from './createPanelReportTable';\n\nconst chroma = require('chroma-js');\n\nfunction colorScaleDiverging(scaleType = 'diverging') {\n  /**\n   * Have to keep this manual changing of the diverging scale because the initial scale\n   *  does not output the colors properly. Unclear why, but for now this will work.\n   */\n  let defaultMiddleColor = '#FFFFE0';\n  _divergingScale.middleKey = defaultMiddleColor;\n  _divergingScale.distributeLightness = 'polynomial';\n\n  let defaultBackgroundColor;\n  const mq = window.matchMedia('(prefers-color-scheme: dark)');\n  if (mq.matches) {\n    //dark mode\n    defaultBackgroundColor = '#1d1d1d';\n    document.getElementById('main_sequential').classList.add('spectrum--darkest');\n  } else {\n    //light mode\n    defaultBackgroundColor = '#f8f8f8';\n    document.getElementById('main_sequential').classList.add('spectrum--light');\n  }\n\n  let downloadGradient = document.getElementById(`${scaleType}_downloadGradient`);\n  let chartsModeSelect = document.getElementById(`${scaleType}_chartsMode`);\n  let interpolationMode = document.getElementById(`${scaleType}_mode`);\n  let smoothWrapper = document.getElementById(`${scaleType}_smoothWrapper`);\n  let smooth = document.getElementById(`${scaleType}_smooth`);\n  let sampleNumber = document.getElementById(`${scaleType}Samples`);\n  let sampleOutput = document.getElementById(`${scaleType}_format`);\n  let quoteSwitch = document.getElementById(`${scaleType}paramStringQuotes`);\n  let PlotDestId = `${scaleType}ModelWrapper`;\n\n  let samples = sampleNumber.value;\n\n  const colorClass = _divergingScale;\n  const colorKeys = colorClass.colorKeys;\n\n  // If class is preset to smooth, check the smooth switch in the UI\n  if (colorClass.smooth === true) smooth.checked = true;\n\n  interpolationMode.value = colorClass.colorspace;\n\n  let gradientId = `${scaleType}_gradient`;\n  let buttonId = `${scaleType}_addKeyColor`;\n  let buttonStartId = `${scaleType}_addStartKeyColor`;\n  let buttonEndId = `${scaleType}_addEndKeyColor`;\n\n  const hasStartKeys = Promise.resolve(colorClass.startKeys);\n  const hasMiddleKey = Promise.resolve(colorClass.middleKey);\n  const hasEndKeys = Promise.resolve(colorClass.endKeys);\n  Promise.all([hasStartKeys, hasMiddleKey, hasEndKeys]).then((divergingKeys) => {\n    const starts = divergingKeys[0];\n    const middle = divergingKeys[1];\n    const ends = divergingKeys[2];\n\n    for (let i = 0; i < starts.length; i++) {\n      addScaleKeyColorInput(starts[i], buttonId, scaleType, i, 'start');\n    }\n    addScaleKeyColorInput(middle, buttonId, scaleType, 0, 'middle');\n    for (let i = 0; i < ends.length; i++) {\n      addScaleKeyColorInput(ends[i], buttonId, scaleType, i, 'end');\n    }\n  });\n\n  let colors = colorClass.colors;\n\n  themeRamp(colors, gradientId, '90');\n  themeRampKeyColors(colorKeys, gradientId, scaleType);\n\n  createRGBchannelChart(colors, `${scaleType}RGBchart`);\n  createPaletteInterpolationCharts([colorClass.startScale.colorsReversed, colorClass.endScale.colors], chartsModeSelect.value, scaleType);\n  create3dModel(PlotDestId, [colorClass], chartsModeSelect.value, scaleType);\n\n  createSamples(samples, scaleType);\n  createDemos(scaleType);\n\n  createColorWheel(chartsModeSelect.value, 50, scaleType);\n  updateColorDots(chartsModeSelect.value, scaleType);\n\n  let bgInput = document.getElementById(`scales_bgColor`);\n  bgInput.value = defaultBackgroundColor;\n\n  const color2 = colors[0];\n  const color1 = colors[colors.length - 1];\n  const color3 = colorClass.middleKey;\n  createPanelReportTable([color1, color3, color2], defaultBackgroundColor, scaleType, 'AA');\n\n  bgInput.addEventListener('input', (e) => {\n    // change <main> background\n    let value = e.target.value;\n    let wrapper = document.getElementById(`main_${scaleType}`);\n    wrapper.style.backgroundColor = value;\n    // toggle class based on lightness\n    let lightness = chroma(value).jch()[0];\n    if (lightness < 50) {\n      wrapper.classList.remove('spectrum--light');\n      wrapper.classList.add('spectrum--darkest');\n    } else {\n      wrapper.classList.remove('spectrum--darkest');\n      wrapper.classList.add('spectrum--light');\n    }\n    let level = document.getElementById(`scales_complianceLevel`).value;\n\n    createPanelReportTable([color1, color3, color2], value, scaleType, level);\n  });\n\n  const compliancePicker = document.getElementById(`scales_complianceLevel`);\n  compliancePicker.addEventListener('change', (e) => {\n    let level = e.target.value;\n    createPanelReportTable(null, null, scaleType, level);\n  });\n\n  interpolationMode.addEventListener('change', (e) => {\n    let colorspace = e.target.value;\n    colorClass.colorspace = colorspace;\n\n    updateRamps(colorClass, scaleType, scaleType);\n    createSamples(sampleNumber.value, scaleType);\n    updateColorDots(chartsModeSelect.value, scaleType);\n    createPaletteInterpolationCharts([colorClass.startScale.colorsReversed, colorClass.endScale.colors], chartsModeSelect.value, scaleType);\n    createDemos(scaleType);\n    create3dModel(PlotDestId, [colorClass], chartsModeSelect.value, scaleType);\n  });\n\n  smooth.addEventListener('change', (e) => {\n    colorClass.smooth = e.target.checked;\n    colors = colorClass.colors;\n\n    updateRamps(colorClass, scaleType, scaleType);\n    createPaletteInterpolationCharts([colorClass.startScale.colorsReversed, colorClass.endScale.colors], chartsModeSelect.value, scaleType);\n    updateColorDots(chartsModeSelect.value, scaleType);\n    createSamples(sampleNumber.value, scaleType);\n    createDemos(scaleType);\n    create3dModel(PlotDestId, [colorClass], chartsModeSelect.value, scaleType);\n  });\n\n  downloadGradient.addEventListener('click', (e) => {\n    const originalSwatches = colorClass.swatches;\n    const stops = 100;\n    colorClass.swatches = Number(stops);\n\n    let scaleName = document.getElementById(`${scaleType}_name`).value;\n    let filename = `${scaleName}_${scaleType}`;\n\n    const gradientColors = colorClass.colors;\n    setTimeout(() => {\n      downloadSVGgradient(gradientColors, colorClass.colorspace, filename);\n      colorClass.swatches = originalSwatches;\n    }, 500);\n  });\n\n  chartsModeSelect.addEventListener('change', (e) => {\n    createPaletteInterpolationCharts([colorClass.startScale.colorsReversed, colorClass.endScale.colors], chartsModeSelect.value, scaleType);\n    let lightness = e.target.value === 'HSV' ? 100 : e.target.value === 'HSLuv' ? 60 : 50;\n\n    updateColorWheel(e.target.value, lightness, true, null, scaleType);\n    create3dModel(PlotDestId, [colorClass], e.target.value, scaleType);\n  });\n\n  const hasStartButton = Promise.resolve(document.getElementById(buttonStartId));\n  const hasEndButton = Promise.resolve(document.getElementById(buttonEndId));\n  Promise.all([hasStartButton, hasEndButton]).then(() => {\n    document.getElementById(buttonStartId).addEventListener('click', (e) => {\n      addScaleKeyColor(scaleType, e, 'start');\n      updateColorDots(chartsModeSelect.value, scaleType);\n      createSamples(sampleNumber.value, scaleType);\n      createDemos(scaleType);\n      create3dModel(PlotDestId, [colorClass], chartsModeSelect.value, scaleType);\n    });\n    document.getElementById(buttonEndId).addEventListener('click', (e) => {\n      addScaleKeyColor(scaleType, e, 'end');\n      updateColorDots(chartsModeSelect.value, scaleType);\n      createSamples(sampleNumber.value, scaleType);\n      createDemos(scaleType);\n      create3dModel(PlotDestId, [colorClass], chartsModeSelect.value, scaleType);\n    });\n  });\n\n  sampleNumber.addEventListener('input', (e) => {\n    createSamples(e.target.value, scaleType);\n  });\n  sampleOutput.addEventListener('input', () => {\n    createSamples(sampleNumber.value, scaleType);\n  });\n  quoteSwitch.addEventListener('change', () => {\n    createSamples(sampleNumber.value, scaleType);\n  });\n}\n\nmodule.exports = {\n  colorScaleDiverging\n};\n","/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {randomId, removeElementsByClass, throttle} from './utils';\nimport {updateRamps} from './ramps';\nimport {updateColorDots} from './colorWheel';\nimport {createSamples} from './createSamples';\nimport {createDemos} from './createDemos';\nimport {create3dModel} from './create3dModel';\nimport {createPanelReportTable} from './createPanelReportTable';\nconst chroma = require('chroma-js');\nconst {extendChroma} = require('./chroma-plus');\n\nfunction addScaleKeyColorInput(c, thisId = this.id, scaleType, index, scalePosition) {\n  let sampleNumber = document.getElementById(`${scaleType}Samples`);\n  let chartsModeSelect = document.getElementById(`${scaleType}_chartsMode`);\n  let currentColor;\n  if (scaleType === 'sequential') currentColor = _sequentialScale;\n  if (scaleType === 'diverging') currentColor = _divergingScale;\n  let currentKeys = scaleType === 'sequential' ? currentColor.colorKeys : scalePosition === 'start' ? currentColor.startKeys : scalePosition === 'end' ? currentColor.endKeys : currentColor.middleKey;\n  let parent = thisId.replace('_addKeyColor', '').replace('_addStartKeyColor', '').replace('_addEndKeyColor', '');\n\n  let concatString = scaleType === 'theme' || scaleType === 'sequential' ? '_keyColors' : `_${scalePosition}KeyColors`;\n\n  let destId = parent.concat(concatString);\n\n  let dest = document.getElementById(destId);\n  let div = document.createElement('div');\n\n  let randId = randomId();\n  if (scalePosition === 'middle') {\n    div.className = `keyColor keyColor-${scaleType} keyColor-${scaleType}-${scalePosition}`;\n  } else {\n    div.className = `keyColor keyColor-${scaleType}`;\n  }\n  div.id = randId + '-item';\n  let sw = document.createElement('input');\n  sw.type = 'color';\n  sw.value = c;\n\n  sw.addEventListener(\n    'input',\n    throttle((e) => {\n      // Replace current indexed value from color keys with new value from color input field\n      c = e.target.value;\n\n      if (scaleType === 'sequential') {\n        // let currentKeys = currentColor.colorKeys;\n        currentKeys.splice(index, 1, c);\n        currentColor.colorKeys = currentKeys;\n      }\n      if (scaleType === 'diverging') {\n        if (scalePosition === 'start') {\n          // let currentKeys = currentColor.startKeys;\n          currentKeys.splice(index, 1, c);\n          currentColor.startKeys = currentKeys;\n        }\n        if (scalePosition === 'end') {\n          // let currentKeys = currentColor.endKeys;\n          currentKeys.splice(index, 1, c);\n          currentColor.endKeys = currentKeys;\n        }\n        if (scalePosition === 'middle') {\n          currentColor.middleKey = c;\n        }\n      }\n\n      updateRamps(currentColor, parent, scaleType);\n      updateColorDots(chartsModeSelect.value, scaleType);\n      createSamples(sampleNumber.value, scaleType);\n      if (scaleType === 'sequential' || scaleType === 'diverging') {\n        createPanelReportTable(null, null, scaleType);\n      }\n    }, 10)\n  );\n\n  sw.addEventListener(\n    'input',\n    throttle(() => {\n      createDemos(scaleType);\n      create3dModel(`${scaleType}ModelWrapper`, [currentColor], chartsModeSelect.value, scaleType);\n    }, 250)\n  );\n\n  sw.className = 'keyColor-Item';\n  sw.id = randId + '-sw';\n  sw.style.backgroundColor = c;\n  div.appendChild(sw);\n\n  let isDisabledClass;\n  if (scaleType === 'sequential') isDisabledClass = currentKeys.length > 2 ? '' : 'is-disabled';\n  else isDisabledClass = currentKeys.length > 1 ? '' : 'is-disabled';\n\n  if (scalePosition !== 'middle') {\n    let button = document.createElement('button');\n    button.className =\n      scaleType === 'diverging' ? `spectrum-ActionButton spectrum-ActionButton--sizeM removeKeyColor-${scaleType}-${scalePosition} ${isDisabledClass}` : `spectrum-ActionButton spectrum-ActionButton--sizeM removeKeyColor-${scaleType} ${isDisabledClass}`;\n    button.innerHTML = `\n    <svg class=\"spectrum-Icon spectrum-Icon--sizeS\" focusable=\"false\" aria-hidden=\"true\" aria-label=\"Delete\">\n      <use xlink:href=\"#spectrum-icon-18-Delete\" />\n    </svg>`;\n\n    button.addEventListener('click', function (e) {\n      let sampleNumber = document.getElementById(`${scaleType}Samples`);\n      let samples = sampleNumber.value;\n      replaceScaleKeyInputsFromClass(thisId, scaleType, index, scalePosition);\n      updateColorDots(chartsModeSelect.value, scaleType);\n      createSamples(samples, scaleType);\n    });\n    div.appendChild(button);\n  }\n\n  dest.appendChild(div);\n}\n\nfunction replaceScaleKeyInputsFromClass(id, scaleType, index, scalePosition) {\n  let smoothWrapper = document.getElementById(`${scaleType}_smoothWrapper`);\n  let smooth = document.getElementById(`${scaleType}_smooth`);\n\n  let parentId = id.replace('_addKeyColor', '');\n\n  let currentColor, colorKeys;\n  if (scaleType === 'sequential') {\n    currentColor = _sequentialScale;\n    colorKeys = currentColor.colorKeys;\n  }\n  if (scaleType === 'diverging') {\n    currentColor = _divergingScale;\n    colorKeys = scalePosition === 'start' ? currentColor.startKeys : currentColor.endKeys;\n  }\n\n  colorKeys.splice(index, 1);\n  // reassign new array to color class\n  if (scaleType === 'sequential') {\n    currentColor.colorKeys = colorKeys;\n  }\n  if (scaleType === 'diverging') {\n    if (scalePosition === 'start') currentColor.startKeys = colorKeys;\n    if (scalePosition === 'end') currentColor.endKeys = colorKeys;\n  }\n\n  if (scaleType === 'sequential') {\n    removeElementsByClass(`keyColor-${scaleType}`);\n  } else {\n    if (scalePosition === 'start') {\n      // only remove respective inputs\n      let parentDest = document.getElementById('diverging_startKeyColors');\n      removeElementsByClass(`keyColor-${scaleType}`, parentDest);\n    } else {\n      // only remove respective inputs\n      let parentDest = document.getElementById('diverging_endKeyColors');\n      removeElementsByClass(`keyColor-${scaleType}`, parentDest);\n    }\n  }\n\n  // If new color keys length is less than three, force\n  // smoothing to false, and update UI toggle, as smooth\n  // option should be removed when only two key colors are\n  // present... colorscale becomes all black.\n  if (colorKeys.length < 3) {\n    smooth.checked = false;\n    currentColor.smooth = false;\n  }\n\n  if (scaleType === 'sequential') {\n    currentColor.colorKeys.forEach((key, i) => {\n      addScaleKeyColorInput(key, id, scaleType, i, scalePosition);\n    });\n  } else {\n    if (scalePosition === 'start') {\n      currentColor.startKeys.forEach((key, i) => {\n        addScaleKeyColorInput(key, id, scaleType, i, scalePosition);\n      });\n    } else {\n      currentColor.endKeys.forEach((key, i) => {\n        addScaleKeyColorInput(key, id, scaleType, i, scalePosition);\n      });\n    }\n  }\n  // Update gradient\n  updateRamps(currentColor, parentId, scaleType);\n\n  let targetClass, buttons;\n  if (scaleType === 'diverging') {\n    targetClass = `removeKeyColor-${scaleType}-${scalePosition}`;\n    buttons = document.getElementsByClassName(targetClass);\n  } else {\n    targetClass = `removeKeyColor-${scaleType}`;\n    buttons = document.getElementsByClassName(targetClass);\n  }\n  if (colorKeys.length >= 2) {\n    for (let i = 0; i < buttons.length; i++) {\n      buttons[i].classList.remove('is-disabled');\n      buttons[i].disabled = false;\n    }\n  } else {\n    for (let i = 0; i < buttons.length; i++) {\n      buttons[i].classList.add('is-disabled');\n      buttons[i].disabled = true;\n    }\n  }\n\n  if (colorKeys.length >= 3) {\n    smooth.disabled = false;\n    smoothWrapper.classList.remove('is-disabled');\n  } else {\n    smooth.disabled = true;\n    smoothWrapper.classList.add('is-disabled');\n  }\n}\n\nfunction addScaleKeyColor(scaleType, e, position) {\n  let smoothWrapper = document.getElementById(`${scaleType}_smoothWrapper`);\n  let smooth = document.getElementById(`${scaleType}_smooth`);\n  let thisId = e.target.id;\n  let parentId = thisId.replace('_addKeyColor', '');\n\n  let currentColor = scaleType === 'sequential' ? _sequentialScale : _divergingScale; // TODO: replace with _diverging when available\n  let currentKeys = scaleType === 'sequential' ? currentColor.colorKeys : position === 'start' ? currentColor.startKeys : currentColor.endKeys;\n\n  let lastIndex = currentKeys.length;\n  if (!lastIndex) lastIndex = 0;\n  let lastColor = lastIndex > 0 ? chroma(currentKeys[lastIndex - 1]).hsluv() : chroma(currentKeys[0]).hsluv();\n  let lastColorLightness = lastColor[2];\n  let fCtintHalf = (100 - lastColorLightness) / 3 + lastColorLightness;\n  let fCshadeHalf = lastColorLightness / 2;\n\n  let c = lastColorLightness >= 50 ? chroma.hsluv(lastColor[0], lastColor[1], fCshadeHalf) : chroma.hsluv(lastColor[0], lastColor[1], fCtintHalf);\n  c = c.hex();\n  currentKeys.push(c);\n\n  // Update color class arguments via the theme class\n  if (scaleType === 'sequential') {\n    currentColor.colorKeys = currentKeys;\n\n    removeElementsByClass(`keyColor-${scaleType}`);\n  } else {\n    if (position === 'start') {\n      currentColor.startKeys = currentKeys;\n      // only remove respective inputs\n      let parentDest = document.getElementById('diverging_startKeyColors');\n      removeElementsByClass(`keyColor-${scaleType}`, parentDest);\n    } else {\n      currentColor.endKeys = currentKeys;\n      // only remove respective inputs\n      let parentDest = document.getElementById('diverging_endKeyColors');\n      removeElementsByClass(`keyColor-${scaleType}`, parentDest);\n    }\n  }\n\n  if (scaleType === 'sequential') {\n    currentColor.colorKeys.forEach((key, i) => {\n      addScaleKeyColorInput(key, thisId, scaleType, i, position);\n    });\n  } else {\n    if (position === 'start') {\n      currentColor.startKeys.forEach((key, i) => {\n        addScaleKeyColorInput(key, thisId, scaleType, i, position);\n      });\n    } else {\n      currentColor.endKeys.forEach((key, i) => {\n        addScaleKeyColorInput(key, thisId, scaleType, i, position);\n      });\n    }\n  }\n\n  // Update gradient\n  updateRamps(currentColor, parentId, scaleType);\n\n  if (currentKeys.length >= 3) {\n    smooth.disabled = false;\n    smoothWrapper.classList.remove('is-disabled');\n  } else {\n    smooth.disabled = true;\n    smoothWrapper.classList.add('is-disabled');\n  }\n}\n\nfunction clearAllColors(e) {\n  let targetId = e.target.id;\n  let parentId = targetId.replace('_clearAllColors', '');\n  let keyColorsId = targetId.replace('_clearAllColors', '_keyColors');\n  document.getElementById(keyColorsId).innerHTML = ' ';\n\n  let color = getColorClassById(parentId);\n  _theme.updateColor = {color: color.name, colorKeys: ['#000000']};\n\n  updateRamps();\n}\n\nwindow.clearAllColors = clearAllColors;\n\nmodule.exports = {\n  addScaleKeyColor,\n  addScaleKeyColorInput,\n  clearAllColors\n};\n","/*\nCopyright 2019 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {_sequentialScale} from './initialSequentialScale';\nimport {_divergingScale} from './initialDivergingScale';\nimport {createHtmlElement} from './createHtmlElement';\nimport hljs from 'highlight.js/lib/core';\nimport javascript from 'highlight.js/lib/languages/javascript';\nimport css from 'highlight.js/lib/languages/css';\nimport {cssColorToRgb} from './utils';\nhljs.registerLanguage('javascript', javascript);\nhljs.registerLanguage('css', css);\n\nfunction createSamples(samples, scaleType) {\n  const colorClass = scaleType === 'sequential' ? _sequentialScale : _divergingScale;\n  const originalSwatches = colorClass.swatches;\n  const originalOutput = colorClass.output;\n  const outputFormatPicker = document.getElementById(`${scaleType}_format`);\n  const output = outputFormatPicker.value;\n  const quoteSwitch = document.getElementById(`${scaleType}paramStringQuotes`);\n  const quotes = quoteSwitch.checked;\n  // reassign new swatch value\n  colorClass.swatches = samples;\n  const panelOutputContent = document.getElementById(`${scaleType}ColorScaleOutput`);\n  panelOutputContent.innerHTML = ' ';\n\n  let samplesWrapper = document.getElementById(`${scaleType}SampleSwatches`);\n  samplesWrapper.innerHTML = ' ';\n\n  let sampleColors = colorClass.colors;\n  for (let i = 0; i < samples; i++) {\n    createHtmlElement({\n      element: 'div',\n      className: 'sampleSwatch',\n      styles: {\n        backgroundColor: sampleColors[i]\n      },\n      appendTo: `${scaleType}SampleSwatches`\n    });\n  }\n\n  colorClass.output = output;\n  sampleColors = colorClass.colors;\n\n  colorClass.samples =\n    colorClass.output === 'HEX' || colorClass.output === 'RGB'\n      ? sampleColors\n      : sampleColors.map((c) => {\n          return cssColorToRgb(c);\n        });\n\n  let colorvalueString = quotes\n    ? sampleColors\n        .map((c) => {\n          return `\"${c}\"`;\n        })\n        .toString()\n        .replaceAll(',', ', ')\n    : sampleColors.toString().replaceAll(',', ', ');\n  panelOutputContent.innerHTML = colorvalueString;\n\n  // Reset color class to original swatches\n  colorClass.swatches = originalSwatches;\n  colorClass.output = originalOutput;\n}\n\nmodule.exports = {\n  createSamples\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {heatmap} from './demos/demo_heatmap';\nimport {choropleth} from './demos/demo_choropleth';\nimport {chord} from './demos/demo_chord';\nimport {donut} from './demos/demo_donut';\nimport {stackedArea} from './demos/demo_stackedArea';\nimport {scatter} from './demos/demo_scatter';\nimport {density} from './demos/demo_density';\n\nfunction createDemos(scaleType, colors) {\n  const destHeatmap = document.getElementById(`${scaleType}Heatmap`);\n  const destChoropleth = document.getElementById(`${scaleType}Choropleth`);\n  const destChord = document.getElementById(`${scaleType}Chord`);\n  const destStackedArea = document.getElementById(`${scaleType}StackedArea`);\n  const destDonut = document.getElementById(`${scaleType}Donut`);\n  const destScatter = document.getElementById(`${scaleType}Scatter`);\n\n  let dests;\n\n  if (scaleType === 'qualitative') {\n    dests = [destChord, destStackedArea, destDonut];\n\n    chord(scaleType, colors);\n    stackedArea(scaleType, colors);\n    donut(scaleType, colors);\n  } else {\n    dests = [destHeatmap, destChoropleth, destScatter];\n    heatmap(scaleType);\n    scatter(scaleType);\n    density(scaleType);\n    choropleth(scaleType);\n  }\n\n  setTimeout(() => {\n    for (let i = 0; i < dests.length; i++) {\n      while (dests[i].childNodes.length > 1) {\n        dests[i].removeChild(dests[i].firstChild);\n      }\n    }\n  }, 300);\n}\n\nmodule.exports = {\n  createDemos\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport d3 from '../d3';\nimport {_divergingScale} from '../initialDivergingScale';\nimport {_sequentialScale} from '../initialSequentialScale';\n\nfunction heatmap(scaleType) {\n  const colorClass = scaleType === 'sequential' ? _sequentialScale : _divergingScale;\n  // set the dimensions and margins of the graph\n  var margin = {top: 30, right: 30, bottom: 30, left: 30},\n    width = 250 - margin.left - margin.right,\n    height = 250 - margin.top - margin.bottom;\n\n  // append the svg object to the body of the page\n  var svg = d3\n    .select(`#${scaleType}Heatmap`)\n    .append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  // Labels of row and columns\n  var myGroups = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J'];\n  var myVars = ['v1', 'v2', 'v3', 'v4', 'v5', 'v6', 'v7', 'v8', 'v9', 'v10'];\n\n  // Build X scales and axis:\n  var x = d3.scaleBand().range([0, width]).domain(myGroups).padding(0.01);\n  svg\n    .append('g')\n    .attr('transform', 'translate(0,' + height + ')')\n    .call(d3.axisBottom(x));\n\n  // Build X scales and axis:\n  var y = d3.scaleBand().range([height, 0]).domain(myVars).padding(0.01);\n  svg.append('g').call(d3.axisLeft(y));\n\n  colorClass.swatches = 100;\n  var myColor = colorClass.colorFunction;\n\n  d3.csv('https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/heatmap_data.csv').then(function (data) {\n    svg\n      .selectAll()\n      .data(data, function (d) {\n        return d.group + ':' + d.variable;\n      })\n      .join('rect')\n      .attr('x', function (d) {\n        return x(d.group);\n      })\n      .attr('y', function (d) {\n        return y(d.variable);\n      })\n      .attr('width', x.bandwidth())\n      .attr('height', y.bandwidth())\n      .style('fill', function (d) {\n        return myColor(d.value).hex();\n      });\n  });\n}\n\nmodule.exports = {\n  heatmap\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport d3 from '../d3';\nimport {_divergingScale} from '../initialDivergingScale';\nimport {_sequentialScale} from '../initialSequentialScale';\n\nfunction choropleth(scaleType) {\n  const colorClass = scaleType === 'sequential' ? _sequentialScale : _divergingScale;\n  const originalSwatches = colorClass.swatches;\n  colorClass.swatches = 7;\n  // The svg\n  var margin = {top: 30, right: 30, bottom: 30, left: 30},\n    width = 700 - margin.left - margin.right,\n    height = 350 - margin.top - margin.bottom;\n\n  var svg = d3\n    .select(`#${scaleType}Choropleth`)\n    .append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g');\n  // .attr(\"transform\",\n  //       \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n  // Map and projection\n  const path = d3.geoPath();\n  const projection = d3\n    .geoNaturalEarth1()\n    .scale(100)\n    .center([0, -10])\n    .translate([width / 2.5, height / 1.75]);\n\n  // Data and color scale\n  let data = new Map();\n  const colorScale = d3.scaleThreshold().domain([100000, 1000000, 10000000, 30000000, 100000000, 500000000]).range(colorClass.colors);\n  // const colorScale = colorClass.colorFunction;\n\n  // Load external data and boot\n  Promise.all([\n    d3.json('https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson'),\n    d3.csv('https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world_population.csv', function (d) {\n      data.set(d.code, +d.pop);\n    })\n  ]).then(function (loadData) {\n    let topo = loadData[0];\n\n    // Draw the map\n    svg\n      .append('g')\n      .selectAll('path')\n      .data(topo.features)\n      .join('path')\n      // draw each country\n      .attr('d', d3.geoPath().projection(projection))\n      // set the color of each country\n      .attr('fill', function (d) {\n        d.total = data.get(d.id) || 0;\n        return colorScale(d.total);\n      });\n  });\n\n  colorClass.swatches = originalSwatches;\n}\n\nmodule.exports = {\n  choropleth\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport d3 from '../d3';\nimport {_divergingScale} from '../initialDivergingScale';\nimport {_sequentialScale} from '../initialSequentialScale';\n\nfunction chord(scaleType, colors) {\n  const colorClass = scaleType === 'sequential' ? _sequentialScale : _divergingScale;\n  const originalSwatches = colorClass.swatches;\n  colorClass.swatches = 4;\n\n  const width = 250;\n  const height = 250;\n  const radius = 100;\n  const outerRadius = radius + 10;\n\n  // create the svg area\n  var svg = d3\n    .select(`#${scaleType}Chord`)\n    .append('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .append('g')\n    .attr('transform', `translate(${width / 2}, ${height / 2})`);\n\n  // create a matrix\n  var matrix = [\n    [0, 5871, 8916, 2868],\n    [1951, 0, 2060, 6171],\n    [8010, 16145, 0, 8045],\n    [1013, 990, 940, 0]\n  ];\n\n  // 4 groups, so create a vector of 4 colors\n  if (!colors) colors = colorClass.colors;\n\n  // give this matrix to d3.chord(): it will calculates all the info we need to draw arc and ribbon\n  var res = d3.chord().padAngle(0.05).sortSubgroups(d3.descending)(matrix);\n\n  // add the groups on the outer part of the circle\n  svg\n    .datum(res)\n    .append('g')\n    .selectAll('g')\n    .data(function (d) {\n      return d.groups;\n    })\n    .enter()\n    .append('g')\n    .append('path')\n    .style('fill', function (d, i) {\n      return colors[i];\n    })\n    .style('stroke', 'black')\n    .attr('d', d3.arc().innerRadius(radius).outerRadius(outerRadius));\n\n  // Add the links between groups\n  svg\n    .datum(res)\n    .append('g')\n    .selectAll('path')\n    .data(function (d) {\n      return d;\n    })\n    .enter()\n    .append('path')\n    .attr('d', d3.ribbon().radius(radius))\n    .style('fill', function (d) {\n      return colors[d.source.index];\n    }) // colors depend on the source group. Change to target otherwise.\n    .style('stroke', 'black');\n\n  colorClass.swatches = originalSwatches;\n}\n\nmodule.exports = {\n  chord\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport d3 from '../d3';\n\nfunction donut(scaleType, colors) {\n  // set the dimensions and margins of the graph\n  var width = 250;\n  let height = 250;\n  let margin = 80;\n\n  // The radius of the pieplot is half the width or half the height (smallest one). I subtract a bit of margin.\n  var radius = Math.min(width, height) / 2 - margin;\n\n  // append the svg object to the div called 'my_dataviz'\n  var svg = d3\n    .select(`#${scaleType}Donut`)\n    .append('svg')\n    .attr('width', width)\n    .attr('height', height)\n    .append('g')\n    .attr('transform', 'translate(' + width / 2 + ',' + height / 2 + ')');\n\n  // Create dummy data\n  var data = {\n    a: 9,\n    b: 18,\n    c: 24,\n    d: 8,\n    e: 7,\n    f: 5,\n    g: 2,\n    h: 3,\n    i: 3\n  };\n\n  // set the color scale\n  var color = d3.scaleOrdinal().domain(data).range(colors);\n\n  // Compute the position of each group on the pie:\n  var pie = d3.pie().value(function (d) {\n    return d.value;\n  });\n  var data_ready = pie(d3.entries(data));\n\n  // Build the pie chart: Basically, each part of the pie is a path that we build using the arc function.\n  svg\n    .selectAll('whatever')\n    .data(data_ready)\n    .enter()\n    .append('path')\n    .attr(\n      'd',\n      d3\n        .arc()\n        .innerRadius(100) // This is the size of the donut hole\n        .outerRadius(radius)\n    )\n    .attr('fill', function (d) {\n      return color(d.data.key);\n    })\n    .attr('stroke', 'black')\n    .style('stroke-width', '1px');\n}\n\nmodule.exports = {\n  donut\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport d3 from '../d3';\n\nfunction stackedArea(scaleType, colors) {\n  // set the dimensions and margins of the graph\n  var margin = {top: 20, right: 30, bottom: 30, left: 55},\n    width = 600 - margin.left - margin.right,\n    height = 250 - margin.top - margin.bottom;\n\n  // append the svg object to the body of the page\n  var svg = d3\n    .select(`#${scaleType}StackedArea`)\n    .append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  // Parse the Data\n  d3.csv('https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/5_OneCatSevNumOrdered_wide.csv').then(function (data) {\n    // List of groups = header of the csv files\n    var keys = data.columns.slice(1);\n\n    // Add X axis\n    var x = d3\n      .scaleLinear()\n      .domain(\n        d3.extent(data, function (d) {\n          return d.year;\n        })\n      )\n      .range([0, width]);\n    svg\n      .append('g')\n      .attr('transform', 'translate(0,' + height + ')')\n      .call(d3.axisBottom(x).ticks(5));\n\n    // Add Y axis\n    var y = d3.scaleLinear().domain([0, 200000]).range([height, 0]);\n    svg.append('g').call(d3.axisLeft(y));\n\n    // color palette\n    var color = d3.scaleOrdinal().domain(keys).range(colors);\n\n    //stack the data?\n    var stackedData = d3.stack().keys(keys)(data);\n    //console.log(\"This is the stack result: \", stackedData)\n\n    // Show the areas\n    svg\n      .selectAll('mylayers')\n      .data(stackedData)\n      .enter()\n      .append('path')\n      .style('fill', function (d) {\n        return color(d.key);\n      })\n      .attr(\n        'd',\n        d3\n          .area()\n          .x(function (d, i) {\n            return x(d.data.year);\n          })\n          .y0(function (d) {\n            return y(d[0]);\n          })\n          .y1(function (d) {\n            return y(d[1]);\n          })\n      );\n  });\n}\n\nmodule.exports = {\n  stackedArea\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport d3 from '../d3';\nimport {_divergingScale} from '../initialDivergingScale';\nimport {_sequentialScale} from '../initialSequentialScale';\n\nfunction scatter(scaleType) {\n  const colorClass = scaleType === 'sequential' ? _sequentialScale : _divergingScale;\n\n  // set the dimensions and margins of the graph\n  var margin = {top: 30, right: 30, bottom: 30, left: 60},\n    width = 350 - margin.left - margin.right,\n    height = 250 - margin.top - margin.bottom;\n\n  var myColor = colorClass.colorFunction;\n\n  // append the svg object to the body of the page\n  var svg = d3\n    .select(`#${scaleType}Scatter`)\n    .append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')');\n\n  //Read the data\n  d3.csv('https://raw.githubusercontent.com/holtzy/data_to_viz/master/Example_dataset/2_TwoNum.csv').then(function (data) {\n    // Add X axis\n    var x = d3.scaleLinear().domain([0, 4000]).range([0, width]);\n    svg\n      .append('g')\n      .attr('transform', 'translate(0,' + height + ')')\n      .call(d3.axisBottom(x));\n\n    // Add Y axis\n    var y = d3.scaleLinear().domain([0, 500000]).range([height, 0]);\n    svg.append('g').call(d3.axisLeft(y));\n\n    // Add dots\n    svg\n      .append('g')\n      .selectAll('dot')\n      .data(data)\n      .enter()\n      .append('circle')\n      .attr('cx', function (d) {\n        return x(d.GrLivArea);\n      })\n      .attr('cy', function (d) {\n        return y(d.SalePrice);\n      })\n      .attr('r', 1.5)\n      .style('fill', function (d) {\n        return myColor(d.SalePrice / 5000);\n      });\n  });\n}\n\nmodule.exports = {\n  scatter\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport d3 from '../d3';\n// import * as d3hexbin from 'd3-hexbin';\nimport {_divergingScale} from '../initialDivergingScale';\nimport {_sequentialScale} from '../initialSequentialScale';\n// Object.assign(d3, d3hexbin);\n\nfunction density(scaleType) {\n  const colorClass = scaleType === 'sequential' ? _sequentialScale : _divergingScale;\n\n  // set the dimensions and margins of the graph\n  const margin = {top: 10, right: 30, bottom: 30, left: 40},\n    width = 460 - margin.left - margin.right,\n    height = 400 - margin.top - margin.bottom;\n\n  // append the svg object to the body of the page\n  const svg = d3\n    .select(`${scaleType}Hexbin`)\n    .append('svg')\n    .attr('width', width + margin.left + margin.right)\n    .attr('height', height + margin.top + margin.bottom)\n    .append('g')\n    .attr('transform', `translate(${margin.left},${margin.top})`);\n\n  // read data\n  d3.csv('https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/data_for_density2d.csv').then(function (data) {\n    // Add X axis\n    const x = d3\n      .scaleLinear()\n      .domain([5, 20])\n      .range([margin.left, width - margin.right]);\n    svg.append('g').attr('transform', `translate(0, ${height})`).call(d3.axisBottom(x));\n\n    // Add Y axis\n    const y = d3\n      .scaleLinear()\n      .domain([5, 25])\n      .range([height - margin.bottom, margin.top]);\n    svg.append('g').call(d3.axisLeft(y));\n\n    // Prepare a color palette\n    const color = d3\n      .scaleLinear()\n      .domain([0, 1]) // Points per square pixel.\n      .range(['white', '#69b3a2']);\n\n    // compute the density data\n    const densityData = d3\n      .contourDensity()\n      .x(function (d) {\n        return x(d.x);\n      })\n      .y(function (d) {\n        return y(d.y);\n      })\n      .size([width, height])\n      .bandwidth(20)(data);\n\n    // show the shape!\n    svg\n      .insert('g', 'g')\n      .selectAll('path')\n      .data(densityData)\n      .enter()\n      .append('path')\n      .attr('d', d3.geoPath())\n      .attr('fill', function (d) {\n        return color(d.value);\n      });\n  });\n}\n\nmodule.exports = {\n  density\n};\n","/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport * as Leo from '@adobe/leonardo-contrast-colors';\nimport {createTable} from './createTable';\nimport {round, getDifference} from './utils';\nconst chroma = require('chroma-js');\n\nfunction createPanelReportTable(colors, background, scaleType, level) {\n  if (!colors) {\n    const colorClass = scaleType === 'sequential' ? _sequentialScale : _divergingScale;\n    let scaleColors = colorClass.colors;\n    if (scaleType === 'sequential') {\n      colors = [scaleColors[0], scaleColors[scaleColors.length - 1]];\n    } else {\n      colors = [scaleColors[0], colorClass.middleKey, scaleColors[scaleColors.length - 1]];\n    }\n  }\n  if (!background) {\n    background = document.getElementById(`scales_bgColor`).value;\n  }\n  if (scaleType && !level) {\n    let compliancePicker = document.getElementById(`scales_complianceLevel`);\n    level = compliancePicker.value;\n  }\n\n  let bgArray = chroma(background).rgb();\n  const minimumThreshold = 11;\n  const WCAGmin = level === 'AA' ? 3 : 4.5;\n\n  let reportWrapper = document.getElementById(`${scaleType}_a11yTable`);\n  reportWrapper.innerHTML = ' ';\n\n  let headers = ['Compared colors', 'Preview', 'Status', 'Contrast', 'Color difference'];\n  let rows = [];\n\n  for (let i = 0; i < colors.length; i++) {\n    let fgArray = chroma(colors[i]).rgb();\n    let contrast = Leo.contrast(fgArray, bgArray);\n    if (contrast < 0) contrast = contrast * -1;\n\n    let deltaE = getDifference(colors[i], background);\n    let meterPercent = round(deltaE, 2);\n\n    let uiClass = contrast < WCAGmin || deltaE < minimumThreshold ? 'negative' : 'positive';\n    let uiStatus = contrast < WCAGmin || deltaE < minimumThreshold ? 'Fail' : 'Pass';\n\n    let meterClass = deltaE < minimumThreshold ? 'is-negative' : 'is-positive';\n    let color1;\n    if (scaleType === 'sequential') {\n      color1 = i === 0 ? 'Start color' : 'End color';\n    } else {\n      color1 = i === 0 ? 'Start color' : i === 1 ? 'Middle color' : 'End color';\n    }\n    let color2 = 'Background';\n\n    let rowItem = [\n      `${color1} vs ${color2}`,\n      `<div class=\"dualSwatch\">\n        <div class=\"swatch\" style=\"background-color: ${colors[i]}\"></div>\n        <div class=\"swatch\" style=\"background-color: ${background}\"></div>\n      </div>`,\n      `<span class=\"spectrum-Badge spectrum-Badge--sizeS spectrum-Badge--${uiClass}\">${uiStatus}</span>`,\n      `<span class=\"spectrum-Body spectrum-Body--sizeM\">${round(contrast, 2)}:1</span>`,\n      `<div\">\n        <div class=\"spectrum-ProgressBar spectrum-ProgressBar--sizeM deltaE-meter ${meterClass}\" value=\"${meterPercent}\" role=\"progressbar\" aria-valuenow=\"50\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n          <div class=\"spectrum-FieldLabel spectrum-FieldLabel--sizeM spectrum-ProgressBar-label\">Delta E</div>\n          <div class=\"spectrum-FieldLabel spectrum-FieldLabel--sizeM spectrum-ProgressBar-percentage\">${meterPercent}</div>\n          <div class=\"spectrum-ProgressBar-track\">\n            <div class=\"spectrum-ProgressBar-fill\" style=\"width: ${meterPercent}%;\"></div>\n          </div>\n        </div>\n      </div>`\n    ];\n    rows.push(rowItem);\n  }\n\n  // Duplicate same process against the two input colors themselves...\n  if (scaleType === 'sequential') {\n    let fgArray = chroma(colors[0]).rgb();\n    let altArray = chroma(colors[1]).rgb();\n    let contrast = Leo.contrast(fgArray, altArray);\n    if (contrast < 0) contrast = contrast * -1;\n\n    let deltaE = getDifference(colors[0], colors[1]);\n    let meterPercent = round(deltaE, 2);\n    let meterClass = deltaE < minimumThreshold ? 'is-negative' : 'is-positive';\n\n    let uiClass = contrast < WCAGmin || deltaE < minimumThreshold ? 'negative' : 'positive';\n    let uiStatus = contrast < WCAGmin || deltaE < minimumThreshold ? 'Fail' : 'Pass';\n    let color1 = 'Start color';\n    let color2 = 'End color';\n\n    let rowItem = [\n      `${color1} vs ${color2}`,\n      `<div class=\"dualSwatch\">\n        <div class=\"swatch\" style=\"background-color: ${colors[0]}\"></div>\n        <div class=\"swatch\" style=\"background-color: ${colors[1]}\"></div>\n      </div>`,\n      `<span class=\"spectrum-Badge spectrum-Badge--sizeS spectrum-Badge--${uiClass}\">${uiStatus}</span>`,\n      `<span class=\"spectrum-Body spectrum-Body--sizeM\">${round(contrast, 2)}:1</span>`,\n      `<div\">\n        <div class=\"spectrum-ProgressBar spectrum-ProgressBar--sizeM deltaE-meter ${meterClass}\" value=\"${meterPercent}\" role=\"progressbar\" aria-valuenow=\"50\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n          <div class=\"spectrum-FieldLabel spectrum-FieldLabel--sizeM spectrum-ProgressBar-label\">Delta E</div>\n          <div class=\"spectrum-FieldLabel spectrum-FieldLabel--sizeM spectrum-ProgressBar-percentage\">${meterPercent}</div>\n          <div class=\"spectrum-ProgressBar-track\">\n            <div class=\"spectrum-ProgressBar-fill\" style=\"width: ${meterPercent}%;\"></div>\n          </div>\n        </div>\n      </div>`\n    ];\n    rows.push(rowItem);\n  }\n  if (scaleType === 'diverging') {\n    let color1Array = chroma(colors[0]).rgb();\n    let color2Array = chroma(colors[1]).rgb();\n    let color3Array = chroma(colors[2]).rgb();\n    let contrast1 = Leo.contrast(color1Array, color2Array);\n    let contrast2 = Leo.contrast(color2Array, color3Array);\n    if (contrast1 < 0) contrast1 = contrast1 * -1;\n    if (contrast2 < 0) contrast2 = contrast2 * -1;\n\n    let deltaE1 = getDifference(colors[0], colors[1]);\n    let deltaE2 = getDifference(colors[1], colors[2]);\n    let meterPercent1 = round(deltaE1, 2);\n    let meterPercent2 = round(deltaE2, 2);\n    let meterClass1 = deltaE1 < minimumThreshold ? 'is-negative' : 'is-positive';\n    let meterClass2 = deltaE1 < minimumThreshold ? 'is-negative' : 'is-positive';\n\n    let uiClass1 = contrast1 < WCAGmin || deltaE1 < minimumThreshold ? 'negative' : 'positive';\n    let uiClass2 = contrast2 < WCAGmin || deltaE2 < minimumThreshold ? 'negative' : 'positive';\n    let uiStatus1 = contrast1 < WCAGmin || deltaE1 < minimumThreshold ? 'Fail' : 'Pass';\n    let uiStatus2 = contrast2 < WCAGmin || deltaE2 < minimumThreshold ? 'Fail' : 'Pass';\n    let color1 = 'Start color';\n    let color2 = 'Middle color';\n    let color3 = 'End color';\n\n    let rowItem1 = [\n      `${color1} vs ${color2}`,\n      `<div class=\"dualSwatch\">\n        <div class=\"swatch\" style=\"background-color: ${colors[0]}\"></div>\n        <div class=\"swatch\" style=\"background-color: ${colors[1]}\"></div>\n      </div>`,\n      `<span class=\"spectrum-Badge spectrum-Badge--sizeS spectrum-Badge--${uiClass1}\">${uiStatus1}</span>`,\n      `<span class=\"spectrum-Body spectrum-Body--sizeM\">${round(contrast1, 2)}:1</span>`,\n      `<div\">\n        <div class=\"spectrum-ProgressBar spectrum-ProgressBar--sizeM deltaE-meter ${meterClass1}\" value=\"${meterPercent1}\" role=\"progressbar\" aria-valuenow=\"50\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n          <div class=\"spectrum-FieldLabel spectrum-FieldLabel--sizeM spectrum-ProgressBar-label\">Delta E</div>\n          <div class=\"spectrum-FieldLabel spectrum-FieldLabel--sizeM spectrum-ProgressBar-percentage\">${meterPercent1}</div>\n          <div class=\"spectrum-ProgressBar-track\">\n            <div class=\"spectrum-ProgressBar-fill\" style=\"width: ${meterPercent1}%;\"></div>\n          </div>\n        </div>\n      </div>`\n    ];\n    let rowItem2 = [\n      `${color2} vs ${color3}`,\n      `<div class=\"dualSwatch\">\n        <div class=\"swatch\" style=\"background-color: ${colors[1]}\"></div>\n        <div class=\"swatch\" style=\"background-color: ${colors[2]}\"></div>\n      </div>`,\n      `<span class=\"spectrum-Badge spectrum-Badge--sizeS spectrum-Badge--${uiClass2}\">${uiStatus2}</span>`,\n      `<span class=\"spectrum-Body spectrum-Body--sizeM\">${round(contrast2, 2)}:1</span>`,\n      `<div\">\n        <div class=\"spectrum-ProgressBar spectrum-ProgressBar--sizeM deltaE-meter ${meterClass2}\" value=\"${meterPercent2}\" role=\"progressbar\" aria-valuenow=\"50\" aria-valuemin=\"0\" aria-valuemax=\"100\">\n          <div class=\"spectrum-FieldLabel spectrum-FieldLabel--sizeM spectrum-ProgressBar-label\">Delta E</div>\n          <div class=\"spectrum-FieldLabel spectrum-FieldLabel--sizeM spectrum-ProgressBar-percentage\">${meterPercent2}</div>\n          <div class=\"spectrum-ProgressBar-track\">\n            <div class=\"spectrum-ProgressBar-fill\" style=\"width: ${meterPercent2}%;\"></div>\n          </div>\n        </div>\n      </div>`\n    ];\n    rows.push(rowItem1);\n    rows.push(rowItem2);\n  }\n\n  createTable(headers, rows, `${scaleType}_a11yTable`);\n}\n\nmodule.exports = {\n  createPanelReportTable\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\nimport {addScaleKeyColor, addScaleKeyColorInput} from './scaleKeyColors';\nimport {themeRamp, themeRampKeyColors, updateRamps} from './ramps';\nimport {_sequentialScale} from './initialSequentialScale';\nimport {_divergingScale} from './initialDivergingScale';\nimport {createInterpolationCharts} from './createInterpolationCharts';\nimport {createRGBchannelChart} from './createRGBchannelChart';\nimport {downloadSVGgradient} from './createSVGgradient';\nimport {createColorWheel, updateColorWheel, updateColorDots} from './colorWheel';\nimport {create3dModel} from './create3dModel';\nimport {createSamples} from './createSamples';\nimport {createDemos} from './createDemos';\nimport {createPanelReportTable} from './createPanelReportTable';\n\nconst chroma = require('chroma-js');\n\nfunction colorScaleSequential(scaleType = 'sequential') {\n  let defaultBackgroundColor;\n  const mq = window.matchMedia('(prefers-color-scheme: dark)');\n  if (mq.matches) {\n    //dark mode\n    defaultBackgroundColor = '#1d1d1d';\n    document.getElementById('main_sequential').classList.add('spectrum--darkest');\n  } else {\n    //light mode\n    defaultBackgroundColor = '#f8f8f8';\n    document.getElementById('main_sequential').classList.add('spectrum--light');\n  }\n\n  let downloadGradient = document.getElementById(`${scaleType}_downloadGradient`);\n  let chartsModeSelect = document.getElementById(`${scaleType}_chartsMode`);\n  let interpolationMode = document.getElementById(`${scaleType}_mode`);\n  let smoothWrapper = document.getElementById(`${scaleType}_smoothWrapper`);\n  let smooth = document.getElementById(`${scaleType}_smooth`);\n  let sampleNumber = document.getElementById(`${scaleType}Samples`);\n  let sampleOutput = document.getElementById(`${scaleType}_format`);\n  let quoteSwitch = document.getElementById(`${scaleType}paramStringQuotes`);\n  let PlotDestId = `${scaleType}ModelWrapper`;\n\n  let samples = sampleNumber.value;\n\n  const colorClass = scaleType === 'sequential' ? _sequentialScale : _divergingScale;\n  const colorKeys = colorClass.colorKeys;\n\n  // If class is preset to smooth, check the smooth switch in the UI\n  if (colorClass.smooth === true) smooth.checked = true;\n\n  if (colorKeys.length >= 3) {\n    smooth.disabled = false;\n    smoothWrapper.classList.remove('is-disabled');\n  } else {\n    smooth.disabled = true;\n    smoothWrapper.classList.add('is-disabled');\n  }\n  interpolationMode.value = colorClass.colorspace;\n\n  let gradientId = `${scaleType}_gradient`;\n  let buttonId = `${scaleType}_addKeyColor`;\n\n  const hasColorKeys = Promise.resolve(colorKeys);\n  hasColorKeys.then((values) => {\n    for (let i = 0; i < values.length; i++) {\n      addScaleKeyColorInput(values[i], buttonId, scaleType, i);\n    }\n  });\n\n  let colors = colorClass.colors;\n\n  themeRamp(colors, gradientId, '90');\n  themeRampKeyColors(colorKeys, gradientId, scaleType);\n\n  createRGBchannelChart(colors, `${scaleType}RGBchart`);\n  createInterpolationCharts(colors, 'CAM02', scaleType);\n  create3dModel(PlotDestId, [colorClass], chartsModeSelect.value, scaleType);\n\n  createSamples(samples, scaleType);\n  createDemos(scaleType);\n\n  createColorWheel(chartsModeSelect.value, 50, scaleType);\n  updateColorDots(chartsModeSelect.value, scaleType);\n\n  let bgInput = document.getElementById(`scales_bgColor`);\n  bgInput.value = defaultBackgroundColor;\n\n  const color2 = colors[0];\n  const color1 = colors[colors.length - 1];\n  createPanelReportTable([color1, color2], defaultBackgroundColor, scaleType, 'AA');\n\n  bgInput.addEventListener('input', (e) => {\n    // change <main> background\n    let value = e.target.value;\n    let wrapper = document.getElementById(`main_${scaleType}`);\n    wrapper.style.backgroundColor = value;\n    // toggle class based on lightness\n    let lightness = chroma(value).jch()[0];\n    if (lightness < 50) {\n      wrapper.classList.remove('spectrum--light');\n      wrapper.classList.add('spectrum--darkest');\n    } else {\n      wrapper.classList.remove('spectrum--darkest');\n      wrapper.classList.add('spectrum--light');\n    }\n    let level = document.getElementById(`scales_complianceLevel`).value;\n\n    createPanelReportTable([color1, color2], value, scaleType, level);\n  });\n\n  const compliancePicker = document.getElementById(`scales_complianceLevel`);\n  compliancePicker.addEventListener('change', (e) => {\n    let level = e.target.value;\n    createPanelReportTable(null, null, scaleType, level);\n  });\n\n  interpolationMode.addEventListener('change', (e) => {\n    let colorspace = e.target.value;\n    colorClass.colorspace = colorspace;\n\n    updateRamps(colorClass, scaleType, scaleType);\n    createSamples(sampleNumber.value, scaleType);\n    updateColorDots(chartsModeSelect.value, scaleType);\n    createDemos(scaleType);\n    create3dModel(PlotDestId, [colorClass], chartsModeSelect.value, scaleType);\n  });\n\n  smooth.addEventListener('change', (e) => {\n    colorClass.smooth = e.target.checked;\n    colors = colorClass.colors;\n\n    updateRamps(colorClass, scaleType, scaleType);\n    createInterpolationCharts(colors, chartsModeSelect.value, scaleType);\n    updateColorDots(chartsModeSelect.value, scaleType);\n    createSamples(sampleNumber.value, scaleType);\n    createDemos(scaleType);\n    create3dModel(PlotDestId, [colorClass], chartsModeSelect.value, scaleType);\n  });\n\n  downloadGradient.addEventListener('click', (e) => {\n    const stops = 100;\n    colorClass.swatches = Number(stops);\n\n    const gradientColors = colorClass.colors;\n    let scaleName = document.getElementById(`${scaleType}_name`).value;\n    let filename = `${scaleName}_${scaleType}`;\n\n    setTimeout(() => {\n      downloadSVGgradient(gradientColors, colorClass.colorspace, filename);\n      colorClass.swatches = originalSwatches;\n    }, 500);\n  });\n\n  chartsModeSelect.addEventListener('change', (e) => {\n    createInterpolationCharts(colors, e.target.value, scaleType);\n    let lightness = e.target.value === 'HSV' ? 100 : e.target.value === 'HSLuv' ? 60 : 50;\n\n    updateColorWheel(e.target.value, lightness, true, null, scaleType);\n    create3dModel(PlotDestId, [colorClass], e.target.value, scaleType);\n  });\n\n  const hasButton = Promise.resolve(document.getElementById(buttonId));\n  hasButton.then((value) => {\n    value.addEventListener('click', (e) => {\n      addScaleKeyColor(scaleType, e);\n      updateColorDots(chartsModeSelect.value, scaleType);\n      createSamples(sampleNumber.value, scaleType);\n      createDemos(scaleType);\n      create3dModel(PlotDestId, [colorClass], chartsModeSelect.value, scaleType);\n    });\n  });\n\n  sampleNumber.addEventListener('input', (e) => {\n    createSamples(e.target.value, scaleType);\n  });\n  sampleOutput.addEventListener('input', () => {\n    createSamples(sampleNumber.value, scaleType);\n  });\n  quoteSwitch.addEventListener('change', () => {\n    createSamples(sampleNumber.value, scaleType);\n  });\n}\n\nmodule.exports = {\n  colorScaleSequential\n};\n","/*\nCopyright 2021 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport * as Leo from '@adobe/leonardo-contrast-colors';\nimport {_qualitativeScale} from './initialQualitativeScale';\nimport {throttle, capitalizeFirstLetter, cssColorToRgb, simulateCvd, getDifference, shuffleArray} from './utils';\nimport {createColorWheel, updateColorWheel, updateColorDots} from './colorWheel';\nimport {createDemos} from './createDemos';\n\nconst chroma = require('chroma-js');\nconst {extendChroma} = require('./chroma-plus');\nconst DeltaE = require('delta-e');\n\nextendChroma(chroma);\n\nconst rangeInput = document.getElementById('qualitative_Threshold');\nconst rangeLabel = document.getElementById('qualitative_ThresholdValue');\nconst button = document.getElementById('qualitative_Generate');\nconst testColorsInput = document.getElementById('qualitative_sampleColors');\nconst chartsModeSelect = document.getElementById('qualitative_chartsMode');\nconst outputModeSelect = document.getElementById('qualitative_format');\nconst quoteSwitch = document.getElementById(`qualitativeparamStringQuotes`);\nconst backgroundInput = document.getElementById('scales_bgColor');\n\nconst minContrast = document.getElementById('qualitative_minContrast');\nconst protan = document.getElementById('check_Protanopia');\nconst deutan = document.getElementById('check_Deuteranopia');\nconst tritan = document.getElementById('check_Tritanopia');\nconst achroma = document.getElementById('check_Achromatopsia');\n\nlet newSafeColors; // Equals the array of generated CVD colors (regardless of keepers)\nwindow._qualitativeScale = _qualitativeScale;\n\nfunction colorScaleQualitative(scaleType = 'qualitative') {\n  const testColors = _qualitativeScale.sampleColors;\n  testColorsInput.value = _qualitativeScale.sampleColors;\n\n  showColors(testColors, 'originalColors', true);\n  createColorWheel(chartsModeSelect.value, 50, scaleType);\n  button.click();\n  createDemos(scaleType, _qualitativeScale.keeperColors);\n  createOutput();\n}\n\nchartsModeSelect.addEventListener('change', (e) => {\n  let lightness = e.target.value === 'HSV' ? 100 : e.target.value === 'HSLuv' ? 60 : 50;\n\n  updateColorWheel(e.target.value, lightness, true, null, 'qualitative', _qualitativeScale.keeperColors);\n});\n\nfunction updateColors() {\n  const scaleType = 'qualitative';\n\n  clearKeepers();\n  const testColors = _qualitativeScale.sampleColors;\n\n  document.getElementById('cvdSafeColors').innerHTML = ' ';\n\n  const getSafeColors = Promise.resolve(getCvdSafeColors(testColors));\n\n  getSafeColors.then((newSafeColors) => {\n    showColors(newSafeColors, 'cvdSafeColors');\n    showSimulatedColors(newSafeColors, true);\n    createDemos(scaleType, _qualitativeScale.keeperColors);\n\n    createOutput();\n  });\n}\n\ntestColorsInput.addEventListener('input', throttle(inputUpdate, 10));\n\nfunction inputUpdate(e) {\n  const newTestColors = e.target.value.replaceAll(' ', '').split(',');\n  _qualitativeScale.sampleColors = newTestColors;\n\n  showColors(newTestColors, 'originalColors', true);\n\n  setTimeout(() => {\n    updateColors();\n  }, 100);\n}\n\nrangeInput.addEventListener('input', function (e) {\n  updateColors();\n  const val = e.target.value;\n\n  rangeLabel.innerHTML = val;\n});\n\nminContrast.addEventListener('input', function () {\n  updateColors();\n});\n\nprotan.addEventListener('input', function () {\n  updateColors();\n});\ndeutan.addEventListener('input', function () {\n  updateColors();\n});\ntritan.addEventListener('input', function () {\n  updateColors();\n});\nachroma.addEventListener('input', function () {\n  updateColors();\n});\nbackgroundInput.addEventListener('input', function (e) {\n  // change <main> background\n  const scaleType = 'qualitative';\n  let value = e.target.value;\n  let wrapper = document.getElementById(`main_${scaleType}`);\n  wrapper.style.backgroundColor = value;\n  // toggle class based on lightness\n  let lightness = chroma(value).jch()[0];\n  if (lightness < 50) {\n    wrapper.classList.remove('spectrum--light');\n    wrapper.classList.add('spectrum--darkest');\n  } else {\n    wrapper.classList.remove('spectrum--darkest');\n    wrapper.classList.add('spectrum--light');\n  }\n});\n\nfunction updateColorsIfContrast() {\n  if (minContrast.checked) {\n    updateColors();\n  }\n}\nbackgroundInput.addEventListener('input', throttle(updateColorsIfContrast, 100));\n\nbutton.addEventListener('click', function () {\n  const scaleType = 'qualitative';\n  document.getElementById('cvdSafeColors').innerHTML = ' ';\n\n  const testColors = Promise.resolve(_qualitativeScale.sampleColors);\n  const getKeepers = Promise.resolve(_qualitativeScale.keeperColors);\n\n  let valid = true;\n  getKeepers.then((keepers) => {\n    keepers.map((item) => {\n      if (item.length < 7) valid = false;\n    });\n  });\n\n  Promise.all([testColors, getKeepers]).then((resolve) => {\n    let testColors = resolve[0];\n    let keepers = resolve[1];\n\n    const getSafeColorSet = Promise.resolve(getLargestSetCvdColors(testColors, _qualitativeScale.keeperColors));\n    getSafeColorSet.then((newSafeColors) => {\n      if (valid) {\n        if (newSafeColors === undefined) newSafeColors = getLargestSetCvdColors(testColors, keepers);\n        if (!newSafeColors && keepers.length > 0) {\n          // If newSafeColors is undefined, and keeperColors are larger than one,\n          // this means we've found the only available combination of CVD safe colors.\n          // In this case, we want to show the keeper colors in the simulations.\n\n          showColors(keepers, 'cvdSafeColors');\n          showSimulatedColors(keepers, true);\n        } else {\n          // Otherwise, show the newSafeColors set, because it includes additional\n          // color options that can be added to the keeperColors set.\n          // console.log(newSafeColors)\n\n          showColors(newSafeColors, 'cvdSafeColors');\n\n          showSimulatedColors(newSafeColors, true);\n        }\n      } else {\n        showColors(newSafeColors, 'cvdSafeColors');\n        showSimulatedColors(newSafeColors, true);\n      }\n\n      updateColorDots(chartsModeSelect.value, scaleType, keepers);\n      createDemos(scaleType, keepers);\n      createOutput();\n    });\n  });\n});\n\nfunction clearKeepers() {\n  _qualitativeScale.keeperColors = [];\n  let wrapper = document.getElementById('qualitative_selectedColors');\n  wrapper.classList.add('isEmpty');\n  wrapper.innerHTML = 'Select generated colors to begin building your scale';\n}\n\nfunction getModes() {\n  let modes = [];\n\n  if (protan.checked) modes.push('protanopia');\n  if (deutan.checked) modes.push('deuteranopia');\n  if (tritan.checked) modes.push('tritanopia');\n  if (achroma.checked) modes.push('achromatopsia');\n\n  _qualitativeScale.cvdSupport = modes;\n  return modes;\n}\n\nfunction createOutput() {\n  const scaleType = 'qualitative';\n\n  const output = _qualitativeScale.output;\n  const quoteSwitch = document.getElementById(`${scaleType}paramStringQuotes`);\n  const quotes = quoteSwitch.checked;\n  // reassign new swatch value\n  const panelOutputContent = document.getElementById(`${scaleType}ColorScaleOutput`);\n  panelOutputContent.innerHTML = ' ';\n\n  const sampleColors = _qualitativeScale.keeperColors;\n\n  _qualitativeScale.keeperColors =\n    _qualitativeScale.output === 'HEX' || _qualitativeScale.output === 'RGB'\n      ? sampleColors\n      : sampleColors.map((c) => {\n          return cssColorToRgb(c);\n        });\n\n  let colorvalueString = quotes\n    ? sampleColors\n        .map((c) => {\n          return `\"${c}\"`;\n        })\n        .toString()\n        .replaceAll(',', ', ')\n    : sampleColors.toString().replaceAll(',', ', ');\n  panelOutputContent.innerHTML = colorvalueString;\n}\n\noutputModeSelect.addEventListener('change', (e) => {\n  let format = e.target.value;\n  _qualitativeScale.output = format;\n\n  createOutput();\n});\nquoteSwitch.addEventListener('change', createOutput);\n\n/**\n *  Helper function to test two colors for all CVD\n *  types. Returns true or false\n *\n *  let testColor1 = '#e41a1c';\n *  let testColor2 = '#25547a';\n *  console.log(testCvd(testColor1, testColor2))\n *  // returns true\n *\n *  let testColor1 = '#e41a1c';\n *  let testColor2 = '#cf2b22';\n *  console.log(testCvd(testColor1, testColor2))\n *  // returns false\n */\n\nfunction testCvd(color1, color2, log) {\n  //  grab threshold from the UI\n  let minimumThreshold = Number(rangeInput.value);\n\n  const modes = getModes();\n  let result = true;\n\n  for (let i = 0; i < modes.length; i++) {\n    let sim1 = simulateCvd(color1, modes[i]);\n    let sim2 = simulateCvd(color2, modes[i]);\n    let deltaE = getDifference(sim1, sim2);\n    if (deltaE < minimumThreshold) {\n      if (log) console.error(`${color1} conflicts with ${color2} in ${modes[i]}\\nDeltaE: ${deltaE}`);\n      result = false;\n      break;\n    } else continue;\n  }\n\n  return result;\n}\n\n/**\n *  Function for getting CVD safe colors from a set\n *  Grab a random color. Then loop through the array of colors.\n *  For each color, if it passes & then passes with all other colors,\n *  put it in the safeColors array\n */\nfunction getCvdSafeColors(colors, sample, random = false) {\n  let set;\n  if (random) {\n    set = shuffleArray(colors);\n  } else {\n    set = orderColors(colors, 'hue', 'lightness');\n  }\n  let ratios = minContrast.checked;\n  let background = backgroundInput.value;\n  let complianceLevelPicker = document.getElementById('scales_complianceLevel');\n  let complianceLevel = complianceLevelPicker.value;\n  let contrastMinimum = complianceLevel === 'AAA' ? 4.5 : 3;\n  // TODO: Compliance picker does not run updateColor\n  if (ratios) set = eliminateLowContrastFromSet(set, background, contrastMinimum);\n\n  let safeColors = [];\n  if (sample) {\n    if (sample.length > 1) {\n      // test all sample colors against themselves first\n      for (let i = 0; i < sample.length; i++) {\n        // loop this color against all other colors\n        let result = true;\n        for (let j = 0; j < sample.length; j++) {\n          if (i === j) {\n            continue;\n          } else {\n            let test = testCvd(sample[i], sample[j], true); // true will log any conflicts\n            if (test === false) {\n              result = false;\n              break;\n            }\n          }\n        }\n        if (result === true) {\n          safeColors.push(sample[i]);\n        } else {\n          console.warn(`Conflict: eliminating color ${sample[i]} from set`);\n        }\n      }\n      // Remove duplicates\n      safeColors = [...new Set(safeColors)];\n    }\n    if (sample.length === 1) {\n      safeColors.push(sample[0]);\n    }\n  } else {\n    const randomIndex = getRandomInt(set.length);\n    // Grab a random color to start with\n    const randomColor = set[randomIndex];\n    safeColors.push(randomColor);\n  }\n\n  let end = safeColors.length;\n\n  for (let i = 0; i < set.length; i++) {\n    let result = true;\n    // For each color of the setay,\n    // loop it against all colors of safeColors\n    for (let j = 0; j < end; j++) {\n      let test = testCvd(set[i], safeColors[j]);\n      if (test === false) {\n        result = false;\n        break;\n      } else continue;\n    }\n    if (result === true) {\n      // safeColors = [...safeColors, set[i] ];\n      safeColors.push(set[i]);\n      end = end + 1;\n    }\n  }\n\n  return safeColors;\n}\n\nlet cache;\nfunction getLargestSetCvdColors(set, sample) {\n  let sets = [];\n  for (let i = 0; i < 18; i++) {\n    sets.push(getCvdSafeColors(set, sample));\n  }\n\n  let maxLengthArray = Math.max(...sets.map((a) => a.length));\n  let indicies = sets.map((a) => a.length);\n  let index = indicies.indexOf(maxLengthArray);\n\n  let matchingIndicies = [];\n  while (index != -1) {\n    matchingIndicies.push(index);\n    index = indicies.indexOf(maxLengthArray, index + 1);\n  }\n  for (let i = 0; i < matchingIndicies.length; i++) {\n    let currentIndex = matchingIndicies[i];\n    if (arraysEqual(sets[currentIndex], cache)) {\n      continue;\n    }\n    if (!sets[currentIndex]) {\n      continue;\n    } else {\n      cache = sets[currentIndex];\n      return sets[currentIndex];\n    }\n  }\n}\n\n/**\n *  Helper function to order colors\n *  by hue and lightness\n */\nfunction orderColors(colors, priority1, priority2) {\n  let validOptions = ['hue', 'saturation', 'lightness'];\n  for (let i = 0; i < validOptions.length; i++) {\n    if (!validOptions.includes(priority1)) console.warn(`${priority1} is not a valid option of ${validOptions}`);\n    if (!validOptions.includes(priority2)) console.warn(`${priority1} is not a valid option of ${validOptions}`);\n  }\n  // for each color, convert to lch object\n  let colorsLch = colors.map((color, i) => {\n    let lch = chroma(color).jch();\n    return {\n      hue: lch[2],\n      saturation: lch[1],\n      lightness: lch[0],\n      color,\n      index: i\n    };\n  });\n  // Sort by priority 1, then by priority 1\n  let sorted = colorsLch.sort((a, b) => (a[priority1] > b[priority1] ? 1 : a[priority1] === b[priority1] ? (a[priority2] > b[priority2] ? 1 : -1) : -1));\n  // Create random \"starting point\" for hues\n  if (priority1 === 'hue') {\n    let randomIndex = getRandomInt(sorted.length);\n    let firstHalf = sorted.splice(0, randomIndex);\n    let secondHalf = sorted.splice(randomIndex);\n    sorted = secondHalf.concat(firstHalf);\n  }\n  const orderedColors = sorted.map((object) => {\n    return object.color;\n  });\n  return orderedColors;\n}\n\nfunction showColors(arr, dest, panel = false) {\n  let wrap = document.getElementById(dest);\n  wrap.innerHTML = ' ';\n\n  if (!arr) {\n    let swatch = document.createElement('div');\n    swatch.className = 'emptyColorsGroup';\n    swatch.innerHTML = 'No colors available.';\n    wrap.appendChild(swatch);\n  } else {\n    arr.map((color) => {\n      let swatch = document.createElement('div');\n      let colorArr = chroma(color).rgb();\n      let contrast = Leo.contrast([0, 0, 0], colorArr);\n      if (contrast < 0) contrast = contrast * -1;\n\n      swatch.className = !panel ? 'simulationSwatch' : 'panelSwatch';\n      swatch.style.backgroundColor = color;\n      swatch.style.color = contrast < 4.5 ? '#ffffff' : '#000000';\n\n      if (dest === 'cvdSafeColors') {\n        swatch.innerHTML = `${color}`;\n        let button = document.createElement('button');\n        (button.className = _qualitativeScale.keeperColors.indexOf(color) >= 0 ? 'saveColorToKeepers showSvg' : 'saveColorToKeepers'), (button.style.color = contrast < 4.5 ? '#ffffff' : '#000000');\n        button.innerHTML =\n          _qualitativeScale.keeperColors.indexOf(color) >= 0\n            ? `<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"spectrum-Icon spectrum-Icon--sizeS\" focusable=\"false\" aria-hidden=\"true\" aria-label=\"Locked\">\n          <use xlink:href=\"#spectrum-icon-18-LockClosed\"></use>\n        </svg>`\n            : `<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"spectrum-Icon spectrum-Icon--sizeS\" focusable=\"false\" aria-hidden=\"true\" aria-label=\"Add\">\n            <use xlink:href=\"#spectrum-icon-18-Add\"></use>\n          </svg>`;\n        button.addEventListener('click', (e) => {\n          if (_qualitativeScale.keeperColors.indexOf(color) < 0) {\n            _qualitativeScale.keeperColors.push(color);\n            showColors(_qualitativeScale.keeperColors, 'qualitative_selectedColors');\n            updateColorDots(chartsModeSelect.value, 'qualitative', _qualitativeScale.keeperColors);\n            createDemos('qualitative', _qualitativeScale.keeperColors);\n            document.getElementById('qualitative_selectedColors').classList.remove('isEmpty');\n            createOutput();\n          }\n        });\n        swatch.appendChild(button);\n      }\n      if (dest === 'qualitative_selectedColors') {\n        let button = document.createElement('button');\n        (button.className = 'saveColorToKeepers'), (button.style.color = contrast < 4.5 ? '#ffffff' : '#000000');\n        button.innerHTML = `<svg xmlns:xlink=\"http://www.w3.org/1999/xlink\" class=\"spectrum-Icon spectrum-Icon--sizeS\" focusable=\"false\" aria-hidden=\"true\" aria-label=\"Delete\">\n          <use xlink:href=\"#spectrum-icon-18-Delete\"></use>\n        </svg>`;\n        button.addEventListener('click', () => {\n          const index = _qualitativeScale.keeperColors.indexOf(color);\n          if (index > -1) {\n            _qualitativeScale.keeperColors.splice(index, 1);\n          }\n          showColors(_qualitativeScale.keeperColors, 'qualitative_selectedColors');\n          updateColorDots(chartsModeSelect.value, 'qualitative', _qualitativeScale.keeperColors);\n          createDemos('qualitative', _qualitativeScale.keeperColors);\n          createOutput();\n          if (_qualitativeScale.keeperColors.length < 1) {\n            const selectedColors = document.getElementById('qualitative_selectedColors');\n            selectedColors.classList.add('isEmpty');\n            selectedColors.innerHTML = 'Select generated colors to begin building your scale';\n          }\n        });\n        swatch.appendChild(button);\n      }\n\n      wrap.appendChild(swatch);\n    });\n  }\n}\n\nfunction showSimulatedColors(array, sortBySimmilarity) {\n  let wrap = document.getElementById('simulatedColors');\n  wrap.innerHTML = ' ';\n  let parentWrap = document.getElementById('qualitativeSimulationWrapper');\n  // parentWrap.innerHTML = ' ';\n\n  const getAllModes = Promise.resolve(getModes());\n  const arr = Promise.resolve(array);\n\n  Promise.all([getAllModes, arr]).then((resolve) => {\n    let modes = resolve[0];\n    let arr = resolve[1];\n    modes.forEach((mode, index) => {\n      // if arr is an array, that means colors have been passed.\n      // showSimulatedColors should display all colors in their respective simulations\n      if (Array.isArray(arr)) {\n        const simArray = Promise.resolve(\n          arr.map((color) => {\n            return simulateCvd(color, mode);\n          })\n        );\n\n        simArray.then((simColor) => {\n          let label = document.createElement('h3');\n          label.className = 'spectrum-Heading spectrum-Heading--sizeXXS';\n          label.innerHTML = `${capitalizeFirstLetter(mode)}`;\n          wrap.appendChild(label);\n\n          let originalIndicies = Array.from(Array(arr.length - 1).keys());\n          // if sort by similarity, order colors by hue\n          if (sortBySimmilarity) {\n            // for each color, convert to lch object\n            let colorsLch = simColor.map((color, i) => {\n              let lch = chroma(color).lch();\n              return {\n                hue: lch[2],\n                saturation: lch[1],\n                lightness: lch[0],\n                color,\n                index: i\n              };\n            });\n            if (mode === 'achromatopsia') colorsLch.sort((a, b) => (a.lightness > b.lightness ? 1 : -1));\n            // Sort by hue, then by saturation\n            else colorsLch.sort((a, b) => (a.hue > b.hue ? 1 : a.hue === b.hue ? (a.saturation > b.saturation ? 1 : -1) : -1));\n            // Redefine simColor with sorted colors\n            simColor = colorsLch.map((object) => {\n              return object.color;\n            });\n            // Redefine original indicies so we can properly map original\n            // color value to the newly sorted simultated colors\n            originalIndicies = colorsLch.map((object) => {\n              return object.index;\n            });\n          }\n          simColor.map((color, index) => {\n            let swatch = document.createElement('div');\n            swatch.className = 'simulationSwatch';\n            swatch.style.backgroundColor = color;\n            let tinySwatch = document.createElement('div');\n            tinySwatch.className = 'tinySwatch';\n            tinySwatch.style.backgroundColor = arr[originalIndicies[index]];\n            swatch.appendChild(tinySwatch);\n            // swatch.innerHTML = arr[originalIndicies[index]]\n            wrap.appendChild(swatch);\n          });\n        });\n\n        // Only add this text once; don't add if its already there.\n        if (!document.getElementById('simulationDisclaimer')) {\n          let textSpan = document.createElement('p');\n          textSpan.id = 'simulationDisclaimer';\n          textSpan.className = 'spectrum-Body spectrum-Body--sizeXXS';\n          textSpan.innerHTML = 'Simulated colors are ordered by hue and saturation for best comparison of similar colors.';\n          parentWrap.appendChild(textSpan);\n        }\n      }\n      // if no colors are passed to showSimulatedColors, ie, arr\n      // is not an array, we need to output something other than simulated colors.\n      else {\n        let textSpan = document.createElement('p');\n        textSpan.className = 'spectrum-Body spectrum-Body--sizeXXS';\n        textSpan.innerHTML = 'No colors to preview. Cycle through colors again.';\n        parentWrap.appendChild(textSpan);\n      }\n    });\n  });\n}\n\nfunction arrayRemove(arr, values) {\n  const toRemove = new Set(values);\n  return arr.filter((value) => {\n    // return those elements not in the namesToDeleteSet\n    return !toRemove.has(value);\n  });\n}\n\nfunction getRandomInt(max) {\n  return Math.floor(Math.random() * max);\n}\n\nfunction arraysEqual(a, b) {\n  if (a === b) return true;\n  if (a == null || b == null) return false;\n  if (a.length !== b.length) return false;\n\n  // If you don't care about the order of the elements inside\n  // the array, you should sort both arrays here.\n  // Please note that calling sort on an array will modify that array.\n  // you might want to clone your array first.\n\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction eliminateLowContrastFromSet(set, background, ratio) {\n  let lowContrastColors = [];\n  const backgroundArray = chroma(background).rgb();\n  for (let i = 0; i < set.length; i++) {\n    let colorArray = chroma(set[i]).rgb();\n    let contrast = Leo.contrast(colorArray, backgroundArray);\n    if (contrast < ratio) lowContrastColors.push(set[i]);\n  }\n  let newSet = arrayRemove(set, lowContrastColors);\n  return newSet;\n}\n\nmodule.exports = {\n  colorScaleQualitative\n};\n","/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {saveAs} from 'file-saver';\nimport {_sequentialScale} from './initialSequentialScale';\nimport {_divergingScale} from './initialDivergingScale';\nimport {_qualitativeScale} from './initialQualitativeScale';\n\nfunction createSVGswatches(scaleType) {\n  let colorClass = scaleType === 'sequential' ? _sequentialScale : scaleType === 'diverging' ? _divergingScale : _qualitativeScale;\n  let colors = scaleType === 'qualitative' ? colorClass.keeperColors : colorClass.samples.reverse();\n  var svgns = 'http://www.w3.org/2000/svg';\n\n  const rectSize = 80;\n  const marginX = 8;\n\n  const swatchesPerColor = colors.length;\n  const maxColorWidth = (rectSize + marginX) * swatchesPerColor;\n  const maxSvgWidth = maxColorWidth;\n  const maxSvgHeight = rectSize;\n\n  let svgWrapper = document.createElementNS(svgns, 'svg');\n  svgWrapper.setAttribute('xmlns', svgns);\n  svgWrapper.setAttribute('version', '1.1');\n  svgWrapper.setAttributeNS(null, 'width', maxSvgWidth + 'px');\n  svgWrapper.setAttributeNS(null, 'height', maxSvgHeight + 'px');\n  svgWrapper.setAttribute('aria-hidden', 'true');\n  svgWrapper.id = 'svg';\n\n  let outerElement = document.createElement('div');\n  outerElement.id = `${scaleType}SVGcolorSamples`;\n  let y = 0;\n\n  outerElement.appendChild(svgWrapper);\n  document.body.appendChild(outerElement);\n\n  for (let i = 0; i < colors.length; i++) {\n    let x = (rectSize + marginX) * i;\n\n    let rect = document.createElementNS(svgns, 'rect');\n    rect.setAttributeNS(null, 'x', x);\n    rect.setAttributeNS(null, 'y', y);\n    rect.setAttributeNS(null, 'width', rectSize);\n    rect.setAttributeNS(null, 'height', rectSize);\n    rect.setAttributeNS(null, 'rx', 8);\n    rect.setAttributeNS(null, 'fill', colors[i]);\n    svgWrapper.appendChild(rect);\n  }\n}\n\nfunction downloadSwatches(scaleType) {\n  const createSvg = Promise.resolve(createSVGswatches(scaleType));\n\n  createSvg.then(() => {\n    let svg = document.getElementById(`${scaleType}SVGcolorSamples`).innerHTML;\n    let scaleName = document.getElementById(`${scaleType}_name`).value;\n\n    let filename = `${scaleName}_${scaleType}_colors.svg`;\n    var blob = new Blob([`${svg}`], {type: 'image/svg+xml;charset=utf-8'});\n\n    saveAs(blob, filename);\n    document.getElementById(`${scaleType}SVGcolorSamples`).remove();\n  });\n}\n\nwindow.downloadSwatches = downloadSwatches;\n\ndocument.getElementById('downloadSequentialSwatches').addEventListener('click', () => {\n  setTimeout(function () {\n    downloadSwatches('sequential');\n  }),\n    1000;\n});\n\ndocument.getElementById('downloadDivergingSwatches').addEventListener('click', () => {\n  setTimeout(function () {\n    downloadSwatches('diverging');\n  }),\n    1000;\n});\n\ndocument.getElementById('downloadQualitativeSwatches').addEventListener('click', () => {\n  setTimeout(function () {\n    downloadSwatches('qualitative');\n  }),\n    1000;\n});\n\nmodule.exports = {\n  createSVGswatches,\n  downloadSwatches\n};\n","/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {saveAs} from 'file-saver';\nimport {_sequentialScale} from './initialSequentialScale';\nimport {_divergingScale} from './initialDivergingScale';\nimport {_qualitativeScale} from './initialQualitativeScale';\n\nfunction createXML(scaleType) {\n  let colorClass = scaleType === 'sequential' ? _sequentialScale : scaleType === 'diverging' ? _divergingScale : _qualitativeScale;\n  let colors = scaleType === 'qualitative' ? colorClass.keeperColors : colorClass.samples.reverse();\n  // Type names for Tableau XML\n  let type = scaleType === 'sequential' ? 'ordered-sequential' : scaleType === 'diverging' ? 'ordered-diverging' : 'regular';\n  let scaleName = document.getElementById(`${scaleType}_name`).value;\n\n  let colorTags = colors.map((c) => {\n    return `<color>${c}</color>`;\n  });\n  let colorTagString = colorTags.toString().replaceAll(',<', '\\n        <');\n\n  let xml = `\n  <?xml version='1.0'?>\n  <workbook>\n    <preferences>\n      <color-palette name=\"${scaleName}\" type=\"${type}\">\n        ${colorTagString}\n      </color-palette>\n    </preferences>\n  </workbook>`;\n\n  return xml;\n}\n\nfunction downloadXML(scaleType) {\n  const createXmlFile = Promise.resolve(createXML(scaleType));\n\n  createXmlFile.then((file) => {\n    let scaleName = document.getElementById(`${scaleType}_name`).value;\n\n    let filename = `${scaleName}_${scaleType}_colors.xml`;\n    var blob = new Blob([`${file}`], {type: 'text/plain'});\n\n    saveAs(blob, filename);\n  });\n}\n\nwindow.downloadXML = downloadXML;\n\ndocument.getElementById('sequential_downloadXml').addEventListener('click', () => {\n  setTimeout(function () {\n    downloadXML('sequential');\n  }),\n    1000;\n});\n\ndocument.getElementById('diverging_downloadXml').addEventListener('click', () => {\n  setTimeout(function () {\n    downloadXML('diverging');\n  }),\n    1000;\n});\n\ndocument.getElementById('qualitative_downloadXml').addEventListener('click', () => {\n  setTimeout(function () {\n    downloadXML('qualitative');\n  }),\n    1000;\n});\n\nmodule.exports = {\n  createXML,\n  downloadXML\n};\n"],"names":[],"version":3,"file":"scales.27e55053.js.map"}